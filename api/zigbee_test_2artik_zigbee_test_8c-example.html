<!DOCTYPE html>
<html>
  <head>
    <link href='zigbee_test_2artik_zigbee_test_8c-example.html' rel='canonical'>
    <meta charset='utf-8'>
    <!-- Always force latest IE rendering engine or request Chrome Frame -->
    <meta content='IE=edge,chrome=1' http-equiv='X-UA-Compatible'>
    <!-- Use title if it's in the page YAML frontmatter -->
    <meta content='width=device-width, user-scalable=yes, initial-scale=1.0, minimum-scale=1.0' name='viewport'>
    <meta content='UA-62517590-18' name='ua-id'>
    <meta property='og:title'>
    <meta content='https://developer.artik.io//documentation/images/artik-modules-og.png?1549048075' property='og:image'>
    <meta content='ARTIK Documentation' property='og:site_name'>
    <meta content='Here you will find information to help you get started, as well as the developer guides for more advanced activities.' property='og:description'>
    <meta content='summary_large_image' name='twitter:card'>
    <meta content='@SamsungIoT' name='twitter:site'>
    <meta content='@SamsungIoT' name='twitter:creator'>
    <meta name='twitter:title'>
    <meta content='Here you will find information to help you get started, as well as the developer guides for more advanced activities.' name='twitter:description'>
    <meta content='https://developer.artik.io//documentation/images/artik-modules-og.png?1549048075' name='twitter:image'>
    <meta class='swiftype' content='modules' data-type='string' name='tags'>
    <meta class='swiftype' content='developer' data-type='string' name='tags'>
    <meta class='swiftype' content='5.0' data-type='float' name='doc_weight'>
    <title>ARTIK Software API: zigbee_test/artik_zigbee_test.c</title>
    <link href="..\stylesheets\application.css?1549048074" rel="stylesheet">
    <link href="https://static.artik.io/css/navigation_v3.css" rel="stylesheet">
    <link href="..\stylesheets\print.css?1549048074" rel="stylesheet" media="print">
    <script src="https://unpkg.com/sweetalert/dist/sweetalert.min.js"></script>
    <link href="search\search.css" rel="stylesheet" type="text/css">
    
    <script type="text/javascript" src="jquery.js"></script>
    <link rel="shortcut icon" href="..\images\favicon-family.ico">
    <!-- Start of samsungartik Zendesk Widget script -->
    <script>/*<![CDATA[*/window.zEmbed||function(e,t){var n,o,d,i,s,a=[],r=document.createElement("iframe");window.zEmbed=function(){a.push(arguments)},window.zE=window.zE||window.zEmbed,r.src="javascript:false",r.title="",r.role="presentation",(r.frameElement||r).style.cssText="display: none",d=document.getElementsByTagName("script"),d=d[d.length-1],d.parentNode.insertBefore(r,d),i=r.contentWindow,s=i.document;try{o=s}catch(e){n=document.domain,r.src='javascript:var d=document.open();d.domain="'+n+'";void(0);',o=s}o.open()._l=function(){var o=this.createElement("script");n&&(this.domain=n),o.id="js-iframe-async",o.src=e,this.t=+new Date,this.zendeskHost=t,this.zEQueue=a,this.body.appendChild(o)},o.write('<body onload="document._l();">'),o.close()}("https://assets.zendesk.com/embeddable_framework/main.js","samsungartik.zendesk.com");
    /*]]>*/</script>
    <!-- End of samsungartik Zendesk Widget script -->
    
    <script>
      window.zESettings = {
        webWidget: {
          chat: {
            suppress: true
          },
          helpCenter: {
            suppress: true
          }
        }
      };
    
      zE(function() {
        zE.hide();
      });
    </script>
  </head>
  <body class='documentation documentation_api documentation_api_zigbee_test_2artik_zigbee_test_8c-example' data-offset='50' data-spy='scroll' data-target='#toc'>
    <noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-NG3HTN5" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
    new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
    j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
    '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-NG3HTN5');</script>
    <header class="sa-header" data-swiftype-index="false">
      <nav class="navbar yamm navbar-default">
        <div class="sa-container">
          <div class="navbar-header">
            
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#sa-collapse" aria-expanded="false">
              <span class="sr-only">Toggle navigation</span>
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
            </button>
            <a href="/" class="navbar-brand">
              <img alt="Samsung ARTIK" src="logo.png?1549048075">
            </a>
          </div>
    
          <div class="collapse navbar-collapse" id="sa-collapse">
            <ul class="nav navbar-nav">
              <li>
                <a href="/">Downloads Archive</a>
              </li>
              <li>
                <a href="..\index.htm" class="active">Documentation Archive</a>
              </li>
              <li>
                <a href="https://www.artik.io/blog/">Blog Archive</a>
              </li>
            </ul>
    
          </div>
        </div>
      </nav>
    </header>
    <div class='container container-full-width'>
      <div class='content side'>
        <a class='toggle-menu' href='#'>
          &#8595;
        </a>
        <nav class='section-nav' data-swiftype-index='false'>
          <ul class='section-nav-list'>
            <li class='section-nav-item'>
              <h4 class='section-title'>
                Documentation
              </h4>
              <div class='section-subtitle'><a href="..\index.htm">Quick Index</a></div>
              <ul class='subsections'>
                <li data-family='[0, 5, 7, 10]'>
                  <a href="..\security-topics\index.htm" data-name="security-topics" aria-expanded="false">Security Topics</a>
                </li>
                <li data-family='[0, 5, 7, 10]'>
                  <a href="..\overview.html" data-name="artik-overview-faq" aria-expanded="false">ARTIK Overview / FAQ</a>
                </li>
                <li data-family='[0]'>
                  <a href="..\artik-0\getting-started\index.htm" data-directory="true" data-name="artik-0-020-030" aria-expanded="true" override="true">ARTIK 0 (020/030)</a>
                  <ul class='subsections'>
                    <li data-family='[0]'>
                      <a href="..\artik-0\getting-started\index.htm" data-directory="true" data-name="getting-started" aria-expanded="false">Getting Started</a>
                      <ul class='subsections'>
                        <li data-family='[0, 5, 7, 10]'>
                          <a href="..\artik-0\getting-started\in-the-box.html" data-name="open-the-box-and-go" aria-expanded="false">Open the box and go!</a>
                        </li>
                        <li data-family='[0, 5, 7, 10]'>
                          <a href="..\artik-0\getting-started\connect.html" data-name="connect-to-the-world" aria-expanded="false">Connect to the World</a>
                        </li>
                      </ul>
                    </li>
                    <li data-family='[0]'>
                      <a href="..\artik-0\tutorials\index.htm" data-directory="true" data-name="tutorials" aria-expanded="false">Tutorials</a>
                      <ul class='subsections'>
                      </ul>
                    </li>
                  </ul>
                </li>
                <li data-family='[0]'>
                  <a href="..\artik-05x\getting-started\index.htm" data-directory="true" data-name="artik-0-053-055" aria-expanded="true" override="true">ARTIK 0 (053/055)</a>
                  <ul class='subsections'>
                    <li data-family='[0]'>
                      <a href="..\artik-05x\getting-started\index.htm" data-directory="true" data-name="getting-started" aria-expanded="false">Getting Started</a>
                      <ul class='subsections'>
                        <li data-family='[0, 5, 7, 10]'>
                          <a href="..\artik-05x\getting-started\in-the-box.html" data-name="in-the-box" aria-expanded="false">In the box</a>
                        </li>
                        <li data-family='[0, 5, 7, 10]'>
                          <a href="..\artik-05x\getting-started\prepare-ide.html" data-name="set-up-the-artik-ide" aria-expanded="false">Set up the ARTIK IDE</a>
                        </li>
                        <li data-family='[0, 5, 7, 10]'>
                          <a href="..\artik-05x\getting-started\communicate.html" data-name="connect-to-the-world" aria-expanded="false">Connect to the World</a>
                        </li>
                        <li data-family='[0, 5, 7, 10]'>
                          <a href="..\artik-05x\getting-started\board-ref.html" data-name="board-reference-br-header-map-gpio" aria-expanded="false">Board Reference /<br>Header Map / GPIO</a>
                        </li>
                        <li data-family='[0, 5, 7, 10]'>
                          <a href="..\artik-05x\getting-started\up-to-date.html" data-name="bring-sdk-up-to-date" aria-expanded="false">Bring SDK up-to-date</a>
                        </li>
                        <li data-family='[0, 5, 7, 10]'>
                          <a href="..\artik-05x\getting-started\s-modules.html" data-name="font-color-green-strong-s-modules-strong-font" aria-expanded="false"><font color="green"><strong>"s" modules</strong></font></a>
                        </li>
                      </ul>
                    </li>
                    <li data-family='[0]'>
                      <a href="..\artik-05x\tutorials\index.htm" data-directory="true" data-name="tutorials" aria-expanded="false">Tutorials</a>
                      <ul class='subsections'>
                        <li data-family='[0, 5, 7, 10]'>
                          <a href="..\artik-05x\tutorials\blink-an-led.html" data-name="blink-an-led" aria-expanded="false">Blink an LED</a>
                        </li>
                        <li data-family='[0, 5, 7, 10]'>
                          <a href="..\artik-05x\tutorials\sensor-tutorial.html" data-name="sensors-artik-ide" aria-expanded="false">Sensors -- ARTIK IDE</a>
                        </li>
                        <li data-family='[0, 5, 7, 10]'>
                          <a href="..\artik-05x\tutorials\mqtt-subscriber.html" data-name="mqtt-subscriber" aria-expanded="false">MQTT Subscriber</a>
                        </li>
                        <li data-family='[0, 5, 7, 10]'>
                          <a href="..\artik-05x\tutorials\mqtt-publisher.html" data-name="mqtt-publisher" aria-expanded="false">MQTT Publisher</a>
                        </li>
                        <li data-family='[0, 5, 7, 10]'>
                          <a href="..\artik-05x\tutorials\mqtt-to-cloud.html" data-name="mqtt-to-artik-cloud" aria-expanded="false">MQTT to ARTIK Cloud</a>
                        </li>
                        <li data-family='[0, 5, 7, 10]'>
                          <a href="..\artik-05x\tutorials\i2c.html" data-name="i2c-interface" aria-expanded="false">I2C Interface</a>
                        </li>
                      </ul>
                    </li>
                    <li data-family='[5, 7, 10]'>
                      <a href="..\artik-05x\cloud-services\index.htm" data-directory="true" data-name="iot-in-the-cloud" aria-expanded="false">IoT in the Cloud</a>
                      <ul class='subsections'>
                        <li data-family='[0, 5, 7, 10]'>
                          <a href="..\artik-05x\cloud-services\aws-iot-sdk.html" data-name="aws-iot-sdk" aria-expanded="false">AWS IoT SDK</a>
                        </li>
                        <li data-family='[0, 5, 7, 10]'>
                          <a href="..\artik-05x\cloud-services\smartthings.html" data-name="smartthings-iot" aria-expanded="false">SmartThings IoT</a>
                        </li>
                        <li data-family='[0, 5, 7, 10]'>
                          <a href="..\artik-05x\cloud-services\thingworx.html" data-name="thingworx" aria-expanded="false">ThingWorx</a>
                        </li>
                      </ul>
                    </li>
                    <li data-family='[0]'>
                      <a href="..\artik-05x\projects\index.htm" data-directory="true" data-name="technology-projects" aria-expanded="false">Technology Projects</a>
                      <ul class='subsections'>
                        <li data-family='[0, 5, 7, 10]'>
                          <a href="..\artik-05x\projects\modbus.html" data-name="shoreline-modbus" aria-expanded="false">Shoreline -- Modbus</a>
                        </li>
                        <li data-family='[0, 5, 7, 10]'>
                          <a href="..\artik-05x\projects\smart-light.html" data-name="smart-dimmable-light-artik-cloud" aria-expanded="false">Smart Dimmable Light -- ARTIK Cloud</a>
                        </li>
                      </ul>
                    </li>
                    <li data-family='[0]'>
                      <a href="..\artik-05x\advanced-concepts\index.htm" data-directory="true" data-name="advanced-developers" aria-expanded="false">Advanced Developers</a>
                      <ul class='subsections'>
                        <li data-family='[0, 5, 7, 10]'>
                          <a href="..\artik-05x\advanced-concepts\prepare-dev-env.html" data-name="set-up-environment" aria-expanded="false">Set Up Environment</a>
                        </li>
                        <li data-family='[0, 5, 7, 10]'>
                          <a href="..\artik-05x\advanced-concepts\communicate-053.html" data-name="compile-and-load" aria-expanded="false">Compile and Load</a>
                        </li>
                        <li data-family='[0, 5, 7, 10]'>
                          <a href="..\artik-05x\advanced-concepts\configure-053.html" data-name="customization-tools" aria-expanded="false">Customization Tools</a>
                        </li>
                        <li data-family='[0, 5, 7, 10]'>
                          <a href="..\artik-05x\advanced-concepts\sign.html" data-name="kms-code-signing" aria-expanded="false">KMS Code Signing</a>
                        </li>
                      </ul>
                    </li>
                  </ul>
                </li>
                <li data-family='[5, 7, 10]'>
                  <a href="..\artik\getting-started\index.htm" data-directory="true" data-name="artik-5-7-10" aria-expanded="true" override="true">ARTIK 5 / 7 / 10</a>
                  <ul class='subsections'>
                    <li data-family='[5, 7, 10]'>
                      <a href="..\artik\getting-started\index.htm" data-directory="true" data-name="getting-started" aria-expanded="false">Getting Started</a>
                      <ul class='subsections'>
                        <li data-family='[0, 5, 7, 10]'>
                          <a href="..\artik\getting-started\in-the-box.html" data-name="in-the-box-antennas-br-board-reference" aria-expanded="false">In the box / antennas /<br>board reference</a>
                        </li>
                        <li data-family='[0, 5, 7, 10]'>
                          <a href="..\artik\getting-started\powering-up.html" data-name="power-up-the-board" aria-expanded="false">Power up the board</a>
                        </li>
                        <li data-family='[0, 5, 7, 10]'>
                          <a href="..\artik\getting-started\prepare-ide.html" data-name="set-up-the-artik-ide" aria-expanded="false">Set up the ARTIK IDE</a>
                        </li>
                        <li data-family='[0, 5, 7, 10]'>
                          <a href="..\artik\getting-started\up-to-date.html" data-name="bring-artik-up-to-date" aria-expanded="false">Bring ARTIK up-to-date</a>
                        </li>
                        <li data-family='[0, 5, 7, 10]'>
                          <a href="..\artik\getting-started\connect.html" data-name="connect-to-the-world" aria-expanded="false">Connect to the World</a>
                        </li>
                        <li data-family='[0, 5, 7, 10]'>
                          <a href="..\artik\getting-started\s-modules.html" data-name="strong-s-strong-modules" aria-expanded="false"><strong>s</strong> modules</a>
                        </li>
                      </ul>
                    </li>
                    <li data-family='[5, 7, 10]'>
                      <a href="..\artik\tutorials\index.htm" data-directory="true" data-name="tutorials" aria-expanded="false">Tutorials</a>
                      <ul class='subsections'>
                        <li data-family='[0, 5, 7, 10]'>
                          <a href="..\artik\tutorials\say-hello.html" data-name="first-say-hello" aria-expanded="false">First: Say Hello!</a>
                        </li>
                        <li data-family='[0, 5, 7, 10]'>
                          <a href="..\artik\tutorials\blink-an-led.html" data-name="blink-an-led" aria-expanded="false">Blink an LED</a>
                        </li>
                        <li data-family='[0, 5, 7, 10]'>
                          <a href="..\artik\tutorials\read-a-button.html" data-name="read-a-button-press" aria-expanded="false">Read a button press</a>
                        </li>
                        <li data-family='[0, 5, 7, 10]'>
                          <a href="..\artik\tutorials\sensor-tutorial.html" data-name="sensors-artik-ide" aria-expanded="false">Sensors -- ARTIK IDE</a>
                        </li>
                        <li data-family='[0, 5, 7, 10]'>
                          <a href="..\artik\tutorials\node-red.html" data-name="intro-to-node-red" aria-expanded="false">Intro to Node-RED</a>
                        </li>
                      </ul>
                    </li>
                    <li data-family='[5, 7, 10]'>
                      <a href="..\artik\cloud-services\index.htm" data-directory="true" data-name="iot-in-the-cloud" aria-expanded="false">IoT in the Cloud</a>
                      <ul class='subsections'>
                        <li data-family='[5, 7, 10]'>
                          <a href="..\artik\cloud-services\aws\index.htm" data-directory="true" data-name="aws-iot" aria-expanded="false">AWS IoT</a>
                          <ul class='subsections'>
                            <li data-family='[0, 5, 7, 10]'>
                              <a href="..\artik\cloud-services\aws\greengrass.html" data-name="greengrass-azul" aria-expanded="false">Greengrass + Azul</a>
                            </li>
                            <li data-family='[0, 5, 7, 10]'>
                              <a href="..\artik\cloud-services\aws\aws-iot.html" data-name="iot-overview" aria-expanded="false">IoT -- Overview</a>
                            </li>
                            <li data-family='[0, 5, 7, 10]'>
                              <a href="..\artik\cloud-services\aws\aws-iot-jitr.html" data-name="iot-jit-register" aria-expanded="false">IoT -- JIT Register</a>
                            </li>
                            <li data-family='[0, 5, 7, 10]'>
                              <a href="..\artik\cloud-services\aws\lambda.html" data-name="lambda-jit-register" aria-expanded="false">Lambda - JIT Register</a>
                            </li>
                          </ul>
                        </li>
                        <li data-family='[5, 7, 10]'>
                          <a href="..\artik\cloud-services\azure\index.htm" data-directory="true" data-name="azure-iot" aria-expanded="false">Azure IoT</a>
                          <ul class='subsections'>
                            <li data-family='[0, 5, 7, 10]'>
                              <a href="..\artik\cloud-services\azure\azure-iot-enroll.html" data-name="hub-enroll-x-509" aria-expanded="false">Hub - Enroll X.509</a>
                            </li>
                            <li data-family='[0, 5, 7, 10]'>
                              <a href="..\artik\cloud-services\azure\azure-iot-register.html" data-name="hub-register" aria-expanded="false">Hub - Register</a>
                            </li>
                            <li data-family='[0, 5, 7, 10]'>
                              <a href="..\artik\cloud-services\azure\azure-iot-edge.html" data-name="edge-stream" aria-expanded="false">Edge - Stream</a>
                            </li>
                          </ul>
                        </li>
                        <li data-family='[5, 7, 10]'>
                          <a href="..\artik\cloud-services\google\index.htm" data-directory="true" data-name="google-iot" aria-expanded="false">Google IoT</a>
                          <ul class='subsections'>
                          </ul>
                        </li>
                        <li data-family='[0, 5, 7, 10]'>
                          <a href="..\artik\cloud-services\thingworx.html" data-name="thingworx" aria-expanded="false">ThingWorx</a>
                        </li>
                        <li data-family='[0, 5, 7, 10]'>
                          <a href="..\artik\cloud-services\opc-ua.html" data-name="opc-ua-interface" aria-expanded="false">OPC-UA Interface</a>
                        </li>
                        <li data-family='[0, 5, 7, 10]'>
                          <a href="..\artik\cloud-services\node-red-cloud.html" data-name="sense-tecnic-fred" aria-expanded="false">Sense Tecnic -- FRED</a>
                        </li>
                      </ul>
                    </li>
                    <li data-family='[5, 7, 10]'>
                      <a href="..\artik\ml\index.htm" data-directory="true" data-name="machine-learning" aria-expanded="false">Machine Learning</a>
                      <ul class='subsections'>
                        <li data-family='[0, 5, 7, 10]'>
                          <a href="..\artik\ml\tensorflowlite.html" data-name="machine-learning-tensorflow" aria-expanded="false">Machine Learning-TensorFlow</a>
                        </li>
                      </ul>
                    </li>
                    <li data-family='[5, 7, 10]'>
                      <a href="..\artik\db\index.htm" data-directory="true" data-name="database-services" aria-expanded="false">Database Services</a>
                      <ul class='subsections'>
                        <li data-family='[0, 5, 7, 10]'>
                          <a href="..\artik\db\influx.html" data-name="store-data-influxdb" aria-expanded="false">Store Data - InfluxDB</a>
                        </li>
                      </ul>
                    </li>
                    <li data-family='[5, 7, 10]'>
                      <a href="..\artik\remote-cloud\index.htm" data-directory="true" data-name="cloud-services" aria-expanded="false">Cloud Services</a>
                      <ul class='subsections'>
                        <li data-family='[0, 5, 7, 10]'>
                          <a href="..\artik\remote-cloud\rekognition.html" data-name="objects-rekognition" aria-expanded="false">Objects - Rekognition</a>
                        </li>
                        <li data-family='[0, 5, 7, 10]'>
                          <a href="..\artik\remote-cloud\s3.html" data-name="file-bucket-s3" aria-expanded="false">File Bucket - S3</a>
                        </li>
                        <li data-family='[0, 5, 7, 10]'>
                          <a href="..\artik\remote-cloud\goog-asst.html" data-name="voice-assistant-google" aria-expanded="false">Voice Assistant-Google</a>
                        </li>
                        <li data-family='[0, 5, 7, 10]'>
                          <a href="..\artik\remote-cloud\kairos.html" data-name="recognize-faces-kairos" aria-expanded="false">Recognize Faces-Kairos</a>
                        </li>
                      </ul>
                    </li>
                    <li data-family='[5, 7, 10]'>
                      <a href="..\artik\projects\index.htm" data-directory="true" data-name="technology-projects" aria-expanded="false">Technology Projects</a>
                      <ul class='subsections'>
                        <li data-family='[0, 5, 7, 10]'>
                          <a href="..\artik\projects\arduino-if.html" data-name="arduino-i-f-projects" aria-expanded="false">Arduino I-F Projects</a>
                        </li>
                        <li data-family='[0, 5, 7, 10]'>
                          <a href="..\artik\projects\gesture-tutorial.html" data-name="gesture-control" aria-expanded="false">Gesture Control</a>
                        </li>
                        <li data-family='[0, 5, 7, 10]'>
                          <a href="..\artik\projects\trashcan.html" data-name="smart-trash-can" aria-expanded="false">Smart Trash Can</a>
                        </li>
                        <li data-family='[0, 5, 7, 10]'>
                          <a href="..\artik\projects\facial-recog.html" data-name="face-identity-detection" aria-expanded="false">Face/Identity Detection</a>
                        </li>
                        <li data-family='[0, 5, 7, 10]'>
                          <a href="..\artik\projects\cellular.html" data-name="cellular-modem" aria-expanded="false">Cellular Modem</a>
                        </li>
                        <li data-family='[0, 5, 7, 10]'>
                          <a href="..\artik\projects\canbus.html" data-name="serial-can-bus" aria-expanded="false">Serial CAN Bus</a>
                        </li>
                      </ul>
                    </li>
                    <li data-family='[5, 7, 10]'>
                      <a href="..\artik\advanced-concepts\index.htm" data-directory="true" data-name="advanced-developers" aria-expanded="false">Advanced Developers</a>
                      <ul class='subsections'>
                        <li data-family='[0, 5, 7, 10]'>
                          <a href="..\artik\advanced-concepts\prepare-dev-env.html" data-name="set-up-environment" aria-expanded="false">Set Up Environment</a>
                        </li>
                        <li data-family='[0, 5, 7, 10]'>
                          <a href="..\artik\advanced-concepts\compile.html" data-name="compile-and-load" aria-expanded="false">Compile and Load</a>
                        </li>
                        <li data-family='[0, 5, 7, 10]'>
                          <a href="..\artik\advanced-concepts\sign.html" data-name="kms-code-signing" aria-expanded="false">KMS Code Signing</a>
                        </li>
                        <li data-family='[0, 5, 7, 10]'>
                          <a href="..\artik\advanced-concepts\configure.html" data-name="customization-tools" aria-expanded="false">Customization Tools</a>
                        </li>
                        <li data-family='[0, 5, 7, 10]'>
                          <a href="..\artik\advanced-concepts\verified-boot.html" data-name="verified-boot" aria-expanded="false">Verified Boot</a>
                        </li>
                      </ul>
                    </li>
                  </ul>
                </li>
                <li data-family='[0, 5, 7, 10]'>
                  <a href="..\developer-guide\index.htm" data-directory="true" data-name="developer-guide" aria-expanded="true">Developer Guide</a>
                  <ul class='subsections'>
                    <li data-family='[0, 5, 7, 10]'>
                      <a href="..\developer-guide\artik-ide\index.htm" data-directory="true" data-name="artik-ide-terminal" aria-expanded="false">ARTIK IDE / Terminal</a>
                      <ul class='subsections'>
                        <li data-family='[0, 5, 7, 10]'>
                          <a href="..\developer-guide\artik-ide\install-ide.html" data-name="installing-artik-ide" aria-expanded="false">Installing ARTIK IDE</a>
                        </li>
                        <li data-family='[0, 5, 7, 10]'>
                          <a href="..\developer-guide\artik-ide\serial-debug.html" data-name="terminal-console" aria-expanded="false">Terminal Console</a>
                        </li>
                        <li data-family='[0, 5, 7, 10]'>
                          <a href="..\developer-guide\artik-ide\linux-apps.html" data-name="building-linux-apps" aria-expanded="false">Building Linux Apps</a>
                        </li>
                        <li data-family='[0, 5, 7, 10]'>
                          <a href="..\developer-guide\artik-ide\tizen-apps.html" data-name="building-tizen-rt-apps" aria-expanded="false">Building Tizen RT Apps</a>
                        </li>
                        <li data-family='[0, 5, 7, 10]'>
                          <a href="..\developer-guide\artik-ide\create-sdk.html" data-name="creating-tizen-rt-sdk" aria-expanded="false">Creating Tizen RT SDK</a>
                        </li>
                        <li data-family='[0, 5, 7, 10]'>
                          <a href="..\developer-guide\artik-ide\update-sdk.html" data-name="updating-artik-sdk" aria-expanded="false">Updating ARTIK SDK</a>
                        </li>
                        <li data-family='[0, 5, 7, 10]'>
                          <a href="..\developer-guide\artik-ide\release_notes.html" data-name="release-notes" aria-expanded="false">Release Notes</a>
                        </li>
                      </ul>
                    </li>
                    <li data-family='[5, 7, 10]'>
                      <a href="..\developer-guide\ethernet-wifi\index.htm" data-directory="true" data-name="ethernet-and-wi-fi" aria-expanded="false">Ethernet and Wi-Fi</a>
                      <ul class='subsections'>
                        <li data-family='[0, 5, 7, 10]'>
                          <a href="..\developer-guide\ethernet-wifi\ethernet.html" data-name="ethernet" aria-expanded="false">Ethernet</a>
                        </li>
                        <li data-family='[0, 5, 7, 10]'>
                          <a href="..\developer-guide\ethernet-wifi\wifi.html" data-name="wi-fi-client" aria-expanded="false">Wi-Fi Client</a>
                        </li>
                        <li data-family='[0, 5, 7, 10]'>
                          <a href="..\developer-guide\ethernet-wifi\ap.html" data-name="wi-fi-access-point" aria-expanded="false">Wi-Fi Access Point</a>
                        </li>
                        <li data-family='[0, 5, 7, 10]'>
                          <a href="..\developer-guide\ethernet-wifi\p2p.html" data-name="wi-fi-direct-p2p" aria-expanded="false">Wi-Fi Direct/P2P</a>
                        </li>
                        <li data-family='[0, 5, 7, 10]'>
                          <a href="..\developer-guide\ethernet-wifi\proxies.html" data-name="proxies-and-certificates" aria-expanded="false">Proxies and Certificates</a>
                        </li>
                      </ul>
                    </li>
                    <li data-family='[5, 7, 10]'>
                      <a href="..\developer-guide\gpio\index.htm" data-directory="true" data-name="programmable-pins" aria-expanded="false">Programmable Pins</a>
                      <ul class='subsections'>
                        <li data-family='[0, 5, 7, 10]'>
                          <a href="..\developer-guide\gpio\gpio-mapping.html" data-name="gpio-header-maps" aria-expanded="false">GPIO Header Maps</a>
                        </li>
                        <li data-family='[0, 5, 7, 10]'>
                          <a href="..\developer-guide\gpio\kernel-gpio.html" data-name="pin-programming" aria-expanded="false">Pin Programming</a>
                        </li>
                      </ul>
                    </li>
                    <li data-family='[5, 7, 10]'>
                      <a href="..\developer-guide\multimedia\index.htm" data-directory="true" data-name="audio-display-camera" aria-expanded="false">Audio-Display-Camera</a>
                      <ul class='subsections'>
                        <li data-family='[0, 5, 7, 10]'>
                          <a href="..\developer-guide\multimedia\audio-guide.html" data-name="audio-record-play" aria-expanded="false">Audio Record/Play</a>
                        </li>
                        <li data-family='[0, 5, 7, 10]'>
                          <a href="..\developer-guide\multimedia\camera-input-guide-a10.html" data-name="mipi-camera" aria-expanded="false">MIPI Camera</a>
                        </li>
                        <li data-family='[0, 5, 7, 10]'>
                          <a href="..\developer-guide\multimedia\usb-camera.html" data-name="usb-camera" aria-expanded="false">USB Camera</a>
                        </li>
                        <li data-family='[0, 5, 7, 10]'>
                          <a href="..\developer-guide\multimedia\display.html" data-name="mipi-lvds-hdmi-display" aria-expanded="false">MIPI/LVDS/HDMI Display</a>
                        </li>
                      </ul>
                    </li>
                    <li data-family='[0, 5, 7, 10]'>
                      <a href="..\developer-guide\wireless-iot\index.htm" data-directory="true" data-name="wireless-iot-networks" aria-expanded="false">Wireless IoT Networks</a>
                      <ul class='subsections'>
                        <li data-family='[0, 5, 7, 10]'>
                          <a href="..\developer-guide\wireless-iot\bluetooth\index.htm" data-directory="true" data-name="bluetooth" aria-expanded="false">Bluetooth</a>
                          <ul class='subsections'>
                            <li data-family='[0, 5, 7, 10]'>
                              <a href="..\developer-guide\wireless-iot\bluetooth\bluetooth-central.html" data-name="artik-5-7-linux" aria-expanded="false">ARTIK 5/7 -- Linux</a>
                            </li>
                            <li data-family='[0, 5, 7, 10]'>
                              <a href="..\developer-guide\wireless-iot\bluetooth\bluetooth-020.html" data-name="artik-020-gcc-iar" aria-expanded="false">ARTIK 020 -- gcc/IAR</a>
                            </li>
                          </ul>
                        </li>
                        <li data-family='[0, 5, 7, 10]'>
                          <a href="..\developer-guide\wireless-iot\zigbee\index.htm" data-directory="true" data-name="zigbee" aria-expanded="false">ZigBee</a>
                          <ul class='subsections'>
                            <li data-family='[0, 5, 7, 10]'>
                              <a href="..\developer-guide\wireless-iot\zigbee\zigbee-cli.html" data-name="zigbee-cli" aria-expanded="false">ZigBee CLI</a>
                            </li>
                            <li data-family='[0, 5, 7, 10]'>
                              <a href="..\developer-guide\wireless-iot\zigbee\zigbee-prog.html" data-name="artik-5-7-sdk-api" aria-expanded="false">ARTIK 5/7 SDK API</a>
                            </li>
                            <li data-family='[0, 5, 7, 10]'>
                              <a href="..\developer-guide\wireless-iot\zigbee\libzigbee.html" data-name="artik-5-7-libzigbee" aria-expanded="false">ARTIK 5/7 libzigbee</a>
                            </li>
                            <li data-family='[0, 5, 7, 10]'>
                              <a href="..\developer-guide\wireless-iot\zigbee\zigbee-030.html" data-name="artik-030-gcc-iar" aria-expanded="false">ARTIK 030 -- gcc/IAR</a>
                            </li>
                          </ul>
                        </li>
                        <li data-family='[0, 5, 7, 10]'>
                          <a href="..\developer-guide\wireless-iot\zwave.html" data-name="z-wave" aria-expanded="false">Z-Wave</a>
                        </li>
                        <li data-family='[0, 5, 7, 10]'>
                          <a href="..\developer-guide\wireless-iot\sigfox.html" data-name="sigfox" aria-expanded="false">SIGFOX</a>
                        </li>
                        <li data-family='[0, 5, 7, 10]'>
                          <a href="..\developer-guide\wireless-iot\hass.html" data-name="home-assistant" aria-expanded="false">Home Assistant</a>
                        </li>
                      </ul>
                    </li>
                    <li data-family='[5, 7, 10]'>
                      <a href="..\developer-guide\storage\index.htm" data-directory="true" data-name="usb-and-microsd" aria-expanded="false">USB and microSD</a>
                      <ul class='subsections'>
                        <li data-family='[0, 5, 7, 10]'>
                          <a href="..\developer-guide\storage\microSD-usb.html" data-name="microsd-and-usb-storage" aria-expanded="false">microSD and USB Storage</a>
                        </li>
                        <li data-family='[0, 5, 7, 10]'>
                          <a href="..\developer-guide\storage\usb-device.html" data-name="usb-device" aria-expanded="false">USB -- Device</a>
                        </li>
                        <li data-family='[0, 5, 7, 10]'>
                          <a href="..\developer-guide\storage\usb-host.html" data-name="usb-host" aria-expanded="false">USB -- Host</a>
                        </li>
                      </ul>
                    </li>
                    <li data-family='[0, 5, 7, 10]'>
                      <a href="..\developer-guide\ide\index.htm" data-directory="true" data-name="software-tools" aria-expanded="false">Software Tools</a>
                      <ul class='subsections'>
                        <li data-family='[0, 5, 7, 10]'>
                          <a href="..\developer-guide\ide\arduino.html" data-name="arduino-ide" aria-expanded="false">Arduino IDE</a>
                        </li>
                        <li data-family='[5, 7, 10]'>
                          <a href="..\developer-guide\ide\eclipse\index.htm" data-directory="true" data-name="eclipse-ide" aria-expanded="false">Eclipse IDE</a>
                          <ul class='subsections'>
                            <li data-family='[0, 5, 7, 10]'>
                              <a href="..\developer-guide\ide\eclipse\eclipse-cdt.html" data-name="linux" aria-expanded="false">>> Linux</a>
                            </li>
                            <li data-family='[0, 5, 7, 10]'>
                              <a href="..\developer-guide\ide\eclipse\eclipse-win.html" data-name="windows" aria-expanded="false">>> Windows</a>
                            </li>
                            <li data-family='[0, 5, 7, 10]'>
                              <a href="..\developer-guide\ide\eclipse\sysroot.html" data-name="artik-sdk" aria-expanded="false">>> ARTIK SDK</a>
                            </li>
                          </ul>
                        </li>
                        <li data-family='[0, 5, 7, 10]'>
                          <a href="..\developer-guide\ide\iar.html" data-name="iar-embedded-workbench-arm-ide" aria-expanded="false">IAR Embedded Workbench ARM IDE</a>
                        </li>
                        <li data-family='[0, 5, 7, 10]'>
                          <a href="..\developer-guide\ide\resin-io.html" data-name="resin-io" aria-expanded="false">resin-io</a>
                        </li>
                        <li data-family='[0, 5, 7, 10]'>
                          <a href="..\developer-guide\ide\simplicity.html" data-name="simplicity-studio" aria-expanded="false">Simplicity Studio</a>
                        </li>
                        <li data-family='[0, 5, 7, 10]'>
                          <a href="..\developer-guide\ide\virtualbox.html" data-name="virtualbox" aria-expanded="false">VirtualBox</a>
                        </li>
                      </ul>
                    </li>
                    <li data-family='[5, 7, 10]'>
                      <a href="..\developer-guide\libraries\index.htm" data-directory="true" data-name="libraries" aria-expanded="false">Libraries</a>
                      <ul class='subsections'>
                        <li data-family='[0, 5, 7, 10]'>
                          <a href="..\developer-guide\libraries\arduino-lib.html" data-name="arduino-libraries-overview" aria-expanded="false">Arduino Libraries - Overview</a>
                        </li>
                        <li data-family='[0, 5, 7, 10]'>
                          <a href="..\developer-guide\libraries\temboo.html" data-name="temboo-arduino-library" aria-expanded="false">Temboo Arduino Library</a>
                        </li>
                      </ul>
                    </li>
                    <li data-family='[5, 7, 10]'>
                      <a href="..\developer-guide\update-image\index.htm" data-directory="true" data-name="updating-artik-image" aria-expanded="false">Updating ARTIK Image</a>
                      <ul class='subsections'>
                        <li data-family='[0, 5, 7, 10]'>
                          <a href="..\developer-guide\update-image\updating-artik-image.html" data-name="update-full-image-br-microsd" aria-expanded="false">Update Full Image <br>(microSD)</a>
                        </li>
                        <li data-family='[0, 5, 7, 10]'>
                          <a href="..\developer-guide\update-image\usb-update.html" data-name="update-image-over-usb" aria-expanded="false">Update Image over USB</a>
                        </li>
                        <li data-family='[0, 5, 7, 10]'>
                          <a href="..\developer-guide\update-image\usb-recovery.html" data-name="recovery-over-usb" aria-expanded="false">Recovery over USB</a>
                        </li>
                        <li data-family='[0, 5, 7, 10]'>
                          <a href="..\developer-guide\update-image\u-boot.html" data-name="environment-variables-update" aria-expanded="false">Environment Variables Update</a>
                        </li>
                        <li data-family='[0, 5, 7, 10]'>
                          <a href="..\developer-guide\update-image\ncp-update.html" data-name="zigbee-thread-radio-ncp-update" aria-expanded="false">ZigBee/Thread Radio (NCP) Update</a>
                        </li>
                      </ul>
                    </li>
                  </ul>
                </li>
                <li data-family='[5, 7, 10]'>
                  <a href="..\advanced-concepts\index.htm" data-directory="true" data-name="advanced-concepts" aria-expanded="true">Advanced Concepts</a>
                  <ul class='subsections'>
                    <li data-family='[0, 5, 7, 10]'>
                      <a href="..\advanced-concepts\mqtt\index.htm" data-directory="true" data-name="mqtt-web-coding" aria-expanded="false">MQTT/Web Coding</a>
                      <ul class='subsections'>
                        <li data-family='[0, 5, 7, 10]'>
                          <a href="..\advanced-concepts\mqtt\color-mqtt.html" data-name="mqtt-message-broker" aria-expanded="false">MQTT Message Broker</a>
                        </li>
                        <li data-family='[0, 5, 7, 10]'>
                          <a href="..\advanced-concepts\mqtt\color-mqtt-adv.html" data-name="mqtt-pub-sub-topics" aria-expanded="false">MQTT Pub/Sub Topics</a>
                        </li>
                        <li data-family='[0, 5, 7, 10]'>
                          <a href="..\advanced-concepts\mqtt\color-mqtt-web.html" data-name="web-window-to-mqtt" aria-expanded="false">Web Window to MQTT</a>
                        </li>
                        <li data-family='[0, 5, 7, 10]'>
                          <a href="..\advanced-concepts\mqtt\color-mqtt-client.html" data-name="publish-to-artik-cloud" aria-expanded="false">Publish to ARTIK Cloud</a>
                        </li>
                        <li data-family='[0, 5, 7, 10]'>
                          <a href="..\advanced-concepts\mqtt\color-mqtt-arduino.html" data-name="artik-cloud-via-arduino" aria-expanded="false">ARTIK Cloud via Arduino</a>
                        </li>
                        <li data-family='[0, 5, 7, 10]'>
                          <a href="..\advanced-concepts\mqtt\color-mqtt-actions.html" data-name="actions-and-artik-cloud" aria-expanded="false">Actions and ARTIK Cloud</a>
                        </li>
                      </ul>
                    </li>
                    <li data-family='[5, 7, 10]'>
                      <a href="..\advanced-concepts\secure\index.htm" data-directory="true" data-name="ssl-tls-security" aria-expanded="false">SSL/TLS Security</a>
                      <ul class='subsections'>
                        <li data-family='[0, 5, 7, 10]'>
                          <a href="..\advanced-concepts\secure\secure-intro.html" data-name="ssl-tls-secured-links" aria-expanded="false">SSL/TLS-Secured Links</a>
                        </li>
                        <li data-family='[0, 5, 7, 10]'>
                          <a href="..\advanced-concepts\secure\secure-programs.html" data-name="start-up-program-load" aria-expanded="false">Start-up Program Load</a>
                        </li>
                        <li data-family='[0, 5, 7, 10]'>
                          <a href="..\advanced-concepts\secure\wifi-reconnect.html" data-name="robust-wi-fi" aria-expanded="false">Robust Wi-Fi</a>
                        </li>
                      </ul>
                    </li>
                    <li data-family='[5, 7, 10]'>
                      <a href="..\advanced-concepts\secure-os\index.htm" data-directory="true" data-name="s-module-security" aria-expanded="false">s Module Security</a>
                      <ul class='subsections'>
                        <li data-family='[0, 5, 7, 10]'>
                          <a href="..\advanced-concepts\secure-os\secure-os.html" data-name="secure-os-and-tls" aria-expanded="false">Secure OS and TLS</a>
                        </li>
                        <li data-family='[0, 5, 7, 10]'>
                          <a href="..\advanced-concepts\secure-os\secure-storage.html" data-name="secure-storage" aria-expanded="false">Secure Storage</a>
                        </li>
                        <li data-family='[0, 5, 7, 10]'>
                          <a href="..\advanced-concepts\secure-os\secure-api-sdk.html" data-name="security-api-thru-sdk" aria-expanded="false">Security API thru SDK</a>
                        </li>
                        <li data-family='[0, 5, 7, 10]'>
                          <a href="..\advanced-concepts\secure-os\secure-api.html" data-name="security-api-thru-see" aria-expanded="false">Security API thru SEE</a>
                        </li>
                        <li data-family='[0, 5, 7, 10]'>
                          <a href="..\advanced-concepts\secure-os\openssl.html" data-name="openssl-support" aria-expanded="false">OpenSSL Support</a>
                        </li>
                        <li data-family='[0, 5, 7, 10]'>
                          <a href="..\advanced-concepts\secure-os\secure-boot.html" data-name="secure-boot" aria-expanded="false">Secure Boot</a>
                        </li>
                        <li data-family='[0, 5, 7, 10]'>
                          <a href="..\advanced-concepts\secure-os\jtag-lock.html" data-name="jtag-port-lock" aria-expanded="false">JTAG Port Lock</a>
                        </li>
                        <li data-family='[0, 5, 7, 10]'>
                          <a href="..\advanced-concepts\secure-os\kms.html" data-name="production-kms" aria-expanded="false">Production KMS</a>
                        </li>
                        <li data-family='[5, 7, 10]'><a href="..\security-api\index.htm" data-directory="true" data-name="security-api" aria-expanded="false">ARTIK Security (SEE) API</a></li>
                      </ul>
                    </li>
                    <li data-family='[0, 5, 7, 10]'>
                      <a href="..\advanced-concepts\onboarding\index.htm" data-directory="true" data-name="onboarding-qr-codes" aria-expanded="false">Onboarding/QR Codes</a>
                      <ul class='subsections'>
                        <li data-family='[0, 5, 7, 10]'>
                          <a href="..\advanced-concepts\onboarding\onboarding.html" data-name="on-boarding" aria-expanded="false">On-boarding</a>
                        </li>
                        <li data-family='[0, 5, 7, 10]'>
                          <a href="..\advanced-concepts\onboarding\qr-codes.html" data-name="printing-qr-codes" aria-expanded="false">Printing QR Codes</a>
                        </li>
                      </ul>
                    </li>
                    <li data-family='[0, 5, 7, 10]'>
                      <a href="..\advanced-concepts\secure-ota\index.htm" data-directory="true" data-name="ota-firmware-update" aria-expanded="false">OTA Firmware Update</a>
                      <ul class='subsections'>
                        <li data-family='[0, 5, 7, 10]'>
                          <a href="..\advanced-concepts\secure-ota\gateway-ota\index.htm" data-directory="true" data-name="gateway-a530-710" aria-expanded="false">Gateway-A530/710</a>
                          <ul class='subsections'>
                            <li data-family='[0, 5, 7, 10]'>
                              <a href="..\advanced-concepts\secure-ota\gateway-ota\general-ota.html" data-name="update-procedure" aria-expanded="false">Update Procedure</a>
                            </li>
                          </ul>
                        </li>
                        <li data-family='[0]'>
                          <a href="..\advanced-concepts\secure-ota\wifi-ota\index.htm" data-directory="true" data-name="wi-fi-node-a05x" aria-expanded="false">Wi-Fi Node - A05X</a>
                          <ul class='subsections'>
                            <li data-family='[0]'>
                              <a href="..\advanced-concepts\secure-ota\wifi-ota\edge-node-update.html" data-name="update-procedure" aria-expanded="false">Update Procedure</a>
                            </li>
                          </ul>
                        </li>
                        <li data-family='[0]'>
                          <a href="..\advanced-concepts\secure-ota\thread-ota\index.htm" data-directory="true" data-name="thread-node-a030" aria-expanded="false">Thread Node - A030</a>
                          <ul class='subsections'>
                            <li data-family='[0]'>
                              <a href="..\advanced-concepts\secure-ota\thread-ota\ota-guide.html" data-name="update-procedure" aria-expanded="false">Update Procedure</a>
                            </li>
                            <li data-family='[0, 5, 7, 10]'>
                              <a href="..\advanced-concepts\secure-ota\thread-ota\enm-intro.html" data-name="edge-node-manager" aria-expanded="false">Edge Node Manager</a>
                            </li>
                            <li class='enm-nav' data-family='[0, 5, 7, 10]'><a href="..\advanced-concepts\coap\enm-rest-api\index.htm" data-directory="false" aria-expanded="false">ENM REST API</a></li>
                          </ul>
                        </li>
                        <li data-family='[0, 5, 7, 10]'>
                          <a href="..\advanced-concepts\secure-ota\signing.html" data-name="package-signing" aria-expanded="false">Package Signing</a>
                        </li>
                      </ul>
                    </li>
                  </ul>
                </li>
                <li data-family='[0, 5, 7, 10]'>
                  <a href="..\changelog.html" data-name="changelog" aria-expanded="false">Changelog</a>
                </li>
              </ul>
            </li>
          </ul>
        </nav>
        <div id='st-results-container'>
          <div class='container'>
            <div class='row'>
              <div class='col-xs-12 col-sm-12'>
                <div id='st-filters'>
                  <h3>Filter results by</h3>
                  <div>
                    <label>
                      <input type='checkbox' value='modules'>
                      ARTIK Modules
                    </label>
                  </div>
                  <div>
                    <label>
                      <input type='checkbox' value='cloud'>
                      ARTIK Cloud
                    </label>
                  </div>
                  <div>
                    <label>
                      <input type='checkbox' value='developer'>
                      Developer
                    </label>
                  </div>
                  <div>
                    <label>
                      <input type='checkbox' value='forums'>
                      Forums
                    </label>
                  </div>
                  <div>
                    <label>
                      <input type='checkbox' value='marketplace'>
                      IoT Marketplace
                    </label>
                  </div>
                </div>
              </div>
            </div>
            <div class='row'>
              <div class='col-xs-12 col-sm-12'>
                <div id='swiftype-results'></div>
              </div>
            </div>
          </div>
        </div>
        <div class='main content' data-view='Content'>
          <div class='table-of-contents'>
            <h2 class='table-of-contents-title'>Older Versions</h2>
            <p style='padding: 0 28px;'>Older API versions are available as a download. To view, extract the file and open the index.html file in a web browser.</p>
          </div>
          <div id='family-selectors'>
            <button data-family='0'>ARTIK 0</button>
            <button data-family='5'>ARTIK 5/7/10</button>
            <!-- %button{data: { family: 7 }} ARTIK 7 -->
            <!-- %button{data: { family: 10 }} ARTIK 10 -->
          </div>
          <div id='sdk-version-selector'>
            <label>API Version</label>
            <select>
              <option value='/documentation/api/zigbee_test_2artik_zigbee_test_8c-example.html'>1.8</option>
              <option value='https://developer.artik.io/downloads/sdk-doc-1-7/download'>1.7</option>
              <option value='https://developer.artik.io/downloads/sdk-doc-1-6/download'>1.6</option>
              <option value='https://developer.artik.io/downloads/sdk-doc-1-5/download'>1.5</option>
              <option value='https://developer.artik.io/downloads/sdk-doc-1-4/download'>1.4</option>
              <option value='https://developer.artik.io/downloads/sdk-doc-1-3/download'>1.3</option>
              <option value='https://developer.artik.io/downloads/sdk-doc-1-2/download'>1.2</option>
              <option value='https://developer.artik.io/downloads/sdk-doc-1-1/download'>1.1</option>
              <option value='https://developer.artik.io/downloads/sdk-doc-1-0/download'>1.0</option>
            </select>
          </div>
          <div class='main-content-interior' data-swiftype-name='body' data-swiftype-type='text'>
            
            
            <div id="side-nav" class="ui-resizable side-nav-resizable">
              <div id="nav-tree">
                <div id="nav-tree-contents">
                  <div id="nav-sync" class="sync"></div>
                </div>
              </div>
              <div id="splitbar" style="-moz-user-select:none;" class="ui-resizable-handle">
              </div>
            </div>
            <script type="text/javascript">
            $(document).ready(function(){initNavTree('zigbee_test_2artik_zigbee_test_8c-example.html','');});
            </script>
            <div id="doc-content">
            <!-- window showing the filter options -->
            <div id="MSearchSelectWindow" onmouseover="return searchBox.OnSearchSelectShow()" onmouseout="return searchBox.OnSearchSelectHide()" onkeydown="return searchBox.OnSearchSelectKey(event)">
            </div>
            
            <!-- iframe showing the search results (closed by default) -->
            <div id="MSearchResultsWindow">
            <iframe src="javascript:void(0)" frameborder="0" name="MSearchResults" id="MSearchResults">
            </iframe>
            </div>
            
            <div class="header">
              <div class="headertitle">
            <div class="title">zigbee_test/artik_zigbee_test.c</div>  </div>
            </div><!--header-->
            <div class="contents">
            <div class="fragment"><div class="line"><span class="comment">/*</span></div><div class="line"><span class="comment"> *</span></div><div class="line"><span class="comment"> * Copyright 2017 Samsung Electronics All Rights Reserved.</span></div><div class="line"><span class="comment"> *</span></div><div class="line"><span class="comment"> * Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);</span></div><div class="line"><span class="comment"> * you may not use this file except in compliance with the License.</span></div><div class="line"><span class="comment"> * You may obtain a copy of the License at</span></div><div class="line"><span class="comment"> *</span></div><div class="line"><span class="comment"> *      http://www.apache.org/licenses/LICENSE-2.0</span></div><div class="line"><span class="comment"> *</span></div><div class="line"><span class="comment"> * Unless required by applicable law or agreed to in writing,</span></div><div class="line"><span class="comment"> * software distributed under the License is distributed on an</span></div><div class="line"><span class="comment"> * &quot;AS IS&quot; BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND,</span></div><div class="line"><span class="comment"> * either express or implied. See the License for the specific</span></div><div class="line"><span class="comment"> * language governing permissions and limitations under the License.</span></div><div class="line"><span class="comment"> *</span></div><div class="line"><span class="comment"> */</span></div><div class="line"></div><div class="line"><span class="preprocessor">#include &lt;stdio.h&gt;</span></div><div class="line"><span class="preprocessor">#include &lt;stdlib.h&gt;</span></div><div class="line"><span class="preprocessor">#include &lt;unistd.h&gt;</span></div><div class="line"><span class="preprocessor">#include &lt;sys/time.h&gt;</span></div><div class="line"><span class="preprocessor">#include &lt;string.h&gt;</span></div><div class="line"><span class="preprocessor">#include &lt;assert.h&gt;</span></div><div class="line"><span class="preprocessor">#include &lt;<a class="code" href="artik__loop_8h.html">artik_loop.h</a>&gt;</span></div><div class="line"><span class="preprocessor">#include &lt;<a class="code" href="artik__zigbee_8h.html">artik_zigbee.h</a>&gt;</span></div><div class="line"><span class="preprocessor">#include &lt;<a class="code" href="artik__module_8h.html">artik_module.h</a>&gt;</span></div><div class="line"><span class="preprocessor">#include &lt;<a class="code" href="artik__platform_8h.html">artik_platform.h</a>&gt;</span></div><div class="line"><span class="preprocessor">#include &lt;<a class="code" href="artik__log_8h.html">artik_log.h</a>&gt;</span></div><div class="line"><span class="preprocessor">#include &quot;artik_zigbee_test_common.h&quot;</span></div><div class="line"></div><div class="line"><span class="preprocessor">#define EASY_PJOIN_DURATION     0x3C</span></div><div class="line"><span class="preprocessor">#define EASY_IDENTIFY_DURATION      10 </span><span class="comment">/* seconds */</span><span class="preprocessor"></span></div><div class="line"><span class="preprocessor">#define ILLUMINANCE_MIN         100</span></div><div class="line"><span class="preprocessor">#define ILLUMINANCE_MAX         10000</span></div><div class="line"><span class="preprocessor">#define ILLUMINANCE_STEP        50</span></div><div class="line"><span class="preprocessor">#define TEMPERATURE_MIN         (-273.15f) </span><span class="comment">/* celsius */</span><span class="preprocessor"></span></div><div class="line"><span class="preprocessor">#define TEMPERATURE_MAX         (327.67f)</span></div><div class="line"><span class="preprocessor">#define TEMPERATURE_STEP        (10.0f)</span></div><div class="line"><span class="preprocessor">#define REPORTING_MAX_COUNT     3</span></div><div class="line"><span class="preprocessor">#define CS_TARGET_TIMEOUT_SEC       60 </span><span class="comment">/* steering will cost much time */</span><span class="preprocessor"></span></div><div class="line"><span class="preprocessor">#define CS_INITIATOR_RETRY_COUNT    5</span></div><div class="line"><span class="preprocessor">#define NWK_FIND_MAX_SIZE       8</span></div><div class="line"></div><div class="line"><span class="keyword">static</span> <span class="keyword">struct </span>device_type device_types[] = {</div><div class="line">    { ARTIK_ZIGBEE_PROFILE_HA, ARTIK_ZIGBEE_DEVICE_ON_OFF_SWITCH,</div><div class="line">      1, <span class="stringliteral">&quot;On/Off Switch&quot;</span>, <span class="stringliteral">&quot;ON_OFF_SWITCH&quot;</span> },</div><div class="line">    { ARTIK_ZIGBEE_PROFILE_HA, ARTIK_ZIGBEE_DEVICE_LEVEL_CONTROL_SWITCH,</div><div class="line">      2, <span class="stringliteral">&quot;Level Control Switch&quot;</span>, <span class="stringliteral">&quot;LEVEL_CONTROL_SWITCH&quot;</span> },</div><div class="line">    { ARTIK_ZIGBEE_PROFILE_HA, ARTIK_ZIGBEE_DEVICE_ON_OFF_LIGHT,</div><div class="line">      19, <span class="stringliteral">&quot;On/Off Light&quot;</span>, <span class="stringliteral">&quot;ON_OFF_LIGHT&quot;</span> },</div><div class="line">    { ARTIK_ZIGBEE_PROFILE_HA, ARTIK_ZIGBEE_DEVICE_DIMMABLE_LIGHT,</div><div class="line">      20, <span class="stringliteral">&quot;Dimmable Light&quot;</span>, <span class="stringliteral">&quot;DIMMABLE_LIGHT&quot;</span> },</div><div class="line">    { ARTIK_ZIGBEE_PROFILE_HA, ARTIK_ZIGBEE_DEVICE_LIGHT_SENSOR,</div><div class="line">      25, <span class="stringliteral">&quot;Light Sensor&quot;</span>, <span class="stringliteral">&quot;LIGHT_SENSOR&quot;</span> },</div><div class="line">    { ARTIK_ZIGBEE_PROFILE_HA, ARTIK_ZIGBEE_DEVICE_REMOTE_CONTROL,</div><div class="line">      34, <span class="stringliteral">&quot;Remote Control&quot;</span>, <span class="stringliteral">&quot;REMOTE_CONTROL&quot;</span> },</div><div class="line">    { -1, -1, -1, NULL, NULL}</div><div class="line">};</div><div class="line"></div><div class="line"><span class="keyword">static</span> func current_func;</div><div class="line"><span class="keyword">static</span> <span class="keywordtype">bool</span> network_started;</div><div class="line"><span class="keyword">static</span> <span class="keywordtype">int</span> illuminance_value = ILLUMINANCE_MIN;</div><div class="line"><span class="keyword">static</span> <span class="keywordtype">int</span> illuminance_min = ILLUMINANCE_MIN;</div><div class="line"><span class="keyword">static</span> <span class="keywordtype">int</span> illuminance_max = ILLUMINANCE_MAX;</div><div class="line"></div><div class="line"><span class="keyword">static</span> <span class="keywordtype">int</span> reporting_measured_illum_count = 0;</div><div class="line"><span class="keyword">static</span> <span class="keywordtype">bool</span> cs_initiator_testing;   <span class="comment">/* initial value is false */</span></div><div class="line"><span class="keyword">static</span> <span class="keywordtype">int</span> cs_initiator_testing_index = -1;</div><div class="line"><span class="keyword">static</span> <span class="keywordtype">int</span> cs_initiator_retry;</div><div class="line"><span class="keyword">static</span> <span class="keywordtype">bool</span> cs_target_testing;  <span class="comment">/* initial value is false */</span></div><div class="line"><span class="keyword">static</span> <span class="keywordtype">int</span> cs_target_testing_index = -1;</div><div class="line"><span class="keyword">static</span> <span class="keywordtype">int</span> cs_target_timeout_id = -1;</div><div class="line"><a name="_a0"></a><a class="code" href="structartik__zigbee__ieee__addr__response.html">artik_zigbee_ieee_addr_response</a> addr_rsp;</div><div class="line"><a name="_a1"></a><a class="code" href="structartik__zigbee__simple__descriptor__response.html">artik_zigbee_simple_descriptor_response</a> simple_descriptor;</div><div class="line"><a name="_a2"></a><a class="code" href="structartik__zigbee__network__find__result.html">artik_zigbee_network_find_result</a> nwk_found_list[NWK_FIND_MAX_SIZE];</div><div class="line"><span class="keyword">static</span> <span class="keywordtype">int</span> nwk_find_size = 0;</div><div class="line"><span class="keyword">static</span> <span class="keywordtype">bool</span> initiator_reminder = <span class="keyword">true</span>;</div><div class="line"><span class="keyword">static</span> <span class="keywordtype">bool</span> conducted_by_commissioning = <span class="keyword">false</span>;</div><div class="line"></div><div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span> _func_network(<span class="keywordtype">char</span> *input, <span class="keywordtype">int</span> max_size);</div><div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span> _func_network_find_join(<span class="keywordtype">char</span> *input, <span class="keywordtype">int</span> max_size);</div><div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span> _on_timer_callback(<span class="keyword">enum</span> timer_command cmd, <span class="keywordtype">int</span> <span class="keywordtype">id</span>, <span class="keywordtype">void</span> *user_data);</div><div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span> _on_callback(<span class="keywordtype">void</span> *user_data,</div><div class="line">            <a class="code" href="artik__zigbee_8h.html#a7b3f5c2c5bf75a5dd0c592450b95dcd0">artik_zigbee_response_type</a> response_type,</div><div class="line">            <span class="keywordtype">void</span> *payload);</div><div class="line"></div><div class="line"><span class="keyword">static</span> <span class="keywordtype">int</span> _get_device_type_count(<span class="keywordtype">void</span>)</div><div class="line">{</div><div class="line">    <span class="keywordtype">int</span> count = 0;</div><div class="line"></div><div class="line">    <span class="keywordflow">for</span> (count = 0;; count++) {</div><div class="line">        <span class="keywordflow">if</span> (device_types[count].name == NULL)</div><div class="line">            <span class="keywordflow">break</span>;</div><div class="line">    }</div><div class="line"></div><div class="line">    <span class="keywordflow">return</span> count;</div><div class="line">}</div><div class="line"></div><div class="line"><span class="keyword">static</span> <span class="keyword">struct </span>device_type *_get_device_type(<span class="keywordtype">int</span> index)</div><div class="line">{</div><div class="line">    <span class="keywordflow">if</span> (index &gt;= _get_device_type_count())</div><div class="line">        <span class="keywordflow">return</span> NULL;</div><div class="line"></div><div class="line">    <span class="keywordflow">return</span> &amp;device_types[index];</div><div class="line">}</div><div class="line"></div><div class="line"><span class="keywordtype">char</span> *get_device_name(<span class="keywordtype">int</span> device_id)</div><div class="line">{</div><div class="line">    <span class="keywordtype">int</span> i = 0;</div><div class="line"></div><div class="line">    <span class="keywordflow">while</span> (device_types[i].name != NULL) {</div><div class="line">        <span class="keywordflow">if</span> (device_types[i].device_id == device_id)</div><div class="line">            <span class="keywordflow">return</span> device_types[i].name;</div><div class="line">        i++;</div><div class="line">    }</div><div class="line"></div><div class="line">    <span class="keywordflow">return</span> NULL;</div><div class="line">}</div><div class="line"></div><div class="line"><span class="keyword">static</span> <span class="keywordtype">int</span> _add_timer(<span class="keyword">enum</span> timer_command cmd, <span class="keywordtype">int</span> second)</div><div class="line">{</div><div class="line">    <span class="keywordflow">return</span> add_timer(_on_timer_callback, cmd, second, NULL);</div><div class="line">}</div><div class="line"></div><div class="line"><span class="keyword">static</span> <a class="code" href="artik__error_8h.html#a9b1d9ae639ccc7c1b865a73d74b06c74">artik_error</a> _identify_test(<a name="_a3"></a><a class="code" href="structartik__zigbee__module.html">artik_zigbee_module</a> *zb)</div><div class="line">{</div><div class="line">    <a name="_a4"></a><a class="code" href="structartik__zigbee__endpoint.html">artik_zigbee_endpoint</a> *endpoint;</div><div class="line">    <a name="_a5"></a><a class="code" href="structartik__zigbee__endpoint__list.html">artik_zigbee_endpoint_list</a> endpoint_list;</div><div class="line">    <span class="keyword">struct </span>test_device *test_device;</div><div class="line">    <span class="keywordtype">int</span> i, j, count;</div><div class="line">    <span class="keywordtype">int</span> remained_time, duration;</div><div class="line">    <a class="code" href="artik__error_8h.html#a9b1d9ae639ccc7c1b865a73d74b06c74">artik_error</a> ret = <a name="a6"></a><a class="code" href="artik__error_8h.html#a14bc2dfa42241600d567369cd25ddc70">S_OK</a>;</div><div class="line">    <span class="keywordtype">bool</span> is_supported;</div><div class="line"></div><div class="line">    is_supported = <span class="keyword">false</span>;</div><div class="line">    count = get_test_device_count();</div><div class="line">    <span class="keywordflow">for</span> (i = 0; i &lt; count; i++) {</div><div class="line">        test_device = get_test_device(i);</div><div class="line">        <span class="keywordflow">if</span> (test_device-&gt;identify_request != NULL &amp;&amp;</div><div class="line">            test_device-&gt;identify_get_remaining_time != NULL) {</div><div class="line">            is_supported = <span class="keyword">true</span>;</div><div class="line">            <span class="keywordflow">break</span>;</div><div class="line">        }</div><div class="line">    }</div><div class="line"></div><div class="line">    <span class="keywordflow">if</span> (is_supported == <span class="keyword">false</span>)</div><div class="line">        <span class="keywordflow">return</span> <a name="a7"></a><a class="code" href="artik__error_8h.html#ac32e2eaa0134cd9626a55a2587662501">E_NOT_SUPPORTED</a>;</div><div class="line"></div><div class="line">    zb-&gt;<a name="a8"></a><a class="code" href="structartik__zigbee__module.html#ae6c1f68144ff564acb29562cdafb0ecf">device_find_by_cluster</a>(&amp;endpoint_list,</div><div class="line">                    ARTIK_ZCL_IDENTIFY_CLUSTER_ID, 1);</div><div class="line"></div><div class="line">    <span class="keywordflow">if</span> (endpoint_list.<a name="a9"></a>num == 0) {</div><div class="line">        showln(<span class="stringliteral">&quot;There is no endpoint to send identify command&quot;</span>);</div><div class="line">        <span class="keywordflow">return</span> <a name="a10"></a><a class="code" href="artik__error_8h.html#a487d95c56515019592eb5e2e86491b0d">E_ZIGBEE_ERROR</a>;</div><div class="line">    }</div><div class="line"></div><div class="line">    count = get_test_device_count();</div><div class="line"></div><div class="line">    <span class="keywordflow">for</span> (i = 0; i &lt; count; i++) {</div><div class="line">        test_device = get_test_device(i);</div><div class="line"></div><div class="line">        <span class="keywordflow">if</span> (test_device-&gt;identify_request == NULL ||</div><div class="line">            test_device-&gt;identify_get_remaining_time == NULL) {</div><div class="line">            <span class="keywordflow">continue</span>;</div><div class="line">        }</div><div class="line"></div><div class="line">        showln(<span class="stringliteral">&quot;Identify: testing started by ep(%d)&quot;</span>,</div><div class="line">                        test_device-&gt;endpoint_id);</div><div class="line"></div><div class="line">        <span class="keywordflow">for</span> (j = 0; j &lt; endpoint_list.num; j++) {</div><div class="line">            endpoint = &amp;endpoint_list.<a name="a11"></a>endpoint[j];</div><div class="line">            ret = test_device-&gt;identify_request(test_device-&gt;handle,</div><div class="line">                        endpoint,</div><div class="line">                        EASY_IDENTIFY_DURATION + i);</div><div class="line">            <span class="keywordflow">if</span> (ret == <a class="code" href="artik__error_8h.html#a14bc2dfa42241600d567369cd25ddc70">S_OK</a>)</div><div class="line">                showln(<span class="stringliteral">&quot;Identify: send request to node(0x%04X)&quot;</span>,</div><div class="line">                        endpoint-&gt;<a name="a12"></a>node_id);</div><div class="line">            <span class="keywordflow">else</span> {</div><div class="line">                showln(<span class="stringliteral">&quot;Identify: send request failed: %s&quot;</span>,</div><div class="line">                        error_msg(ret));</div><div class="line">                <span class="keywordflow">return</span> ret;</div><div class="line">            }</div><div class="line">        }</div><div class="line"></div><div class="line">        sleep((<span class="keywordtype">int</span>)((EASY_IDENTIFY_DURATION + i) / 2));</div><div class="line"></div><div class="line">        <span class="keywordflow">for</span> (duration = 0; duration &lt; (EASY_IDENTIFY_DURATION + i) / 2;</div><div class="line">             duration++) {</div><div class="line">            <span class="keywordflow">for</span> (j = 0; j &lt; endpoint_list.num; j++) {</div><div class="line">                endpoint = &amp;endpoint_list.endpoint[j];</div><div class="line">                ret = test_device-&gt;identify_get_remaining_time(</div><div class="line">                    test_device-&gt;handle, endpoint,</div><div class="line">                    &amp;remained_time);</div><div class="line"></div><div class="line">                <span class="keywordflow">if</span> (ret != <a class="code" href="artik__error_8h.html#a14bc2dfa42241600d567369cd25ddc70">S_OK</a>) {</div><div class="line">                    log_err(<span class="stringliteral">&quot;Identify: get remaining&quot;</span>\</div><div class="line">                        <span class="stringliteral">&quot; time failed: %s&quot;</span>,</div><div class="line">                            error_msg(ret));</div><div class="line">                    <span class="keywordflow">return</span> ret;</div><div class="line">                }</div><div class="line"></div><div class="line">                showln(<span class="stringliteral">&quot;Identify: remained time: %d&quot;</span>,</div><div class="line">                    remained_time);</div><div class="line"></div><div class="line">                <span class="keywordflow">if</span> (remained_time == 0)</div><div class="line">                    <span class="keywordflow">break</span>;</div><div class="line">            }</div><div class="line"></div><div class="line">            sleep(1);</div><div class="line">        }</div><div class="line"></div><div class="line">        showln(<span class="stringliteral">&quot;Identify: testing succeeded by ep(%d)&quot;</span>,</div><div class="line">               test_device-&gt;endpoint_id);</div><div class="line">    }</div><div class="line"></div><div class="line">    <span class="keywordflow">return</span> <a class="code" href="artik__error_8h.html#a14bc2dfa42241600d567369cd25ddc70">S_OK</a>;</div><div class="line">}</div><div class="line"></div><div class="line"><span class="keyword">static</span> <a class="code" href="artik__error_8h.html#a9b1d9ae639ccc7c1b865a73d74b06c74">artik_error</a> _onoff_test(<a class="code" href="structartik__zigbee__module.html">artik_zigbee_module</a> *zb)</div><div class="line">{</div><div class="line">    <a class="code" href="structartik__zigbee__endpoint.html">artik_zigbee_endpoint</a> *endpoint;</div><div class="line">    <a class="code" href="structartik__zigbee__endpoint__list.html">artik_zigbee_endpoint_list</a> endpoint_list;</div><div class="line">    <span class="keyword">struct </span>test_device *test_device;</div><div class="line">    <a class="code" href="artik__error_8h.html#a9b1d9ae639ccc7c1b865a73d74b06c74">artik_error</a> ret = <a class="code" href="artik__error_8h.html#a14bc2dfa42241600d567369cd25ddc70">S_OK</a>;</div><div class="line">    <span class="keywordtype">int</span> i, j, count;</div><div class="line">    <span class="keywordtype">bool</span> is_supported;</div><div class="line"></div><div class="line">    is_supported = <span class="keyword">false</span>;</div><div class="line">    count = get_test_device_count();</div><div class="line">    <span class="keywordflow">for</span> (i = 0; i &lt; count; i++) {</div><div class="line">        test_device = get_test_device(i);</div><div class="line">        <span class="keywordflow">if</span> (test_device-&gt;onoff_command != NULL) {</div><div class="line">            is_supported = <span class="keyword">true</span>;</div><div class="line">            <span class="keywordflow">break</span>;</div><div class="line">        }</div><div class="line">    }</div><div class="line"></div><div class="line">    <span class="keywordflow">if</span> (is_supported == <span class="keyword">false</span>)</div><div class="line">        <span class="keywordflow">return</span> <a class="code" href="artik__error_8h.html#ac32e2eaa0134cd9626a55a2587662501">E_NOT_SUPPORTED</a>;</div><div class="line"></div><div class="line">    zb-&gt;<a class="code" href="structartik__zigbee__module.html#ae6c1f68144ff564acb29562cdafb0ecf">device_find_by_cluster</a>(&amp;endpoint_list, ARTIK_ZCL_ON_OFF_CLUSTER_ID,</div><div class="line">                                    1);</div><div class="line">    <span class="keywordflow">if</span> (endpoint_list.num == 0) {</div><div class="line">        showln(<span class="stringliteral">&quot;There is no endpoint to send on/off command&quot;</span>);</div><div class="line">        <span class="keywordflow">return</span> <a class="code" href="artik__error_8h.html#a487d95c56515019592eb5e2e86491b0d">E_ZIGBEE_ERROR</a>;</div><div class="line">    }</div><div class="line"></div><div class="line">    count = get_test_device_count();</div><div class="line">    <span class="keywordflow">for</span> (i = 0; i &lt; count; i++) {</div><div class="line">        test_device = get_test_device(i);</div><div class="line">        <span class="keywordflow">if</span> (test_device-&gt;onoff_command == NULL)</div><div class="line">            <span class="keywordflow">continue</span>;</div><div class="line"></div><div class="line">        showln(<span class="stringliteral">&quot;On/off: testing started by ep(%d)&quot;</span>,</div><div class="line">                        test_device-&gt;endpoint_id);</div><div class="line"></div><div class="line">        <span class="keywordflow">for</span> (j = 0; j &lt; endpoint_list.num; j++) {</div><div class="line">            endpoint = &amp;endpoint_list.endpoint[j];</div><div class="line">            ret = test_device-&gt;onoff_command(test_device-&gt;handle,</div><div class="line">                        endpoint,</div><div class="line">                        ARTIK_ZIGBEE_ONOFF_TOGGLE);</div><div class="line">            <span class="keywordflow">if</span> (ret == <a class="code" href="artik__error_8h.html#a14bc2dfa42241600d567369cd25ddc70">S_OK</a>)</div><div class="line">                showln(<span class="stringliteral">&quot;On/off: send TOGGLE to node(0x%04X)&quot;</span>,</div><div class="line">                       endpoint-&gt;node_id);</div><div class="line">            <span class="keywordflow">else</span> {</div><div class="line">                showln(<span class="stringliteral">&quot;On/off: send TOGGLE failed: %s&quot;</span>,</div><div class="line">                    error_msg(ret));</div><div class="line">                <span class="keywordflow">return</span> ret;</div><div class="line">            }</div><div class="line"></div><div class="line">            sleep(1);</div><div class="line"></div><div class="line">            ret = test_device-&gt;onoff_command(test_device-&gt;handle,</div><div class="line">                        endpoint,</div><div class="line">                        ARTIK_ZIGBEE_ONOFF_ON);</div><div class="line">            <span class="keywordflow">if</span> (ret == <a class="code" href="artik__error_8h.html#a14bc2dfa42241600d567369cd25ddc70">S_OK</a>)</div><div class="line">                showln(<span class="stringliteral">&quot;On/off: send ON to node(0x%04X)&quot;</span>,</div><div class="line">                    endpoint-&gt;node_id);</div><div class="line">            <span class="keywordflow">else</span> {</div><div class="line">                showln(<span class="stringliteral">&quot;On/off: send ON failed: %s&quot;</span>,</div><div class="line">                    error_msg(ret));</div><div class="line">                <span class="keywordflow">return</span> ret;</div><div class="line">            }</div><div class="line"></div><div class="line">            sleep(1);</div><div class="line"></div><div class="line">            ret = test_device-&gt;onoff_command(test_device-&gt;handle,</div><div class="line">                        endpoint,</div><div class="line">                        ARTIK_ZIGBEE_ONOFF_OFF);</div><div class="line">            <span class="keywordflow">if</span> (ret == <a class="code" href="artik__error_8h.html#a14bc2dfa42241600d567369cd25ddc70">S_OK</a>)</div><div class="line">                showln(<span class="stringliteral">&quot;On/off: send OFF to node(0x%04X)&quot;</span>,</div><div class="line">                       endpoint-&gt;node_id);</div><div class="line">            <span class="keywordflow">else</span> {</div><div class="line">                showln(<span class="stringliteral">&quot;On/off: send OFF failed: %s&quot;</span>,</div><div class="line">                    error_msg(ret));</div><div class="line">                <span class="keywordflow">return</span> ret;</div><div class="line">            }</div><div class="line"></div><div class="line">            sleep(1);</div><div class="line">        }</div><div class="line"></div><div class="line">        showln(<span class="stringliteral">&quot;On/off: testing succeeded by ep(%d)&quot;</span>,</div><div class="line">                    test_device-&gt;endpoint_id);</div><div class="line">    }</div><div class="line"></div><div class="line">    <span class="keywordflow">return</span> <a class="code" href="artik__error_8h.html#a14bc2dfa42241600d567369cd25ddc70">S_OK</a>;</div><div class="line">}</div><div class="line"></div><div class="line"><span class="keyword">static</span> <a class="code" href="artik__error_8h.html#a9b1d9ae639ccc7c1b865a73d74b06c74">artik_error</a> _levelcontrol_test(<a class="code" href="structartik__zigbee__module.html">artik_zigbee_module</a> *zb, <span class="keywordtype">bool</span> with_onoff)</div><div class="line">{</div><div class="line">    <a class="code" href="structartik__zigbee__endpoint.html">artik_zigbee_endpoint</a> *endpoint;</div><div class="line">    <a class="code" href="structartik__zigbee__endpoint__list.html">artik_zigbee_endpoint_list</a> endpoint_list;</div><div class="line">    <a name="_a13"></a><a class="code" href="structartik__zigbee__level__control__command.html">artik_zigbee_level_control_command</a> cmd;</div><div class="line">    <span class="keyword">struct </span>test_device *test_device;</div><div class="line">    <a class="code" href="artik__error_8h.html#a9b1d9ae639ccc7c1b865a73d74b06c74">artik_error</a> ret = <a class="code" href="artik__error_8h.html#a14bc2dfa42241600d567369cd25ddc70">S_OK</a>;</div><div class="line">    <span class="keywordtype">int</span> i, j, count;</div><div class="line">    <span class="keywordtype">bool</span> is_supported;</div><div class="line">    <span class="keywordtype">int</span> testing_transition_time = 10;   <span class="comment">/* 1 sec */</span></div><div class="line"></div><div class="line">    is_supported = <span class="keyword">false</span>;</div><div class="line">    count = get_test_device_count();</div><div class="line">    <span class="keywordflow">for</span> (i = 0; i &lt; count; i++) {</div><div class="line">        test_device = get_test_device(i);</div><div class="line">        <span class="keywordflow">if</span> (test_device-&gt;level_control_request != NULL) {</div><div class="line">            is_supported = <span class="keyword">true</span>;</div><div class="line">            <span class="keywordflow">break</span>;</div><div class="line">        }</div><div class="line">    }</div><div class="line"></div><div class="line">    <span class="keywordflow">if</span> (is_supported == <span class="keyword">false</span>)</div><div class="line">        <span class="keywordflow">return</span> <a class="code" href="artik__error_8h.html#ac32e2eaa0134cd9626a55a2587662501">E_NOT_SUPPORTED</a>;</div><div class="line"></div><div class="line">    zb-&gt;<a class="code" href="structartik__zigbee__module.html#ae6c1f68144ff564acb29562cdafb0ecf">device_find_by_cluster</a>(&amp;endpoint_list,</div><div class="line">                    ARTIK_ZCL_LEVEL_CONTROL_CLUSTER_ID, 1);</div><div class="line">    <span class="keywordflow">if</span> (endpoint_list.num == 0) {</div><div class="line">        showln(<span class="stringliteral">&quot;There is no endpoint to send level control command&quot;</span>);</div><div class="line">        <span class="keywordflow">return</span> <a class="code" href="artik__error_8h.html#a487d95c56515019592eb5e2e86491b0d">E_ZIGBEE_ERROR</a>;</div><div class="line">    }</div><div class="line"></div><div class="line">    count = get_test_device_count();</div><div class="line">    <span class="keywordflow">for</span> (i = 0; i &lt; count; i++) {</div><div class="line">        test_device = get_test_device(i);</div><div class="line">        <span class="keywordflow">if</span> (test_device-&gt;level_control_request == NULL)</div><div class="line">            <span class="keywordflow">continue</span>;</div><div class="line"></div><div class="line">        showln(<span class="stringliteral">&quot;Level control: testing started by ep(%d)&quot;</span>,</div><div class="line">               test_device-&gt;endpoint_id);</div><div class="line"></div><div class="line">        <span class="keywordflow">for</span> (j = 0; j &lt; endpoint_list.num; j++) {</div><div class="line">            endpoint = &amp;endpoint_list.endpoint[j];</div><div class="line"></div><div class="line">            cmd.<a name="a14"></a>control_type = with_onoff ?</div><div class="line">                    ARTIK_ZIGBEE_MOVE_TO_LEVEL_ONOFF :</div><div class="line">                    ARTIK_ZIGBEE_MOVE_TO_LEVEL;</div><div class="line">            cmd.<a name="a15"></a>parameters.<a name="a16"></a>move_to_level.level = 10;</div><div class="line">            cmd.parameters.move_to_level.transition_time =</div><div class="line">                            testing_transition_time;</div><div class="line">            ret = test_device-&gt;level_control_request(</div><div class="line">                            test_device-&gt;handle,</div><div class="line">                            endpoint, &amp;cmd);</div><div class="line">            <span class="keywordflow">if</span> (ret == <a class="code" href="artik__error_8h.html#a14bc2dfa42241600d567369cd25ddc70">S_OK</a>)</div><div class="line">                showln(<span class="stringliteral">&quot;Level control: send MOVE TO %d&quot;</span>\</div><div class="line">                    <span class="stringliteral">&quot; with transition time: %d %s&quot;</span>\</div><div class="line">                    <span class="stringliteral">&quot; to node(0x%04X)&quot;</span>,</div><div class="line">                cmd.parameters.move_to_level.level,</div><div class="line">                cmd.parameters.move_to_level.transition_time,</div><div class="line">                with_onoff ? <span class="stringliteral">&quot;with ONOFF&quot;</span> : <span class="stringliteral">&quot;without ONOFF&quot;</span>,</div><div class="line">                endpoint-&gt;node_id);</div><div class="line">            <span class="keywordflow">else</span> {</div><div class="line">                showln(<span class="stringliteral">&quot;Level control: send MOVE&quot;</span>\</div><div class="line">                    <span class="stringliteral">&quot; TO %d %s failed: %s&quot;</span>,</div><div class="line">                cmd.parameters.move_to_level.level,</div><div class="line">                with_onoff ? <span class="stringliteral">&quot;with ONOFF&quot;</span> : <span class="stringliteral">&quot;without ONOFF&quot;</span>,</div><div class="line">                error_msg(ret));</div><div class="line">                <span class="keywordflow">return</span> ret;</div><div class="line">            }</div><div class="line"></div><div class="line">            sleep(2);</div><div class="line"></div><div class="line">            cmd.control_type = with_onoff ? ARTIK_ZIGBEE_MOVE_ONOFF</div><div class="line">                            : ARTIK_ZIGBEE_MOVE;</div><div class="line">            cmd.parameters.<a name="a17"></a>move.control_mode =</div><div class="line">                        ARTIK_ZIGBEE_LEVEL_CONTROL_UP;</div><div class="line">            cmd.parameters.move.rate = 5;</div><div class="line">            ret = test_device-&gt;level_control_request(</div><div class="line">                            test_device-&gt;handle,</div><div class="line">                            endpoint, &amp;cmd);</div><div class="line">            <span class="keywordflow">if</span> (ret == <a class="code" href="artik__error_8h.html#a14bc2dfa42241600d567369cd25ddc70">S_OK</a>)</div><div class="line">                showln(<span class="stringliteral">&quot;Level control: send MOVE UP with rate:&quot;</span>\</div><div class="line">                    <span class="stringliteral">&quot; %d %s for node(0x%04X)&quot;</span>,</div><div class="line">                cmd.parameters.move.rate,</div><div class="line">                with_onoff ? <span class="stringliteral">&quot;with ONOFF&quot;</span> : <span class="stringliteral">&quot;without ONOFF&quot;</span>,</div><div class="line">                endpoint-&gt;node_id);</div><div class="line">            <span class="keywordflow">else</span> {</div><div class="line">                showln(<span class="stringliteral">&quot;Level control: send MOVE UP %s&quot;</span>\</div><div class="line">                    <span class="stringliteral">&quot; failed: %s&quot;</span>,</div><div class="line">                with_onoff ? <span class="stringliteral">&quot;with ONOFF&quot;</span> : <span class="stringliteral">&quot;without ONOFF&quot;</span>,</div><div class="line">                error_msg(ret));</div><div class="line">                <span class="keywordflow">return</span> ret;</div><div class="line">            }</div><div class="line"></div><div class="line">            sleep(5);</div><div class="line"></div><div class="line">            cmd.control_type = with_onoff ? ARTIK_ZIGBEE_STOP_ONOFF</div><div class="line">                            : ARTIK_ZIGBEE_STOP;</div><div class="line">            ret = test_device-&gt;level_control_request(</div><div class="line">                    test_device-&gt;handle, endpoint, &amp;cmd);</div><div class="line">            <span class="keywordflow">if</span> (ret == <a class="code" href="artik__error_8h.html#a14bc2dfa42241600d567369cd25ddc70">S_OK</a>)</div><div class="line">                showln(<span class="stringliteral">&quot;Level control: send STOP %s&quot;</span>\</div><div class="line">                    <span class="stringliteral">&quot; for node(0x%04X)&quot;</span>,</div><div class="line">            with_onoff ? <span class="stringliteral">&quot;with ONOFF&quot;</span> : <span class="stringliteral">&quot;without ONOFF&quot;</span>,</div><div class="line">            endpoint-&gt;node_id);</div><div class="line">            <span class="keywordflow">else</span> {</div><div class="line">                showln(<span class="stringliteral">&quot;Level control: send STOP %s failed: %s&quot;</span>,</div><div class="line">                with_onoff ? <span class="stringliteral">&quot;with ONOFF&quot;</span> : <span class="stringliteral">&quot;without ONOFF&quot;</span>,</div><div class="line">                error_msg(ret));</div><div class="line">                <span class="keywordflow">return</span> ret;</div><div class="line">            }</div><div class="line"></div><div class="line">            sleep(2);</div><div class="line"></div><div class="line">            cmd.control_type = with_onoff ? ARTIK_ZIGBEE_STEP_ONOFF</div><div class="line">                            : ARTIK_ZIGBEE_STEP;</div><div class="line">            cmd.parameters.<a name="a18"></a>step.control_mode =</div><div class="line">                        ARTIK_ZIGBEE_LEVEL_CONTROL_DOWN;</div><div class="line">            cmd.parameters.step.step_size = 10;</div><div class="line">            cmd.parameters.step.transition_time =</div><div class="line">                            testing_transition_time;</div><div class="line">            ret = test_device-&gt;level_control_request(</div><div class="line">                            test_device-&gt;handle,</div><div class="line">                            endpoint, &amp;cmd);</div><div class="line">            <span class="keywordflow">if</span> (ret == <a class="code" href="artik__error_8h.html#a14bc2dfa42241600d567369cd25ddc70">S_OK</a>)</div><div class="line">                showln(<span class="stringliteral">&quot;Level control: send STEP DOWN with&quot;</span>\</div><div class="line">                    <span class="stringliteral">&quot; step size: %d transition time:&quot;</span>\</div><div class="line">                    <span class="stringliteral">&quot; %d %s for node(0x%04X)&quot;</span>,</div><div class="line">                cmd.parameters.step.step_size,</div><div class="line">                cmd.parameters.step.transition_time,</div><div class="line">                with_onoff ? <span class="stringliteral">&quot;with ONOFF&quot;</span> : <span class="stringliteral">&quot;without ONOFF&quot;</span>,</div><div class="line">                endpoint-&gt;node_id);</div><div class="line">            <span class="keywordflow">else</span> {</div><div class="line">                showln(<span class="stringliteral">&quot;Level control: send STEP DOWN %s&quot;</span>\</div><div class="line">                    <span class="stringliteral">&quot; failed: %s&quot;</span>,</div><div class="line">                with_onoff ? <span class="stringliteral">&quot;with ONOFF&quot;</span> : <span class="stringliteral">&quot;without ONOFF&quot;</span>,</div><div class="line">                error_msg(ret));</div><div class="line">                <span class="keywordflow">return</span> ret;</div><div class="line">            }</div><div class="line"></div><div class="line">            sleep(5);</div><div class="line"></div><div class="line">            cmd.control_type = with_onoff ? ARTIK_ZIGBEE_STOP_ONOFF</div><div class="line">                            : ARTIK_ZIGBEE_STOP;</div><div class="line">            ret = test_device-&gt;level_control_request(</div><div class="line">                            test_device-&gt;handle,</div><div class="line">                            endpoint, &amp;cmd);</div><div class="line">            <span class="keywordflow">if</span> (ret == <a class="code" href="artik__error_8h.html#a14bc2dfa42241600d567369cd25ddc70">S_OK</a>)</div><div class="line">                showln(<span class="stringliteral">&quot;Level control: send STOP %s&quot;</span>\</div><div class="line">                    <span class="stringliteral">&quot; for node(0x%04X)&quot;</span>,</div><div class="line">                with_onoff ? <span class="stringliteral">&quot;with ONOFF&quot;</span> : <span class="stringliteral">&quot;without ONOFF&quot;</span>,</div><div class="line">                endpoint-&gt;node_id);</div><div class="line">            <span class="keywordflow">else</span> {</div><div class="line">                showln(<span class="stringliteral">&quot;Level control: send STOP %s failed: %s&quot;</span>,</div><div class="line">                with_onoff ? <span class="stringliteral">&quot;with ONOFF&quot;</span> : <span class="stringliteral">&quot;without ONOFF&quot;</span>,</div><div class="line">                error_msg(ret));</div><div class="line">                <span class="keywordflow">return</span> ret;</div><div class="line">            }</div><div class="line"></div><div class="line">            sleep(2);</div><div class="line">        }</div><div class="line"></div><div class="line">        showln(<span class="stringliteral">&quot;Level control: testing succeeded by ep(%d)&quot;</span>,</div><div class="line">               test_device-&gt;endpoint_id);</div><div class="line">    }</div><div class="line"></div><div class="line">    <span class="keywordflow">return</span> <a class="code" href="artik__error_8h.html#a14bc2dfa42241600d567369cd25ddc70">S_OK</a>;</div><div class="line">}</div><div class="line"></div><div class="line"><span class="keyword">static</span> <a class="code" href="artik__error_8h.html#a9b1d9ae639ccc7c1b865a73d74b06c74">artik_error</a> _illuminance_test(<span class="keywordtype">void</span>)</div><div class="line">{</div><div class="line">    <span class="keyword">struct </span>test_device *test_device;</div><div class="line">    <a class="code" href="artik__error_8h.html#a9b1d9ae639ccc7c1b865a73d74b06c74">artik_error</a> ret = <a class="code" href="artik__error_8h.html#a14bc2dfa42241600d567369cd25ddc70">S_OK</a>;</div><div class="line">    <span class="keywordtype">int</span> i, count;</div><div class="line">    <span class="keywordtype">bool</span> is_supported;</div><div class="line">    <span class="keywordtype">int</span> ill_value;</div><div class="line"></div><div class="line">    is_supported = <span class="keyword">false</span>;</div><div class="line">    count = get_test_device_count();</div><div class="line">    <span class="keywordflow">for</span> (i = 0; i &lt; count; i++) {</div><div class="line">        test_device = get_test_device(i);</div><div class="line">        <span class="keywordflow">if</span> (test_device-&gt;illum_set_measured_value != NULL &amp;&amp;</div><div class="line">            test_device-&gt;illum_set_measured_value_range != NULL) {</div><div class="line">            is_supported = <span class="keyword">true</span>;</div><div class="line">            <span class="keywordflow">break</span>;</div><div class="line">        }</div><div class="line">    }</div><div class="line"></div><div class="line">    <span class="keywordflow">if</span> (is_supported == <span class="keyword">false</span>)</div><div class="line">        <span class="keywordflow">return</span> <a class="code" href="artik__error_8h.html#ac32e2eaa0134cd9626a55a2587662501">E_NOT_SUPPORTED</a>;</div><div class="line"></div><div class="line">    <span class="keywordflow">for</span> (i = 0; i &lt; get_test_device_count(); i++) {</div><div class="line">        test_device = get_test_device(i);</div><div class="line">        <span class="keywordflow">if</span> (test_device-&gt;illum_set_measured_value == NULL)</div><div class="line">            <span class="keywordflow">continue</span>;</div><div class="line"></div><div class="line">        showln(<span class="stringliteral">&quot;Illuminance: testing started by ep(%d)&quot;</span>,</div><div class="line">               test_device-&gt;endpoint_id);</div><div class="line"></div><div class="line">        illuminance_min += ILLUMINANCE_STEP;</div><div class="line">        illuminance_max -= ILLUMINANCE_STEP;</div><div class="line">        illuminance_value += (ILLUMINANCE_STEP * 2);</div><div class="line"></div><div class="line">        <span class="keywordflow">if</span> (illuminance_min &gt;= illuminance_max) {</div><div class="line">            illuminance_min = ILLUMINANCE_MIN;</div><div class="line">            illuminance_max = ILLUMINANCE_MAX;</div><div class="line">        }</div><div class="line"></div><div class="line">        <span class="keywordflow">if</span> (illuminance_value &lt; illuminance_min ||</div><div class="line">            illuminance_value &gt; illuminance_max)</div><div class="line">            illuminance_value = illuminance_min;</div><div class="line"></div><div class="line">        ret = test_device-&gt;illum_set_measured_value_range(</div><div class="line">                            test_device-&gt;handle,</div><div class="line">                            illuminance_min,</div><div class="line">                            illuminance_max);</div><div class="line">        <span class="keywordflow">if</span> (ret == <a class="code" href="artik__error_8h.html#a14bc2dfa42241600d567369cd25ddc70">S_OK</a>)</div><div class="line">            showln(<span class="stringliteral">&quot;Set illuminace range to %d - %d&quot;</span>,</div><div class="line">                    illuminance_min, illuminance_max);</div><div class="line">        <span class="keywordflow">else</span> {</div><div class="line">            showln(<span class="stringliteral">&quot;Set illuminace range failed: %s&quot;</span>,</div><div class="line">                    error_msg(ret));</div><div class="line">            <span class="keywordflow">return</span> ret;</div><div class="line">        }</div><div class="line"></div><div class="line">        sleep(1);</div><div class="line">        ret = test_device-&gt;illum_get_measured_value(test_device-&gt;handle,</div><div class="line">                                &amp;ill_value);</div><div class="line">        <span class="keywordflow">if</span> (ret == <a class="code" href="artik__error_8h.html#a14bc2dfa42241600d567369cd25ddc70">S_OK</a>)</div><div class="line">            showln(<span class="stringliteral">&quot;Get illuminace %d&quot;</span>, ill_value);</div><div class="line">        <span class="keywordflow">else</span> {</div><div class="line">            showln(<span class="stringliteral">&quot;Get illuminace failed: %s&quot;</span>, error_msg(ret));</div><div class="line">            <span class="keywordflow">return</span> ret;</div><div class="line">        }</div><div class="line"></div><div class="line">        sleep(1);</div><div class="line">        ret = test_device-&gt;illum_set_measured_value(test_device-&gt;handle,</div><div class="line">                            illuminance_value);</div><div class="line">        <span class="keywordflow">if</span> (ret == <a class="code" href="artik__error_8h.html#a14bc2dfa42241600d567369cd25ddc70">S_OK</a>)</div><div class="line">            showln(<span class="stringliteral">&quot;Set illuminace to %d&quot;</span>, illuminance_value);</div><div class="line">        <span class="keywordflow">else</span> {</div><div class="line">            showln(<span class="stringliteral">&quot;Set illuminace failed: %s&quot;</span>, error_msg(ret));</div><div class="line">            <span class="keywordflow">return</span> ret;</div><div class="line">        }</div><div class="line"></div><div class="line">        sleep(1);</div><div class="line">        ret = test_device-&gt;illum_get_measured_value(test_device-&gt;handle,</div><div class="line">                                &amp;ill_value);</div><div class="line">        <span class="keywordflow">if</span> (ret == <a class="code" href="artik__error_8h.html#a14bc2dfa42241600d567369cd25ddc70">S_OK</a>)</div><div class="line">            showln(<span class="stringliteral">&quot;Get illuminace %d&quot;</span>, ill_value);</div><div class="line">        <span class="keywordflow">else</span> {</div><div class="line">            showln(<span class="stringliteral">&quot;Get illuminace failed: %s&quot;</span>, error_msg(ret));</div><div class="line">            <span class="keywordflow">return</span> ret;</div><div class="line">        }</div><div class="line">        showln(<span class="stringliteral">&quot;Illuminance: testing succeeded by ep(%d)&quot;</span>,</div><div class="line">               test_device-&gt;endpoint_id);</div><div class="line">    }</div><div class="line"></div><div class="line">    <span class="keywordflow">return</span> <a class="code" href="artik__error_8h.html#a14bc2dfa42241600d567369cd25ddc70">S_OK</a>;</div><div class="line">}</div><div class="line"></div><div class="line"><span class="keyword">static</span> <a class="code" href="artik__error_8h.html#a9b1d9ae639ccc7c1b865a73d74b06c74">artik_error</a> _do_basic_remote_control(<a class="code" href="structartik__zigbee__module.html">artik_zigbee_module</a> *zb)</div><div class="line">{</div><div class="line">    <a class="code" href="structartik__zigbee__endpoint__list.html">artik_zigbee_endpoint_list</a> endpoint_list;</div><div class="line">    <a class="code" href="structartik__zigbee__endpoint.html">artik_zigbee_endpoint</a> *endpoint = NULL;</div><div class="line">    <span class="keyword">struct </span>test_device *test_device = NULL;</div><div class="line">    <a class="code" href="artik__error_8h.html#a9b1d9ae639ccc7c1b865a73d74b06c74">artik_error</a> ret = <a class="code" href="artik__error_8h.html#a487d95c56515019592eb5e2e86491b0d">E_ZIGBEE_ERROR</a>;</div><div class="line">    <span class="keywordtype">int</span> i, j, count = 0;</div><div class="line">    <span class="keywordtype">bool</span> is_supported = <span class="keyword">false</span>;</div><div class="line"></div><div class="line">    count = get_test_device_count();</div><div class="line">    <span class="keywordflow">for</span> (i = 0; i &lt; count; i++) {</div><div class="line">        test_device = get_test_device(i);</div><div class="line">        <span class="keywordflow">if</span> (test_device-&gt;reset_to_factory_default != NULL) {</div><div class="line">            is_supported = <span class="keyword">true</span>;</div><div class="line">            <span class="keywordflow">break</span>;</div><div class="line">        }</div><div class="line">    }</div><div class="line"></div><div class="line">    <span class="keywordflow">if</span> (is_supported == <span class="keyword">false</span>)</div><div class="line">        <span class="keywordflow">return</span> <a class="code" href="artik__error_8h.html#ac32e2eaa0134cd9626a55a2587662501">E_NOT_SUPPORTED</a>;</div><div class="line"></div><div class="line">    zb-&gt;<a class="code" href="structartik__zigbee__module.html#ae6c1f68144ff564acb29562cdafb0ecf">device_find_by_cluster</a>(&amp;endpoint_list, ARTIK_ZCL_BASIC_CLUSTER_ID,</div><div class="line">                                    1);</div><div class="line">    <span class="keywordflow">if</span> (endpoint_list.num == 0) {</div><div class="line">        showln(<span class="stringliteral">&quot;There is no endpoint for basic remote control&quot;</span>);</div><div class="line">        <span class="keywordflow">return</span> <a class="code" href="artik__error_8h.html#a487d95c56515019592eb5e2e86491b0d">E_ZIGBEE_ERROR</a>;</div><div class="line">    }</div><div class="line"></div><div class="line">    count = get_test_device_count();</div><div class="line">    <span class="keywordflow">for</span> (i = 0; i &lt; count; i++) {</div><div class="line">        test_device = get_test_device(i);</div><div class="line"></div><div class="line">        <span class="keywordflow">if</span> (test_device-&gt;reset_to_factory_default == NULL)</div><div class="line">            <span class="keywordflow">continue</span>;</div><div class="line"></div><div class="line">        showln(<span class="stringliteral">&quot;Remote control basic: testing started by ep(%d)&quot;</span>,</div><div class="line">                test_device-&gt;endpoint_id);</div><div class="line"></div><div class="line">        <span class="keywordflow">for</span> (j = 0; j &lt; endpoint_list.num; j++) {</div><div class="line">            endpoint = &amp;endpoint_list.endpoint[j];</div><div class="line"></div><div class="line">            ret = test_device-&gt;reset_to_factory_default(</div><div class="line">                            test_device-&gt;handle,</div><div class="line">                            endpoint);</div><div class="line">            <span class="keywordflow">if</span> (ret == <a class="code" href="artik__error_8h.html#a14bc2dfa42241600d567369cd25ddc70">S_OK</a>)</div><div class="line">                showln(<span class="stringliteral">&quot;Success to reset to factory default&quot;</span>\</div><div class="line">                    <span class="stringliteral">&quot; to node 0x%04X&quot;</span>,</div><div class="line">                    endpoint-&gt;node_id);</div><div class="line">            <span class="keywordflow">else</span> {</div><div class="line">                showln(<span class="stringliteral">&quot;Failed to reset to factory default&quot;</span>\</div><div class="line">                    <span class="stringliteral">&quot; for result: %d&quot;</span>,</div><div class="line">                    ret);</div><div class="line">                <span class="keywordflow">return</span> ret;</div><div class="line">            }</div><div class="line"></div><div class="line">            sleep(2);</div><div class="line">        }</div><div class="line"></div><div class="line">        showln(<span class="stringliteral">&quot;Remote control: testing succeeded by ep(%d)&quot;</span>,</div><div class="line">               test_device-&gt;endpoint_id);</div><div class="line">    }</div><div class="line"></div><div class="line">    <span class="keywordflow">return</span> <a class="code" href="artik__error_8h.html#a14bc2dfa42241600d567369cd25ddc70">S_OK</a>;</div><div class="line">}</div><div class="line"></div><div class="line"><span class="keyword">static</span> <a class="code" href="artik__error_8h.html#a9b1d9ae639ccc7c1b865a73d74b06c74">artik_error</a> _stop_reporting(<a class="code" href="artik__zigbee_8h.html#aea510be7aa4868ef55648873515064ef">artik_zigbee_reporting_type</a> reporting_type)</div><div class="line">{</div><div class="line">    <a class="code" href="structartik__zigbee__endpoint__list.html">artik_zigbee_endpoint_list</a> endpoint_list;</div><div class="line">    <a class="code" href="structartik__zigbee__endpoint.html">artik_zigbee_endpoint</a> *endpoint = NULL;</div><div class="line">    <span class="keyword">struct </span>test_device *test_device = NULL;</div><div class="line">    <a class="code" href="artik__error_8h.html#a9b1d9ae639ccc7c1b865a73d74b06c74">artik_error</a> ret = <a class="code" href="artik__error_8h.html#a487d95c56515019592eb5e2e86491b0d">E_ZIGBEE_ERROR</a>;</div><div class="line">    <span class="keywordtype">int</span> i, j, count = 0;</div><div class="line">    <span class="keywordtype">bool</span> is_supported = <span class="keyword">false</span>;</div><div class="line">    <a class="code" href="structartik__zigbee__module.html">artik_zigbee_module</a> *zb = NULL;</div><div class="line"></div><div class="line">    count = get_test_device_count();</div><div class="line">    <span class="keywordflow">for</span> (i = 0; i &lt; count; i++) {</div><div class="line">        test_device = get_test_device(i);</div><div class="line">        <span class="keywordflow">if</span> (test_device-&gt;stop_reporting != NULL) {</div><div class="line">            is_supported = <span class="keyword">true</span>;</div><div class="line">            <span class="keywordflow">break</span>;</div><div class="line">        }</div><div class="line">    }</div><div class="line"></div><div class="line">    <span class="keywordflow">if</span> (is_supported == <span class="keyword">false</span>)</div><div class="line">        <span class="keywordflow">return</span> <a class="code" href="artik__error_8h.html#ac32e2eaa0134cd9626a55a2587662501">E_NOT_SUPPORTED</a>;</div><div class="line"></div><div class="line">    zb = (<a class="code" href="structartik__zigbee__module.html">artik_zigbee_module</a> *) <a name="a19"></a><a class="code" href="artik__module_8h.html#a5dd30d1b28a0ab577a06e417cfb28aa5">artik_request_api_module</a>(<span class="stringliteral">&quot;zigbee&quot;</span>);</div><div class="line"></div><div class="line">    <span class="keywordflow">switch</span> (reporting_type) {</div><div class="line">    <span class="keywordflow">case</span> ARTIK_ZIGBEE_REPORTING_MEASURED_TEMPERATURE:</div><div class="line">        zb-&gt;<a class="code" href="structartik__zigbee__module.html#ae6c1f68144ff564acb29562cdafb0ecf">device_find_by_cluster</a>(&amp;endpoint_list,</div><div class="line">                ARTIK_ZCL_TEMP_MEASUREMENT_CLUSTER_ID, 1);</div><div class="line">        <span class="keywordflow">break</span>;</div><div class="line"></div><div class="line">    <span class="keywordflow">case</span> ARTIK_ZIGBEE_REPORTING_MEASURED_ILLUMINANCE:</div><div class="line">        zb-&gt;<a class="code" href="structartik__zigbee__module.html#ae6c1f68144ff564acb29562cdafb0ecf">device_find_by_cluster</a>(&amp;endpoint_list,</div><div class="line">                ARTIK_ZCL_ILLUM_MEASUREMENT_CLUSTER_ID, 1);</div><div class="line">        <span class="keywordflow">break</span>;</div><div class="line"></div><div class="line">    <span class="keywordflow">case</span> ARTIK_ZIGBEE_REPORTING_OCCUPANCY_SENSING:</div><div class="line">        zb-&gt;<a class="code" href="structartik__zigbee__module.html#ae6c1f68144ff564acb29562cdafb0ecf">device_find_by_cluster</a>(&amp;endpoint_list,</div><div class="line">                ARTIK_ZCL_OCCUPANCY_SENSING_CLUSTER_ID, 1);</div><div class="line">        <span class="keywordflow">break</span>;</div><div class="line"></div><div class="line">    <span class="keywordflow">case</span> ARTIK_ZIGBEE_REPORTING_THERMOSTAT_TEMPERATURE:</div><div class="line">        zb-&gt;<a class="code" href="structartik__zigbee__module.html#ae6c1f68144ff564acb29562cdafb0ecf">device_find_by_cluster</a>(&amp;endpoint_list,</div><div class="line">                ARTIK_ZCL_THERMOSTAT_CLUSTER_ID, 1);</div><div class="line">        <span class="keywordflow">break</span>;</div><div class="line"></div><div class="line">    <span class="keywordflow">default</span>:</div><div class="line">        <span class="keywordflow">break</span>;</div><div class="line">    }</div><div class="line"></div><div class="line">    <span class="keywordflow">if</span> (endpoint_list.num == 0) {</div><div class="line">        showln(<span class="stringliteral">&quot;There is no endpoint to stop reporting&quot;</span>);</div><div class="line">        <a name="a20"></a><a class="code" href="artik__module_8h.html#a2b26deff010fc08966179cb6f34d9f66">artik_release_api_module</a>(zb);</div><div class="line">        <span class="keywordflow">return</span> <a class="code" href="artik__error_8h.html#a487d95c56515019592eb5e2e86491b0d">E_ZIGBEE_ERROR</a>;</div><div class="line">    }</div><div class="line"></div><div class="line">    count = get_test_device_count();</div><div class="line">    <span class="keywordflow">for</span> (i = 0; i &lt; count; i++) {</div><div class="line">        test_device = get_test_device(i);</div><div class="line"></div><div class="line">        <span class="keywordflow">if</span> (test_device-&gt;stop_reporting == NULL)</div><div class="line">            <span class="keywordflow">continue</span>;</div><div class="line"></div><div class="line">        showln(<span class="stringliteral">&quot;Stop reporting: testing starting by ep(%d)&quot;</span>,</div><div class="line">               test_device-&gt;endpoint_id);</div><div class="line"></div><div class="line">        <span class="keywordflow">for</span> (j = 0; j &lt; endpoint_list.num; j++) {</div><div class="line">            endpoint = &amp;endpoint_list.endpoint[j];</div><div class="line"></div><div class="line">            ret = test_device-&gt;stop_reporting(test_device-&gt;handle,</div><div class="line">                                endpoint,</div><div class="line">                                reporting_type);</div><div class="line">            <span class="keywordflow">if</span> (ret != ARTIK_ZIGBEE_CMD_SUCCESS)</div><div class="line">                showln(<span class="stringliteral">&quot;Failed to stop reporting %d for&quot;</span>\</div><div class="line">                    <span class="stringliteral">&quot; result: %d&quot;</span>,</div><div class="line">                    reporting_type, ret);</div><div class="line">            <span class="keywordflow">else</span></div><div class="line">                showln(<span class="stringliteral">&quot;Success to stop reporting %d to&quot;</span>\</div><div class="line">                    <span class="stringliteral">&quot; node 0x%04x&quot;</span>,</div><div class="line">                    reporting_type, endpoint-&gt;node_id);</div><div class="line">        }</div><div class="line"></div><div class="line">        showln(<span class="stringliteral">&quot;Stop reporting: testing ending by ep(%d)&quot;</span>,</div><div class="line">               test_device-&gt;endpoint_id);</div><div class="line">    }</div><div class="line"></div><div class="line">    <a class="code" href="artik__module_8h.html#a2b26deff010fc08966179cb6f34d9f66">artik_release_api_module</a>(zb);</div><div class="line">    <span class="keywordflow">return</span> ret;</div><div class="line">}</div><div class="line"></div><div class="line"><span class="keyword">static</span> <a class="code" href="artik__error_8h.html#a9b1d9ae639ccc7c1b865a73d74b06c74">artik_error</a> _measured_illuminance_reporting_test(<a class="code" href="structartik__zigbee__module.html">artik_zigbee_module</a> *zb)</div><div class="line">{</div><div class="line">    <a class="code" href="structartik__zigbee__endpoint__list.html">artik_zigbee_endpoint_list</a> endpoint_list;</div><div class="line">    <a class="code" href="structartik__zigbee__endpoint.html">artik_zigbee_endpoint</a> *endpoint = NULL;</div><div class="line">    <span class="keyword">struct </span>test_device *test_device = NULL;</div><div class="line">    <a class="code" href="artik__error_8h.html#a9b1d9ae639ccc7c1b865a73d74b06c74">artik_error</a> ret = <a class="code" href="artik__error_8h.html#a487d95c56515019592eb5e2e86491b0d">E_ZIGBEE_ERROR</a>;</div><div class="line">    <span class="keywordtype">int</span> i, j, count = 0;</div><div class="line">    <span class="keywordtype">bool</span> is_supported = <span class="keyword">false</span>;</div><div class="line"></div><div class="line">    <span class="keywordtype">int</span> min_interval = 1;</div><div class="line">    <span class="keywordtype">int</span> max_interval = 10;</div><div class="line">    <span class="keywordtype">int</span> illuminance = 10;</div><div class="line"></div><div class="line">    count = get_test_device_count();</div><div class="line">    <span class="keywordflow">for</span> (i = 0; i &lt; count; i++) {</div><div class="line">        test_device = get_test_device(i);</div><div class="line">        <span class="keywordflow">if</span> (test_device-&gt;request_reporting != NULL) {</div><div class="line">            is_supported = <span class="keyword">true</span>;</div><div class="line">            <span class="keywordflow">break</span>;</div><div class="line">        }</div><div class="line">    }</div><div class="line"></div><div class="line">    <span class="keywordflow">if</span> (is_supported == <span class="keyword">false</span>)</div><div class="line">        <span class="keywordflow">return</span> <a class="code" href="artik__error_8h.html#ac32e2eaa0134cd9626a55a2587662501">E_NOT_SUPPORTED</a>;</div><div class="line"></div><div class="line">    zb-&gt;<a class="code" href="structartik__zigbee__module.html#ae6c1f68144ff564acb29562cdafb0ecf">device_find_by_cluster</a>(&amp;endpoint_list,</div><div class="line">                    ARTIK_ZCL_ILLUM_MEASUREMENT_CLUSTER_ID,</div><div class="line">                    1);</div><div class="line">    <span class="keywordflow">if</span> (endpoint_list.num == 0) {</div><div class="line">        showln(<span class="stringliteral">&quot;There is no endpoint to request measured illuminance&quot;</span>\</div><div class="line">            <span class="stringliteral">&quot; reporting&quot;</span>);</div><div class="line">        <span class="keywordflow">return</span> <a class="code" href="artik__error_8h.html#a487d95c56515019592eb5e2e86491b0d">E_ZIGBEE_ERROR</a>;</div><div class="line">    }</div><div class="line"></div><div class="line">    count = get_test_device_count();</div><div class="line">    <span class="keywordflow">for</span> (i = 0; i &lt; count; i++) {</div><div class="line">        test_device = get_test_device(i);</div><div class="line"></div><div class="line">        <span class="keywordflow">if</span> (test_device-&gt;request_reporting == NULL)</div><div class="line">            <span class="keywordflow">continue</span>;</div><div class="line"></div><div class="line">        showln(<span class="stringliteral">&quot;Request measured illuminance reporting: testing&quot;</span>\</div><div class="line">            <span class="stringliteral">&quot; started by ep(%d)&quot;</span>, test_device-&gt;endpoint_id);</div><div class="line"></div><div class="line">        <span class="keywordflow">for</span> (j = 0; j &lt; endpoint_list.num; j++) {</div><div class="line">            endpoint = &amp;endpoint_list.endpoint[j];</div><div class="line"></div><div class="line">            ret = test_device-&gt;request_reporting(</div><div class="line">                test_device-&gt;handle, endpoint,</div><div class="line">                ARTIK_ZIGBEE_REPORTING_MEASURED_ILLUMINANCE,</div><div class="line">                min_interval, max_interval, illuminance);</div><div class="line">            <span class="keywordflow">if</span> (ret != ARTIK_ZIGBEE_CMD_SUCCESS)</div><div class="line">                showln(<span class="stringliteral">&quot;Failed to request measured illuminance&quot;</span>\</div><div class="line">                    <span class="stringliteral">&quot; reporting for result: %d&quot;</span>, ret);</div><div class="line">            <span class="keywordflow">else</span></div><div class="line">                showln(<span class="stringliteral">&quot;Success to request measured&quot;</span>\</div><div class="line">                    <span class="stringliteral">&quot; illuminance reporting to node 0x%04x&quot;</span>,</div><div class="line">                    endpoint-&gt;node_id);</div><div class="line">        }</div><div class="line"></div><div class="line">        showln(<span class="stringliteral">&quot;Request measured illuminance reporting: testing&quot;</span>\</div><div class="line">            <span class="stringliteral">&quot; succeeded by ep(%d)&quot;</span>, test_device-&gt;endpoint_id);</div><div class="line">    }</div><div class="line"></div><div class="line">    <span class="keywordflow">return</span> ret;</div><div class="line">}</div><div class="line"></div><div class="line"><span class="keyword">static</span> <a class="code" href="artik__error_8h.html#a9b1d9ae639ccc7c1b865a73d74b06c74">artik_error</a> _remote_control_test(<a class="code" href="structartik__zigbee__module.html">artik_zigbee_module</a> *zb)</div><div class="line">{</div><div class="line">    <span class="keyword">struct </span>test_device *test_device = NULL;</div><div class="line">    <span class="keywordtype">int</span> i, count = 0;</div><div class="line">    <span class="keywordtype">bool</span> is_supported = <span class="keyword">false</span>;</div><div class="line"></div><div class="line">    count = get_test_device_count();</div><div class="line">    <span class="keywordflow">for</span> (i = 0; i &lt; count; i++) {</div><div class="line">        test_device = get_test_device(i);</div><div class="line">        <span class="keywordflow">if</span> (test_device-&gt;reset_to_factory_default != NULL</div><div class="line">                &amp;&amp; test_device-&gt;request_reporting != NULL) {</div><div class="line">            is_supported = <span class="keyword">true</span>;</div><div class="line">            <span class="keywordflow">break</span>;</div><div class="line">        }</div><div class="line">    }</div><div class="line"></div><div class="line">    <span class="keywordflow">if</span> (is_supported == <span class="keyword">false</span>)</div><div class="line">        <span class="keywordflow">return</span> <a class="code" href="artik__error_8h.html#ac32e2eaa0134cd9626a55a2587662501">E_NOT_SUPPORTED</a>;</div><div class="line"></div><div class="line">    _do_basic_remote_control(zb);</div><div class="line">    _measured_illuminance_reporting_test(zb);</div><div class="line">    showln(<span class="stringliteral">&quot;Remote control: testing succeeded&quot;</span>);</div><div class="line">    <span class="keywordflow">return</span> <a class="code" href="artik__error_8h.html#a14bc2dfa42241600d567369cd25ddc70">S_OK</a>;</div><div class="line">}</div><div class="line"></div><div class="line"><span class="keyword">static</span> <a class="code" href="artik__error_8h.html#a9b1d9ae639ccc7c1b865a73d74b06c74">artik_error</a> _commissioning_target_start(<a class="code" href="structartik__zigbee__module.html">artik_zigbee_module</a> *zb,</div><div class="line">                                <span class="keywordtype">int</span> index)</div><div class="line">{</div><div class="line">    <span class="keyword">struct </span>test_device *test_device;</div><div class="line">    <span class="keywordtype">int</span> i, count, id;</div><div class="line">    <span class="keywordtype">bool</span> is_supported;</div><div class="line">    <a class="code" href="artik__error_8h.html#a9b1d9ae639ccc7c1b865a73d74b06c74">artik_error</a> ret = <a class="code" href="artik__error_8h.html#a14bc2dfa42241600d567369cd25ddc70">S_OK</a>;</div><div class="line"></div><div class="line">    is_supported = <span class="keyword">false</span>;</div><div class="line">    count = get_test_device_count();</div><div class="line">    <span class="keywordflow">for</span> (i = 0; i &lt; count; i++) {</div><div class="line">        test_device = get_test_device(i);</div><div class="line">        <span class="keywordflow">if</span> (test_device-&gt;ezmode_commissioning_target_start != NULL &amp;&amp;</div><div class="line">            test_device-&gt;ezmode_commissioning_target_stop != NULL) {</div><div class="line">            is_supported = <span class="keyword">true</span>;</div><div class="line">            <span class="keywordflow">break</span>;</div><div class="line">        }</div><div class="line">    }</div><div class="line"></div><div class="line">    <span class="keywordflow">if</span> (is_supported == <span class="keyword">false</span>)</div><div class="line">        <span class="keywordflow">return</span> <a class="code" href="artik__error_8h.html#ac32e2eaa0134cd9626a55a2587662501">E_NOT_SUPPORTED</a>;</div><div class="line"></div><div class="line">    cs_target_testing_index = -1;</div><div class="line">    count = get_test_device_count();</div><div class="line">    <span class="keywordflow">for</span> (i = index; i &lt; count; i++) {</div><div class="line">        test_device = get_test_device(i);</div><div class="line">        <span class="keywordflow">if</span> (!test_device-&gt;ezmode_commissioning_target_start ||</div><div class="line">                !test_device-&gt;ezmode_commissioning_target_stop) {</div><div class="line">            <span class="keywordflow">continue</span>;</div><div class="line">        }</div><div class="line">        showln(<span class="stringliteral">&quot;Target: testing started by ep(%d)&quot;</span>,</div><div class="line">                        test_device-&gt;endpoint_id);</div><div class="line"></div><div class="line">        ret = test_device-&gt;ezmode_commissioning_target_start(</div><div class="line">                        test_device-&gt;handle);</div><div class="line"></div><div class="line">        <span class="keywordflow">if</span> (ret == <a class="code" href="artik__error_8h.html#a14bc2dfa42241600d567369cd25ddc70">S_OK</a>)</div><div class="line">            cs_target_testing_index = i;</div><div class="line">        <span class="keywordflow">else</span></div><div class="line">            showln(<span class="stringliteral">&quot;Commissioning target start failed for&quot;</span>\</div><div class="line">                <span class="stringliteral">&quot; result %d&quot;</span>, ret);</div><div class="line"></div><div class="line">        sleep(1);</div><div class="line">        <span class="keywordflow">break</span>;</div><div class="line">    }</div><div class="line"></div><div class="line">    <span class="keywordflow">if</span> (cs_target_testing_index == -1) {</div><div class="line">        cs_target_testing = <span class="keyword">false</span>;  <span class="comment">/* no more test devices */</span></div><div class="line">        remove_timer(cs_target_timeout_id);</div><div class="line">        showln(<span class="stringliteral">&quot;Done&quot;</span>);</div><div class="line">        showln(<span class="stringliteral">&quot;Device discovering ...&quot;</span>);</div><div class="line">        ret = zb-&gt;<a name="a21"></a><a class="code" href="structartik__zigbee__module.html#af1f240ba2a936735b84a8923cbc972a7">device_discover</a>();</div><div class="line">        <span class="keywordflow">if</span> (ret != <a class="code" href="artik__error_8h.html#a14bc2dfa42241600d567369cd25ddc70">S_OK</a>)</div><div class="line">            log_err(<span class="stringliteral">&quot;Device discover failed: %s&quot;</span>, error_msg(ret));</div><div class="line">    } <span class="keywordflow">else</span> {</div><div class="line">        <span class="keywordtype">id</span> = _add_timer(TIMER_CS_TARGET_TIMEOUT, CS_TARGET_TIMEOUT_SEC);</div><div class="line">        <span class="keywordflow">if</span> (<span class="keywordtype">id</span> &gt; 0) {</div><div class="line">            cs_target_timeout_id = id;</div><div class="line">            cs_target_testing = <span class="keyword">true</span>;</div><div class="line">        } <span class="keywordflow">else</span> {</div><div class="line">            cs_target_testing = <span class="keyword">false</span>;</div><div class="line">            log_err(<span class="stringliteral">&quot;Add timer failed&quot;</span>);</div><div class="line">        }</div><div class="line">    }</div><div class="line"></div><div class="line">    <span class="keywordflow">return</span> ret;</div><div class="line">}</div><div class="line"></div><div class="line"><span class="keyword">static</span> <a class="code" href="artik__error_8h.html#a9b1d9ae639ccc7c1b865a73d74b06c74">artik_error</a> _commissioning_target_run(<a class="code" href="structartik__zigbee__module.html">artik_zigbee_module</a> *zb,</div><div class="line">                        <span class="keyword">enum</span> cs_target_command cmd)</div><div class="line">{</div><div class="line">    <span class="keyword">struct </span>test_device *test_device;</div><div class="line">    <a class="code" href="artik__error_8h.html#a9b1d9ae639ccc7c1b865a73d74b06c74">artik_error</a> result = <a class="code" href="artik__error_8h.html#a14bc2dfa42241600d567369cd25ddc70">S_OK</a>;</div><div class="line"></div><div class="line">    <span class="keywordflow">if</span> (cs_target_testing == <span class="keyword">false</span>) {</div><div class="line">        <span class="keywordflow">switch</span> (cmd) {</div><div class="line">        <span class="keywordflow">case</span> CS_TARGET_START:</div><div class="line">            result = _commissioning_target_start(zb, 0);</div><div class="line">            <span class="keywordflow">break</span>;</div><div class="line">        <span class="keywordflow">case</span> CS_TARGET_STOP:</div><div class="line">            showln(<span class="stringliteral">&quot;Target: testing didn&#39;t start&quot;</span>);</div><div class="line">            <span class="keywordflow">break</span>;</div><div class="line">        <span class="keywordflow">case</span> CS_TARGET_TIMEOUT:</div><div class="line">            <span class="comment">/* ignore this */</span></div><div class="line">            <span class="keywordflow">break</span>;</div><div class="line">        <span class="keywordflow">case</span> CS_TARGET_SUCCESS:</div><div class="line">            showln(<span class="stringliteral">&quot;Commissioning: target success&quot;</span>);</div><div class="line">            <span class="keywordflow">break</span>;</div><div class="line">        <span class="keywordflow">case</span> CS_TARGET_FAILED:</div><div class="line">            showln(<span class="stringliteral">&quot;Commissioning: target failed&quot;</span>);</div><div class="line">            <span class="keywordflow">break</span>;</div><div class="line">        }</div><div class="line">    } <span class="keywordflow">else</span> {</div><div class="line">        <span class="comment">/* read current testing device */</span></div><div class="line">        <span class="keywordflow">if</span> (cs_target_testing_index &lt; 0) {</div><div class="line">            showln(<span class="stringliteral">&quot;Target: testing error with bad index(%d)&quot;</span>,</div><div class="line">                   cs_target_testing_index);</div><div class="line">            cs_target_testing = <span class="keyword">false</span>;</div><div class="line">            showln(<span class="stringliteral">&quot;Done&quot;</span>);</div><div class="line">            result = <a name="a22"></a><a class="code" href="artik__error_8h.html#a0a62b99cf9c0de251c2d4f1cad511214">E_INVALID_VALUE</a>;</div><div class="line">            <span class="keywordflow">goto</span> end;</div><div class="line">        }</div><div class="line">        test_device = get_test_device(cs_target_testing_index);</div><div class="line">        <span class="keywordflow">if</span> (test_device == NULL) {</div><div class="line">            showln(<span class="stringliteral">&quot;Target: testing error with bad index(%d)&quot;</span>,</div><div class="line">                   cs_target_testing_index);</div><div class="line">            cs_target_testing = <span class="keyword">false</span>;</div><div class="line">            showln(<span class="stringliteral">&quot;Done&quot;</span>);</div><div class="line">            result = <a class="code" href="artik__error_8h.html#a0a62b99cf9c0de251c2d4f1cad511214">E_INVALID_VALUE</a>;</div><div class="line">            <span class="keywordflow">goto</span> end;</div><div class="line">        }</div><div class="line"></div><div class="line">        <span class="keywordflow">switch</span> (cmd) {</div><div class="line">        <span class="keywordflow">case</span> CS_TARGET_START:</div><div class="line">            showln(<span class="stringliteral">&quot;Target: testing interrupted by ep(%d)&quot;</span>,</div><div class="line">                   test_device-&gt;endpoint_id);</div><div class="line">            <span class="comment">/* restart testing */</span></div><div class="line">            result = _commissioning_target_start(zb, 0);</div><div class="line">            <span class="keywordflow">break</span>;</div><div class="line">        <span class="keywordflow">case</span> CS_TARGET_STOP:</div><div class="line">            result = test_device-&gt;ezmode_commissioning_target_stop(</div><div class="line">                            test_device-&gt;handle);</div><div class="line">            showln(<span class="stringliteral">&quot;Target: testing stopped by ep(%d) for&quot;</span>\</div><div class="line">                <span class="stringliteral">&quot; result %d&quot;</span>,</div><div class="line">                   test_device-&gt;endpoint_id, result);</div><div class="line">            cs_target_testing = <span class="keyword">false</span>;</div><div class="line">            <span class="keywordflow">break</span>;</div><div class="line">        <span class="keywordflow">case</span> CS_TARGET_TIMEOUT:</div><div class="line">            showln(<span class="stringliteral">&quot;Target: testing timeout by ep(%d)&quot;</span>,</div><div class="line">                   test_device-&gt;endpoint_id);</div><div class="line">            result = test_device-&gt;ezmode_commissioning_target_stop(</div><div class="line">                test_device-&gt;handle);</div><div class="line">            showln(<span class="stringliteral">&quot;Target: testing stopped by ep(%d) for&quot;</span>\</div><div class="line">                <span class="stringliteral">&quot; result %d&quot;</span>,</div><div class="line">                   test_device-&gt;endpoint_id, result);</div><div class="line">            result = _commissioning_target_start(zb,</div><div class="line">                        cs_target_testing_index + 1);</div><div class="line">            <span class="keywordflow">break</span>;</div><div class="line">        <span class="keywordflow">case</span> CS_TARGET_SUCCESS:</div><div class="line">            <span class="keywordflow">if</span> (initiator_reminder) {</div><div class="line">                showln(<span class="stringliteral">&quot;Target: waiting for initiator,&quot;</span>\</div><div class="line">                    <span class="stringliteral">&quot; please run initiator commissioning&quot;</span>);</div><div class="line">                initiator_reminder = <span class="keyword">false</span>;</div><div class="line">            } <span class="keywordflow">else</span></div><div class="line">                showln(<span class="stringliteral">&quot;Target: start success&quot;</span>);</div><div class="line">            <span class="keywordflow">break</span>;</div><div class="line">        <span class="keywordflow">case</span> CS_TARGET_FAILED:</div><div class="line">            showln(<span class="stringliteral">&quot;Target: testing failed by ep(%d)&quot;</span>,</div><div class="line">                   test_device-&gt;endpoint_id);</div><div class="line">            result = _commissioning_target_start(zb,</div><div class="line">                        cs_target_testing_index + 1);</div><div class="line">            <span class="keywordflow">break</span>;</div><div class="line">        }</div><div class="line">    }</div><div class="line"></div><div class="line">end:</div><div class="line"></div><div class="line">    <span class="keywordflow">return</span> result;</div><div class="line">}</div><div class="line"></div><div class="line"><span class="keyword">static</span> <a class="code" href="artik__error_8h.html#a9b1d9ae639ccc7c1b865a73d74b06c74">artik_error</a> _commissioning_initiator_start(<a class="code" href="structartik__zigbee__module.html">artik_zigbee_module</a> *zb,</div><div class="line">                        <span class="keywordtype">int</span> index, <span class="keywordtype">int</span> retry_count)</div><div class="line">{</div><div class="line">    <span class="keyword">struct </span>test_device *test_device;</div><div class="line">    <span class="keywordtype">int</span> i, count;</div><div class="line">    <span class="keywordtype">bool</span> is_supported;</div><div class="line">    <a class="code" href="artik__error_8h.html#a9b1d9ae639ccc7c1b865a73d74b06c74">artik_error</a> result = <a class="code" href="artik__error_8h.html#a14bc2dfa42241600d567369cd25ddc70">S_OK</a>;</div><div class="line"></div><div class="line">    is_supported = <span class="keyword">false</span>;</div><div class="line">    count = get_test_device_count();</div><div class="line">    <span class="keywordflow">for</span> (i = 0; i &lt; count; i++) {</div><div class="line">        test_device = get_test_device(i);</div><div class="line">        <span class="keywordflow">if</span> (test_device-&gt;ezmode_commissioning_initiator_start != NULL &amp;&amp;</div><div class="line">            test_device-&gt;ezmode_commissioning_initiator_stop</div><div class="line">                                != NULL) {</div><div class="line">            is_supported = <span class="keyword">true</span>;</div><div class="line">            <span class="keywordflow">break</span>;</div><div class="line">        }</div><div class="line">    }</div><div class="line"></div><div class="line">    <span class="keywordflow">if</span> (is_supported == <span class="keyword">false</span>)</div><div class="line">        <span class="keywordflow">return</span> <a class="code" href="artik__error_8h.html#ac32e2eaa0134cd9626a55a2587662501">E_NOT_SUPPORTED</a>;</div><div class="line"></div><div class="line">    cs_initiator_testing_index = -1;</div><div class="line">    count = get_test_device_count();</div><div class="line">    <span class="keywordflow">for</span> (i = index; i &lt; count; i++) {</div><div class="line">        test_device = get_test_device(i);</div><div class="line">        <span class="keywordflow">if</span> (!test_device-&gt;ezmode_commissioning_initiator_start ||</div><div class="line">                !test_device-&gt;ezmode_commissioning_initiator_stop) {</div><div class="line">            <span class="keywordflow">continue</span>;</div><div class="line">        }</div><div class="line"></div><div class="line">        showln(<span class="stringliteral">&quot;Initiator: testing started by ep(%d)&quot;</span>,</div><div class="line">                        test_device-&gt;endpoint_id);</div><div class="line"></div><div class="line">        showln(<span class="stringliteral">&quot;Target should run prior to start this&quot;</span>);</div><div class="line">        showln(<span class="stringliteral">&quot;You can stop initiator commissioning test through&quot;</span>\</div><div class="line">            <span class="stringliteral">&quot; command:\&quot;Commissioning initiator stop\&quot;&quot;</span>);</div><div class="line">        sleep(1);</div><div class="line"></div><div class="line">        result = test_device-&gt;ezmode_commissioning_initiator_start(</div><div class="line">                            test_device-&gt;handle);</div><div class="line"></div><div class="line">        <span class="keywordflow">if</span> (result == <a class="code" href="artik__error_8h.html#a14bc2dfa42241600d567369cd25ddc70">S_OK</a>) {</div><div class="line">            showln(<span class="stringliteral">&quot;Initiator: started...&quot;</span>);</div><div class="line">            cs_initiator_testing_index = i;</div><div class="line">        } <span class="keywordflow">else</span></div><div class="line">            showln(<span class="stringliteral">&quot;Commissioning initiator start failed&quot;</span>);</div><div class="line">        <span class="keywordflow">break</span>;</div><div class="line">    }</div><div class="line"></div><div class="line">    <span class="keywordflow">if</span> (cs_initiator_testing_index == -1) {</div><div class="line">        cs_initiator_testing = <span class="keyword">false</span>;   <span class="comment">/* no more test devices */</span></div><div class="line">        showln(<span class="stringliteral">&quot;Done&quot;</span>);</div><div class="line">        showln(<span class="stringliteral">&quot;Device discovering ...&quot;</span>);</div><div class="line">        result = zb-&gt;<a class="code" href="structartik__zigbee__module.html#af1f240ba2a936735b84a8923cbc972a7">device_discover</a>();</div><div class="line">        <span class="keywordflow">if</span> (result != <a class="code" href="artik__error_8h.html#a14bc2dfa42241600d567369cd25ddc70">S_OK</a>)</div><div class="line">            log_err(<span class="stringliteral">&quot;Device discover failed: %s&quot;</span>,</div><div class="line">                            error_msg(result));</div><div class="line">    } <span class="keywordflow">else</span> {</div><div class="line">        cs_initiator_testing = <span class="keyword">true</span>;</div><div class="line">        cs_initiator_retry = retry_count;</div><div class="line">    }</div><div class="line"></div><div class="line">    <span class="keywordflow">return</span> result;</div><div class="line">}</div><div class="line"></div><div class="line"><span class="keyword">static</span> <a class="code" href="artik__error_8h.html#a9b1d9ae639ccc7c1b865a73d74b06c74">artik_error</a> _commissioning_initiator_run(<a class="code" href="structartik__zigbee__module.html">artik_zigbee_module</a> *zb,</div><div class="line">                        <span class="keyword">enum</span> cs_initiator_command cmd)</div><div class="line">{</div><div class="line">    <span class="keyword">struct </span>test_device *test_device;</div><div class="line">    <a class="code" href="artik__error_8h.html#a9b1d9ae639ccc7c1b865a73d74b06c74">artik_error</a> result = <a class="code" href="artik__error_8h.html#a14bc2dfa42241600d567369cd25ddc70">S_OK</a>;</div><div class="line"></div><div class="line">    <span class="keywordflow">if</span> (cs_initiator_testing == <span class="keyword">false</span>) {</div><div class="line">        <span class="keywordflow">switch</span> (cmd) {</div><div class="line">        <span class="keywordflow">case</span> CS_INITIATOR_START:</div><div class="line">            result = _commissioning_initiator_start(zb, 0,</div><div class="line">                        CS_INITIATOR_RETRY_COUNT);</div><div class="line">            <span class="keywordflow">break</span>;</div><div class="line">        <span class="keywordflow">case</span> CS_INITIATOR_STOP:</div><div class="line">            showln(<span class="stringliteral">&quot;Initiator: testing didn&#39;t start&quot;</span>);</div><div class="line">            <span class="keywordflow">break</span>;</div><div class="line">        <span class="keywordflow">case</span> CS_INITIATOR_SUCCESS:</div><div class="line">            showln(<span class="stringliteral">&quot;Commissioning: initiator success&quot;</span>);</div><div class="line">            <span class="keywordflow">break</span>;</div><div class="line">        <span class="keywordflow">case</span> CS_INITIATOR_FAILED:</div><div class="line">            showln(<span class="stringliteral">&quot;Commissioning: initiator failed&quot;</span>);</div><div class="line">            <span class="keywordflow">break</span>;</div><div class="line">        }</div><div class="line">    } <span class="keywordflow">else</span> {</div><div class="line">        <span class="comment">/* read current testing device */</span></div><div class="line">        <span class="keywordflow">if</span> (cs_initiator_testing_index &lt; 0) {</div><div class="line">            showln(<span class="stringliteral">&quot;Initiator: testing error with bad index(%d)&quot;</span>,</div><div class="line">                   cs_initiator_testing_index);</div><div class="line">            cs_initiator_testing = <span class="keyword">false</span>;</div><div class="line">            showln(<span class="stringliteral">&quot;Done&quot;</span>);</div><div class="line">            result = <a class="code" href="artik__error_8h.html#a0a62b99cf9c0de251c2d4f1cad511214">E_INVALID_VALUE</a>;</div><div class="line">            <span class="keywordflow">goto</span> end;</div><div class="line">        }</div><div class="line">        test_device = get_test_device(cs_initiator_testing_index);</div><div class="line">        <span class="keywordflow">if</span> (test_device == NULL) {</div><div class="line">            showln(<span class="stringliteral">&quot;Initiator: testing error with bad index(%d)&quot;</span>,</div><div class="line">                   cs_initiator_testing_index);</div><div class="line">            cs_initiator_testing = <span class="keyword">false</span>;</div><div class="line">            showln(<span class="stringliteral">&quot;Done&quot;</span>);</div><div class="line">            result = <a class="code" href="artik__error_8h.html#a0a62b99cf9c0de251c2d4f1cad511214">E_INVALID_VALUE</a>;</div><div class="line">            <span class="keywordflow">goto</span> end;</div><div class="line">        }</div><div class="line"></div><div class="line">        <span class="keywordflow">switch</span> (cmd) {</div><div class="line">        <span class="keywordflow">case</span> CS_INITIATOR_START:</div><div class="line">            showln(<span class="stringliteral">&quot;Initiator: testing interrupted by ep(%d)&quot;</span>,</div><div class="line">                   test_device-&gt;endpoint_id);</div><div class="line">            <span class="comment">/* restart testing */</span></div><div class="line">            result = _commissioning_initiator_start(zb, 0,</div><div class="line">                        CS_INITIATOR_RETRY_COUNT);</div><div class="line">            <span class="keywordflow">break</span>;</div><div class="line">        <span class="keywordflow">case</span> CS_INITIATOR_STOP:</div><div class="line">            result =</div><div class="line">            test_device-&gt;ezmode_commissioning_initiator_stop(</div><div class="line">                            test_device-&gt;handle);</div><div class="line">            showln(<span class="stringliteral">&quot;Initiator: testing stopped by ep(%d) for&quot;</span>\</div><div class="line">                <span class="stringliteral">&quot; result %d&quot;</span>,</div><div class="line">                   test_device-&gt;endpoint_id, result);</div><div class="line">            cs_initiator_testing = <span class="keyword">false</span>;</div><div class="line">            <span class="keywordflow">break</span>;</div><div class="line">        <span class="keywordflow">case</span> CS_INITIATOR_SUCCESS:</div><div class="line">            showln(<span class="stringliteral">&quot;Initiator: testing succeeded by ep(%d)&quot;</span>,</div><div class="line">                   test_device-&gt;endpoint_id);</div><div class="line">            result = _commissioning_initiator_start(zb,</div><div class="line">                    cs_initiator_testing_index + 1,</div><div class="line">                    CS_INITIATOR_RETRY_COUNT);</div><div class="line">            <span class="keywordflow">break</span>;</div><div class="line">        <span class="keywordflow">case</span> CS_INITIATOR_FAILED:</div><div class="line">            <span class="keywordflow">if</span> (cs_initiator_retry-- &gt; 0) {</div><div class="line">                showln(<span class="stringliteral">&quot;Initiator: failed, retry...&quot;</span>);</div><div class="line">                result = _commissioning_initiator_start(zb,</div><div class="line">                    cs_initiator_testing_index,</div><div class="line">                    cs_initiator_retry);</div><div class="line">            } <span class="keywordflow">else</span> {</div><div class="line">                showln(<span class="stringliteral">&quot;Initiator: testing failed by ep(%d)&quot;</span>,</div><div class="line">                       test_device-&gt;endpoint_id);</div><div class="line">                result = _commissioning_initiator_start(zb,</div><div class="line">                        cs_initiator_testing_index + 1,</div><div class="line">                        CS_INITIATOR_RETRY_COUNT);</div><div class="line">            }</div><div class="line">            <span class="keywordflow">break</span>;</div><div class="line">        }</div><div class="line">    }</div><div class="line"></div><div class="line">end:</div><div class="line">    <span class="keywordflow">return</span> result;</div><div class="line">}</div><div class="line"></div><div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span> _func_entry(func func)</div><div class="line">{</div><div class="line">    current_func = func;</div><div class="line">    current_func(NULL, 0);</div><div class="line">}</div><div class="line"></div><div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span> _func_main_auto_test(<a class="code" href="structartik__zigbee__module.html">artik_zigbee_module</a> *zb)</div><div class="line">{</div><div class="line">    _identify_test(zb);</div><div class="line">    _onoff_test(zb);</div><div class="line">    _levelcontrol_test(zb, <span class="keyword">false</span>);</div><div class="line">    _levelcontrol_test(zb, <span class="keyword">true</span>);</div><div class="line">    _illuminance_test();</div><div class="line">    _remote_control_test(zb);</div><div class="line">}</div><div class="line"></div><div class="line"><span class="keyword">static</span> <a class="code" href="artik__error_8h.html#a9b1d9ae639ccc7c1b865a73d74b06c74">artik_error</a> _func_main_test(<a class="code" href="structartik__zigbee__module.html">artik_zigbee_module</a> *zb, <span class="keywordtype">int</span> n,</div><div class="line">                                <span class="keywordtype">bool</span> *show_done)</div><div class="line">{</div><div class="line">    <a class="code" href="artik__error_8h.html#a9b1d9ae639ccc7c1b865a73d74b06c74">artik_error</a> result;</div><div class="line"></div><div class="line">    *show_done = <span class="keyword">true</span>;</div><div class="line">    result = <a class="code" href="artik__error_8h.html#a14bc2dfa42241600d567369cd25ddc70">S_OK</a>;</div><div class="line">    <span class="keywordflow">switch</span> (n) {</div><div class="line">    <span class="keywordflow">case</span> 3: <span class="comment">/* Identify */</span></div><div class="line">        result = _identify_test(zb);</div><div class="line">        <span class="keywordflow">break</span>;</div><div class="line"></div><div class="line">    <span class="keywordflow">case</span> 4: <span class="comment">/* On/off */</span></div><div class="line">        result = _onoff_test(zb);</div><div class="line">        <span class="keywordflow">break</span>;</div><div class="line"></div><div class="line">    <span class="keywordflow">case</span> 5: <span class="comment">/* Level control */</span></div><div class="line">        result = _levelcontrol_test(zb, <span class="keyword">false</span>);</div><div class="line">        result = _levelcontrol_test(zb, <span class="keyword">true</span>);</div><div class="line">        <span class="keywordflow">break</span>;</div><div class="line"></div><div class="line">    <span class="keywordflow">case</span> 6: <span class="comment">/* Illuminance measurement */</span></div><div class="line">        result = _illuminance_test();</div><div class="line">        <span class="keywordflow">break</span>;</div><div class="line"></div><div class="line">    <span class="keywordflow">case</span> 7: <span class="comment">/* Remote control */</span></div><div class="line">        result = _remote_control_test(zb);</div><div class="line">        <span class="keywordflow">break</span>;</div><div class="line"></div><div class="line">    <span class="keywordflow">case</span> 8: <span class="comment">/* commissioning target start */</span></div><div class="line">        initiator_reminder = <span class="keyword">true</span>;</div><div class="line">        conducted_by_commissioning = <span class="keyword">true</span>;</div><div class="line">        result = _commissioning_target_run(zb, CS_TARGET_START);</div><div class="line">        *show_done = <span class="keyword">false</span>;</div><div class="line">        <span class="keywordflow">break</span>;</div><div class="line"></div><div class="line">    <span class="keywordflow">case</span> 9: <span class="comment">/* commissioning target stop */</span></div><div class="line">        result = _commissioning_target_run(zb, CS_TARGET_STOP);</div><div class="line">        <span class="keywordflow">break</span>;</div><div class="line"></div><div class="line">    <span class="keywordflow">case</span> 10:    <span class="comment">/* commissioning initiator start */</span></div><div class="line">        conducted_by_commissioning = <span class="keyword">true</span>;</div><div class="line">        result = _commissioning_initiator_run(zb, CS_INITIATOR_START);</div><div class="line">        *show_done = <span class="keyword">false</span>;</div><div class="line">        <span class="keywordflow">break</span>;</div><div class="line"></div><div class="line">    <span class="keywordflow">case</span> 11:    <span class="comment">/* commissioning initiator stop */</span></div><div class="line">        result = _commissioning_initiator_run(zb, CS_INITIATOR_STOP);</div><div class="line">        <span class="keywordflow">break</span>;</div><div class="line"></div><div class="line">    <span class="keywordflow">default</span>:</div><div class="line">        result = <a name="a23"></a><a class="code" href="artik__error_8h.html#a62be2564d7e4a7d8148484acff0bb00a">E_TRY_AGAIN</a>;</div><div class="line">        <span class="keywordflow">break</span>;</div><div class="line">    }</div><div class="line"></div><div class="line">    <span class="keywordflow">return</span> result;</div><div class="line">}</div><div class="line"></div><div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span> _func_main_show(<span class="keywordtype">void</span>)</div><div class="line">{</div><div class="line">    showln(<span class="stringliteral">&quot;1: Get device information&quot;</span>);</div><div class="line">    showln(<span class="stringliteral">&quot;2: Auto test&quot;</span>);</div><div class="line">    showln(<span class="stringliteral">&quot;3: Identify&quot;</span>);</div><div class="line">    showln(<span class="stringliteral">&quot;4: On/off&quot;</span>);</div><div class="line">    showln(<span class="stringliteral">&quot;5: Level control&quot;</span>);</div><div class="line">    showln(<span class="stringliteral">&quot;6: Illuminance measurement&quot;</span>);</div><div class="line">    showln(<span class="stringliteral">&quot;7: Remote Control&quot;</span>);</div><div class="line">    showln(<span class="stringliteral">&quot;8: Commissioning target start&quot;</span>);</div><div class="line">    showln(<span class="stringliteral">&quot;9: Commissioning target stop&quot;</span>);</div><div class="line">    showln(<span class="stringliteral">&quot;10: Commissioning initiator start&quot;</span>);</div><div class="line">    showln(<span class="stringliteral">&quot;11: Commissioning initiator stop&quot;</span>);</div><div class="line">    showln(<span class="stringliteral">&quot;0: Setup network&quot;</span>);</div><div class="line">    showln(<span class="stringliteral">&quot;e: Exit (Quit with calling clean and reset device)&quot;</span>);</div><div class="line">    showln(<span class="stringliteral">&quot;q: Exit&quot;</span>);</div><div class="line">}</div><div class="line"></div><div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span> _func_main(<span class="keywordtype">char</span> *input, <span class="keywordtype">int</span> max_size)</div><div class="line">{</div><div class="line">    <span class="keyword">static</span> <span class="keywordtype">int</span> step;</div><div class="line">    <a class="code" href="structartik__zigbee__module.html">artik_zigbee_module</a> *zb;</div><div class="line">    <a name="_a24"></a><a class="code" href="structartik__zigbee__device__info.html">artik_zigbee_device_info</a> device_info;</div><div class="line">    <span class="keywordtype">int</span> n;</div><div class="line">    <span class="keywordtype">bool</span> show_prompt, show_done;</div><div class="line">    <a class="code" href="artik__error_8h.html#a9b1d9ae639ccc7c1b865a73d74b06c74">artik_error</a> ret;</div><div class="line"></div><div class="line">    <span class="keywordflow">if</span> (input == NULL)</div><div class="line">        step = 0;</div><div class="line"></div><div class="line">    zb = (<a class="code" href="structartik__zigbee__module.html">artik_zigbee_module</a> *)<a class="code" href="artik__module_8h.html#a5dd30d1b28a0ab577a06e417cfb28aa5">artik_request_api_module</a>(<span class="stringliteral">&quot;zigbee&quot;</span>);</div><div class="line">    <span class="keywordflow">switch</span> (step) {</div><div class="line">    <span class="keywordflow">case</span> 0:</div><div class="line">        show_hyphen();</div><div class="line">        _func_main_show();</div><div class="line">        show_select();</div><div class="line">        step = 1;</div><div class="line">        <span class="keywordflow">break</span>;</div><div class="line"></div><div class="line">    <span class="keywordflow">case</span> 1:</div><div class="line">        <span class="keywordflow">if</span> (read_q(input, max_size) == <span class="keyword">true</span>) {</div><div class="line">            <a class="code" href="artik__module_8h.html#a2b26deff010fc08966179cb6f34d9f66">artik_release_api_module</a>(zb);</div><div class="line">            exit_loop();</div><div class="line">            <span class="keywordflow">return</span>;</div><div class="line">        }</div><div class="line"></div><div class="line">        <span class="keywordflow">if</span> (read_e(input, max_size) == <span class="keyword">true</span>) {</div><div class="line">            ret = zb-&gt;<a name="a25"></a><a class="code" href="structartik__zigbee__module.html#a7e7410edb4518dc1a001865c6d1cf5c7">reset_local</a>();</div><div class="line">            <span class="keywordflow">if</span> (ret != <a class="code" href="artik__error_8h.html#a14bc2dfa42241600d567369cd25ddc70">S_OK</a>)</div><div class="line">                log_err(<span class="stringliteral">&quot;clean and reset device failed:%s&quot;</span>,</div><div class="line">                    error_msg(ret));</div><div class="line">            <span class="keywordflow">else</span></div><div class="line">                showln(<span class="stringliteral">&quot;clean and reset device success&quot;</span>);</div><div class="line">            <a class="code" href="artik__module_8h.html#a2b26deff010fc08966179cb6f34d9f66">artik_release_api_module</a>(zb);</div><div class="line">            exit_loop();</div><div class="line">            <span class="keywordflow">return</span>;</div><div class="line">        }</div><div class="line"></div><div class="line">        <span class="keywordflow">if</span> (read_lf(input, max_size) == <span class="keyword">true</span>) {</div><div class="line">            show_hyphen();</div><div class="line">            _func_main_show();</div><div class="line">            show_select();</div><div class="line">            <span class="keywordflow">break</span>;</div><div class="line">        }</div><div class="line"></div><div class="line">        show_prompt = <span class="keyword">true</span>;</div><div class="line">        n = read_int(input, max_size, -1);</div><div class="line"></div><div class="line">        <span class="keywordflow">switch</span> (n) {</div><div class="line">        <span class="keywordflow">case</span> 1: <span class="comment">/* Get device information */</span></div><div class="line">            ret = zb-&gt;<a name="a26"></a><a class="code" href="structartik__zigbee__module.html#ac4a4e3523a75a40d70dfe50fcecba3c3">get_discovered_device_list</a>(&amp;device_info);</div><div class="line">            <span class="keywordflow">if</span> (ret == <a class="code" href="artik__error_8h.html#a14bc2dfa42241600d567369cd25ddc70">S_OK</a>)</div><div class="line">                show_device_info(&amp;device_info);</div><div class="line">            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (ret == <a name="a27"></a><a class="code" href="artik__error_8h.html#abcc55041f89fe6efa035f539532d358b">E_ZIGBEE_NO_DEVICE</a>)</div><div class="line">                showln(<span class="stringliteral">&quot;No device&quot;</span>);</div><div class="line">            <span class="keywordflow">else</span></div><div class="line">                showln(<span class="stringliteral">&quot;Get device info failed: %s&quot;</span>,</div><div class="line">                    error_msg(ret));</div><div class="line">            <span class="keywordflow">break</span>;</div><div class="line"></div><div class="line">        <span class="keywordflow">case</span> 2: <span class="comment">/* Auto test */</span></div><div class="line">            _func_main_auto_test(zb);</div><div class="line">            showln(<span class="stringliteral">&quot;Done&quot;</span>);</div><div class="line">            <span class="keywordflow">break</span>;</div><div class="line"></div><div class="line">        <span class="keywordflow">case</span> 0: <span class="comment">/* Setup network */</span></div><div class="line">            _func_entry(_func_network);</div><div class="line">            show_prompt = <span class="keyword">false</span>;</div><div class="line">            <span class="keywordflow">break</span>;</div><div class="line"></div><div class="line">        <span class="keywordflow">default</span>:</div><div class="line">            ret = _func_main_test(zb, n, &amp;show_done);</div><div class="line">            <span class="keywordflow">if</span> (ret == <a class="code" href="artik__error_8h.html#a14bc2dfa42241600d567369cd25ddc70">S_OK</a>) {</div><div class="line">                <span class="keywordflow">if</span> (show_done)</div><div class="line">                    showln(<span class="stringliteral">&quot;Done&quot;</span>);</div><div class="line">            } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (ret == <a class="code" href="artik__error_8h.html#ac32e2eaa0134cd9626a55a2587662501">E_NOT_SUPPORTED</a>)</div><div class="line">                showln(<span class="stringliteral">&quot;No device to process this test&quot;</span>);</div><div class="line">            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (ret == <a class="code" href="artik__error_8h.html#a62be2564d7e4a7d8148484acff0bb00a">E_TRY_AGAIN</a>) {</div><div class="line">                show_retry();</div><div class="line">                show_prompt = <span class="keyword">false</span>;</div><div class="line">            } <span class="keywordflow">else</span></div><div class="line">                showln(<span class="stringliteral">&quot;Test failed: %s&quot;</span>, error_msg(ret));</div><div class="line">            <span class="keywordflow">break</span>;</div><div class="line">        }</div><div class="line"></div><div class="line">        <span class="keywordflow">if</span> (show_prompt) {</div><div class="line">            show_hyphen();</div><div class="line">            _func_main_show();</div><div class="line">            show_select();</div><div class="line">        }</div><div class="line">        <span class="keywordflow">break</span>;</div><div class="line">    }</div><div class="line"></div><div class="line">    <a class="code" href="artik__module_8h.html#a2b26deff010fc08966179cb6f34d9f66">artik_release_api_module</a>(zb);</div><div class="line">}</div><div class="line"></div><div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span> _func_network_show(<a class="code" href="structartik__zigbee__module.html">artik_zigbee_module</a> *zb)</div><div class="line">{</div><div class="line">    <a class="code" href="artik__zigbee_8h.html#ae900b8b14030852e7649bd8a808f2234">artik_zigbee_network_state</a> state;</div><div class="line">    <a class="code" href="artik__zigbee_8h.html#a327408635f502a0425b022212547fbd6">artik_zigbee_node_type</a> type;</div><div class="line">    <a class="code" href="artik__error_8h.html#a9b1d9ae639ccc7c1b865a73d74b06c74">artik_error</a> ret;</div><div class="line">    <span class="keywordtype">bool</span> network;</div><div class="line"></div><div class="line">    network = <span class="keyword">false</span>;</div><div class="line">    ret = zb-&gt;<a name="a28"></a><a class="code" href="structartik__zigbee__module.html#a63e140c2ba60221c4783b7efc0863f69">network_request_my_network_status</a>(&amp;state);</div><div class="line">    <span class="keywordflow">if</span> (ret == <a class="code" href="artik__error_8h.html#a14bc2dfa42241600d567369cd25ddc70">S_OK</a>) {</div><div class="line">        show_network_status(state);</div><div class="line">        <span class="keywordflow">if</span> (state != ARTIK_ZIGBEE_NO_NETWORK) {</div><div class="line">            network = <span class="keyword">true</span>;</div><div class="line">            ret = zb-&gt;<a name="a29"></a><a class="code" href="structartik__zigbee__module.html#a985fa972f7d8ce86122fd75afed2075b">device_request_my_node_type</a>(&amp;type);</div><div class="line">            <span class="keywordflow">if</span> (ret == <a class="code" href="artik__error_8h.html#a14bc2dfa42241600d567369cd25ddc70">S_OK</a>)</div><div class="line">                show_node_type(type);</div><div class="line">            <span class="keywordflow">else</span></div><div class="line">                log_err(<span class="stringliteral">&quot;Get device node type failed: %s&quot;</span>,</div><div class="line">                    error_msg(ret));</div><div class="line">        } <span class="keywordflow">else</span></div><div class="line">            showln(<span class="stringliteral">&quot;Network: Non Exist&quot;</span>);</div><div class="line">    } <span class="keywordflow">else</span></div><div class="line">        log_err(<span class="stringliteral">&quot;Get network status failed: %s&quot;</span>, error_msg(ret));</div><div class="line"></div><div class="line">    show_hyphen();</div><div class="line">    showln(<span class="stringliteral">&quot;1: Form network&quot;</span>);</div><div class="line">    showln(<span class="stringliteral">&quot;2: Form network (advance)&quot;</span>);</div><div class="line">    showln(<span class="stringliteral">&quot;3: Join network&quot;</span>);</div><div class="line">    showln(<span class="stringliteral">&quot;4: Join network (advance)&quot;</span>);</div><div class="line">    showln(<span class="stringliteral">&quot;5: Leave network&quot;</span>);</div><div class="line">    showln(<span class="stringliteral">&quot;6: Get network state&quot;</span>);</div><div class="line">    showln(<span class="stringliteral">&quot;7: Discover device&quot;</span>);</div><div class="line"></div><div class="line">    <span class="keywordflow">if</span> (network)</div><div class="line">        showln(<span class="stringliteral">&quot;8: Start testing&quot;</span>);</div><div class="line">    <span class="keywordflow">else</span></div><div class="line">        showln(<span class="stringliteral">&quot;8: Start testing without network&quot;</span>);</div><div class="line"></div><div class="line">    showln(<span class="stringliteral">&quot;9: Network permit join&quot;</span>);</div><div class="line">    showln(<span class="stringliteral">&quot;10: Network find and join&quot;</span>);</div><div class="line">    showln(<span class="stringliteral">&quot;11: Network stop scan&quot;</span>);</div><div class="line">    showln(<span class="stringliteral">&quot;e: Exit (Quit with calling clean and reset device)&quot;</span>);</div><div class="line">    showln(<span class="stringliteral">&quot;q: Exit&quot;</span>);</div><div class="line">}</div><div class="line"></div><div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span> _func_network_found_show(<span class="keywordtype">void</span>)</div><div class="line">{</div><div class="line">    <span class="keywordtype">int</span> i = 1;</div><div class="line"></div><div class="line">    show_hyphen();</div><div class="line">    <span class="keywordflow">if</span> (nwk_find_size &lt;= 0)</div><div class="line">        showln(<span class="stringliteral">&quot;No network found, please find network firstly&quot;</span>);</div><div class="line">    <span class="keywordflow">else</span> {</div><div class="line">        showln(<span class="stringliteral">&quot;Select one network to join&quot;</span>);</div><div class="line">        <span class="keywordflow">for</span> (i = 1; i &lt;= nwk_find_size; i++)</div><div class="line">            showln(<span class="stringliteral">&quot;%d: network channel(%d), tx power(%d),&quot;</span>\</div><div class="line">                <span class="stringliteral">&quot; pan id(0x%04X)&quot;</span>, i,</div><div class="line">                nwk_found_list[i - 1].network_info.channel,</div><div class="line">                nwk_found_list[i - 1].<a name="a30"></a>network_info.<a name="a31"></a>tx_power,</div><div class="line">                nwk_found_list[i - 1].network_info.<a name="a32"></a>pan_id);</div><div class="line">    }</div><div class="line">}</div><div class="line"></div><div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span> _func_network_found_end_show(<span class="keywordtype">void</span>)</div><div class="line">{</div><div class="line">    showln(<span class="stringliteral">&quot;9: Find Network&quot;</span>);</div><div class="line">    showln(<span class="stringliteral">&quot;0: Setup Network&quot;</span>);</div><div class="line">    showln(<span class="stringliteral">&quot;e: Exit (Quit with calling clean and reset device)&quot;</span>);</div><div class="line">    showln(<span class="stringliteral">&quot;q: Exit&quot;</span>);</div><div class="line">    show_hyphen();</div><div class="line">    show_select();</div><div class="line">}</div><div class="line"></div><div class="line"><span class="keyword">static</span> <a class="code" href="artik__error_8h.html#a9b1d9ae639ccc7c1b865a73d74b06c74">artik_error</a> _find_network(<a class="code" href="structartik__zigbee__module.html">artik_zigbee_module</a> *zb)</div><div class="line">{</div><div class="line">    <a class="code" href="artik__error_8h.html#a9b1d9ae639ccc7c1b865a73d74b06c74">artik_error</a> ret;</div><div class="line"></div><div class="line">    showln(<span class="stringliteral">&quot;Finding network ...&quot;</span>);</div><div class="line">    showln(<span class="stringliteral">&quot;Select one network to join&quot;</span>);</div><div class="line">    nwk_find_size = 0;</div><div class="line">    ret = zb-&gt;<a name="a33"></a><a class="code" href="structartik__zigbee__module.html#aedb4b0d1e19183d1b473697d0637b783">network_find</a>();</div><div class="line">    <span class="keywordflow">if</span> (ret != <a class="code" href="artik__error_8h.html#a14bc2dfa42241600d567369cd25ddc70">S_OK</a>) {</div><div class="line">        log_err(<span class="stringliteral">&quot;Find network failed:%s&quot;</span>, error_msg(ret));</div><div class="line">        showln(<span class="stringliteral">&quot;Done&quot;</span>);</div><div class="line">    }</div><div class="line">    <span class="keywordflow">return</span> ret;</div><div class="line">}</div><div class="line"></div><div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span> _func_network_find_join(<span class="keywordtype">char</span> *input, <span class="keywordtype">int</span> max_size)</div><div class="line">{</div><div class="line">    <span class="keyword">static</span> <span class="keywordtype">int</span> step = 0;</div><div class="line">    <a class="code" href="structartik__zigbee__module.html">artik_zigbee_module</a> *zb = NULL;</div><div class="line">    <span class="keywordtype">int</span> n = 0;</div><div class="line">    <a class="code" href="artik__error_8h.html#a9b1d9ae639ccc7c1b865a73d74b06c74">artik_error</a> ret = <a class="code" href="artik__error_8h.html#a487d95c56515019592eb5e2e86491b0d">E_ZIGBEE_ERROR</a>;</div><div class="line"></div><div class="line">    <span class="keywordflow">if</span> (input == NULL)</div><div class="line">        step = 0;</div><div class="line"></div><div class="line">    zb = (<a class="code" href="structartik__zigbee__module.html">artik_zigbee_module</a> *) <a class="code" href="artik__module_8h.html#a5dd30d1b28a0ab577a06e417cfb28aa5">artik_request_api_module</a>(<span class="stringliteral">&quot;zigbee&quot;</span>);</div><div class="line">    <span class="keywordflow">switch</span> (step) {</div><div class="line">    <span class="keywordflow">case</span> 0:</div><div class="line">        ret = _find_network(zb);</div><div class="line">        step = 1;</div><div class="line">        <span class="keywordflow">break</span>;</div><div class="line"></div><div class="line">    <span class="keywordflow">case</span> 1:</div><div class="line">        <span class="keywordflow">if</span> (read_q(input, max_size)) {</div><div class="line">            <a class="code" href="artik__module_8h.html#a2b26deff010fc08966179cb6f34d9f66">artik_release_api_module</a>(zb);</div><div class="line">            exit_loop();</div><div class="line">            <span class="keywordflow">return</span>;</div><div class="line">        }</div><div class="line"></div><div class="line">        <span class="keywordflow">if</span> (read_e(input, max_size) == <span class="keyword">true</span>) {</div><div class="line">            ret = zb-&gt;<a class="code" href="structartik__zigbee__module.html#a7e7410edb4518dc1a001865c6d1cf5c7">reset_local</a>();</div><div class="line">            <span class="keywordflow">if</span> (ret != <a class="code" href="artik__error_8h.html#a14bc2dfa42241600d567369cd25ddc70">S_OK</a>)</div><div class="line">                log_err(<span class="stringliteral">&quot;clean and reset device failed:%s&quot;</span>,</div><div class="line">                    error_msg(ret));</div><div class="line">            <span class="keywordflow">else</span></div><div class="line">                showln(<span class="stringliteral">&quot;clean and reset device success&quot;</span>);</div><div class="line">            <a class="code" href="artik__module_8h.html#a2b26deff010fc08966179cb6f34d9f66">artik_release_api_module</a>(zb);</div><div class="line">            exit_loop();</div><div class="line">            <span class="keywordflow">return</span>;</div><div class="line">        }</div><div class="line"></div><div class="line">        <span class="keywordflow">if</span> (read_lf(input, max_size) == <span class="keyword">true</span>) {</div><div class="line">            _func_network_found_show();</div><div class="line">            _func_network_found_end_show();</div><div class="line">            <span class="keywordflow">break</span>;</div><div class="line">        }</div><div class="line"></div><div class="line">        n = read_int(input, max_size, -1);</div><div class="line">        <span class="keywordflow">if</span> ((n &lt; 0) || (n &gt; 9)) {</div><div class="line">            showln(<span class="stringliteral">&quot;Please input legal value&quot;</span>);</div><div class="line">            <span class="keywordflow">break</span>;</div><div class="line">        }</div><div class="line"></div><div class="line">        <span class="keywordflow">switch</span> (n) {</div><div class="line">        <span class="keywordflow">case</span> 0:</div><div class="line">            _func_entry(_func_network);</div><div class="line">            <span class="keywordflow">break</span>;</div><div class="line"></div><div class="line">        <span class="keywordflow">case</span> 9:</div><div class="line">            ret = _find_network(zb);</div><div class="line">            <span class="keywordflow">break</span>;</div><div class="line"></div><div class="line">        <span class="keywordflow">default</span>:</div><div class="line">            <span class="keywordflow">if</span> (nwk_find_size &lt;= 0)</div><div class="line">                showln(<span class="stringliteral">&quot;No network found, please find&quot;</span>\</div><div class="line">                    <span class="stringliteral">&quot; network firstly&quot;</span>);</div><div class="line">            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (n &gt; nwk_find_size)</div><div class="line">                showln(<span class="stringliteral">&quot;The selection is out of the&quot;</span>\</div><div class="line">                    <span class="stringliteral">&quot; network found size %d&quot;</span>,</div><div class="line">                        nwk_find_size);</div><div class="line">            <span class="keywordflow">else</span> {</div><div class="line">                showln(<span class="stringliteral">&quot;Join network channel(%d), tx power(%d)&quot;</span>\</div><div class="line">                    <span class="stringliteral">&quot;, pan id(0x%04X)&quot;</span>,</div><div class="line">                    nwk_found_list[n - 1].\</div><div class="line">                    network_info.channel,</div><div class="line">                    nwk_found_list[n - 1].\
                                network_info.tx_power,</div><div class="line">                    nwk_found_list[n - 1].\
                                network_info.pan_id);</div><div class="line">                ret = zb-&gt;<a name="a34"></a><a class="code" href="structartik__zigbee__module.html#af93fb343dc57d575e7250fbdf29bebc7">network_join_manually</a>(</div><div class="line">                    &amp;nwk_found_list[n - 1].network_info);</div><div class="line">                conducted_by_commissioning = <span class="keyword">false</span>;</div><div class="line">                <span class="keywordflow">if</span> (ret != <a class="code" href="artik__error_8h.html#a14bc2dfa42241600d567369cd25ddc70">S_OK</a>) {</div><div class="line">                    log_err(<span class="stringliteral">&quot;Join network failed: %s&quot;</span>,</div><div class="line">                        error_msg(ret));</div><div class="line">                    showln(<span class="stringliteral">&quot;Done&quot;</span>);</div><div class="line">                } <span class="keywordflow">else</span> {</div><div class="line">                    showln(<span class="stringliteral">&quot;Done&quot;</span>);</div><div class="line">                    showln(<span class="stringliteral">&quot;Device discovering ...&quot;</span>);</div><div class="line">                    ret = zb-&gt;<a class="code" href="structartik__zigbee__module.html#af1f240ba2a936735b84a8923cbc972a7">device_discover</a>();</div><div class="line">                    <span class="keywordflow">if</span> (ret != <a class="code" href="artik__error_8h.html#a14bc2dfa42241600d567369cd25ddc70">S_OK</a>)</div><div class="line">                        log_err(<span class="stringliteral">&quot;Device discover&quot;</span>\</div><div class="line">                            <span class="stringliteral">&quot; failed: %s&quot;</span>,</div><div class="line">                            error_msg(ret));</div><div class="line">                }</div><div class="line">            }</div><div class="line">            <span class="keywordflow">break</span>;</div><div class="line">        }</div><div class="line">        <span class="keywordflow">break</span>;</div><div class="line">    }</div><div class="line"></div><div class="line">    <a class="code" href="artik__module_8h.html#a2b26deff010fc08966179cb6f34d9f66">artik_release_api_module</a>(zb);</div><div class="line">}</div><div class="line"></div><div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span> _func_network(<span class="keywordtype">char</span> *input, <span class="keywordtype">int</span> max_size)</div><div class="line">{</div><div class="line">    <span class="keyword">static</span> <a name="_a35"></a><a class="code" href="structartik__zigbee__network__info.html">artik_zigbee_network_info</a> set_network_info;</div><div class="line">    <span class="keyword">static</span> <span class="keywordtype">int</span> step;</div><div class="line">    <a class="code" href="structartik__zigbee__module.html">artik_zigbee_module</a> *zb;</div><div class="line">    <a class="code" href="artik__zigbee_8h.html#ae900b8b14030852e7649bd8a808f2234">artik_zigbee_network_state</a> state;</div><div class="line">    <a class="code" href="artik__zigbee_8h.html#a327408635f502a0425b022212547fbd6">artik_zigbee_node_type</a> type;</div><div class="line">    <span class="keywordtype">int</span> n;</div><div class="line"></div><div class="line">    <a class="code" href="artik__error_8h.html#a9b1d9ae639ccc7c1b865a73d74b06c74">artik_error</a> ret = <a class="code" href="artik__error_8h.html#a487d95c56515019592eb5e2e86491b0d">E_ZIGBEE_ERROR</a>;</div><div class="line"></div><div class="line">    <span class="keywordflow">if</span> (input == NULL)</div><div class="line">        step = 0;</div><div class="line"></div><div class="line">    zb = (<a class="code" href="structartik__zigbee__module.html">artik_zigbee_module</a> *)<a class="code" href="artik__module_8h.html#a5dd30d1b28a0ab577a06e417cfb28aa5">artik_request_api_module</a>(<span class="stringliteral">&quot;zigbee&quot;</span>);</div><div class="line">    <span class="keywordflow">switch</span> (step) {</div><div class="line">    <span class="keywordflow">case</span> 0:</div><div class="line">        <span class="keywordflow">if</span> (network_started == <span class="keyword">false</span>) {</div><div class="line">            ret = zb-&gt;<a name="a36"></a><a class="code" href="structartik__zigbee__module.html#a87232e87d1bc09915645d373a63add4c">network_start</a>(&amp;state);</div><div class="line">            <span class="keywordflow">if</span> (ret == <a class="code" href="artik__error_8h.html#a14bc2dfa42241600d567369cd25ddc70">S_OK</a> &amp;&amp; state == ARTIK_ZIGBEE_JOINED_NETWORK)</div><div class="line">                showln(<span class="stringliteral">&quot;Former Network Resumed&quot;</span>);</div><div class="line">            network_started = <span class="keyword">true</span>;</div><div class="line">        }</div><div class="line"></div><div class="line">        _func_network_show(zb);</div><div class="line">        show_select();</div><div class="line">        step = 1;</div><div class="line">        <span class="keywordflow">break</span>;</div><div class="line"></div><div class="line">    <span class="keywordflow">case</span> 1:</div><div class="line">        <span class="keywordflow">if</span> (read_q(input, max_size)) {</div><div class="line">            <a class="code" href="artik__module_8h.html#a2b26deff010fc08966179cb6f34d9f66">artik_release_api_module</a>(zb);</div><div class="line">            exit_loop();</div><div class="line">            <span class="keywordflow">return</span>;</div><div class="line">        }</div><div class="line"></div><div class="line">        <span class="keywordflow">if</span> (read_e(input, max_size) == <span class="keyword">true</span>) {</div><div class="line">            ret = zb-&gt;<a class="code" href="structartik__zigbee__module.html#a7e7410edb4518dc1a001865c6d1cf5c7">reset_local</a>();</div><div class="line">            <span class="keywordflow">if</span> (ret != <a class="code" href="artik__error_8h.html#a14bc2dfa42241600d567369cd25ddc70">S_OK</a>)</div><div class="line">                log_err(<span class="stringliteral">&quot;clean and reset device failed:%s&quot;</span>,</div><div class="line">                    error_msg(ret));</div><div class="line">            <span class="keywordflow">else</span></div><div class="line">                showln(<span class="stringliteral">&quot;clean and reset device success&quot;</span>);</div><div class="line">            <a class="code" href="artik__module_8h.html#a2b26deff010fc08966179cb6f34d9f66">artik_release_api_module</a>(zb);</div><div class="line">            exit_loop();</div><div class="line">            <span class="keywordflow">return</span>;</div><div class="line">        }</div><div class="line"></div><div class="line">        <span class="keywordflow">if</span> (read_lf(input, max_size) == <span class="keyword">true</span>) {</div><div class="line">            show_hyphen();</div><div class="line">            _func_network_show(zb);</div><div class="line">            show_select();</div><div class="line">            <span class="keywordflow">break</span>;</div><div class="line">        }</div><div class="line"></div><div class="line">        n = read_int(input, max_size, -1);</div><div class="line">        <span class="keywordflow">switch</span> (n) {</div><div class="line">        <span class="keywordflow">case</span> 1: <span class="comment">/* Form network */</span></div><div class="line">            ret = zb-&gt;<a name="a37"></a><a class="code" href="structartik__zigbee__module.html#abf858f6d9a346bd96caf23f3a4155f7a">network_form</a>();</div><div class="line">            conducted_by_commissioning = <span class="keyword">false</span>;</div><div class="line">            <span class="keywordflow">if</span> (ret == <a class="code" href="artik__error_8h.html#a14bc2dfa42241600d567369cd25ddc70">S_OK</a>)</div><div class="line">                showln(<span class="stringliteral">&quot;Wait for response&quot;</span>);</div><div class="line">            <span class="keywordflow">else</span> {</div><div class="line">                showln(<span class="stringliteral">&quot;Network form failed&quot;</span>);</div><div class="line">                showln(<span class="stringliteral">&quot;Done&quot;</span>);</div><div class="line">            }</div><div class="line">            <span class="keywordflow">break</span>;</div><div class="line"></div><div class="line">        <span class="keywordflow">case</span> 2: <span class="comment">/* Form network (advance) */</span></div><div class="line">            show_request_channel();</div><div class="line">            step = 2;</div><div class="line">            <span class="keywordflow">break</span>;</div><div class="line"></div><div class="line">        <span class="keywordflow">case</span> 3: <span class="comment">/* Join network */</span></div><div class="line">            ret = zb-&gt;<a name="a38"></a><a class="code" href="structartik__zigbee__module.html#a62511eb51763b1dec003ac50602b7418">network_join</a>();</div><div class="line">            conducted_by_commissioning = <span class="keyword">false</span>;</div><div class="line">            <span class="keywordflow">if</span> (ret == <a class="code" href="artik__error_8h.html#a14bc2dfa42241600d567369cd25ddc70">S_OK</a>)</div><div class="line">                showln(<span class="stringliteral">&quot;Wait for response&quot;</span>);</div><div class="line">            <span class="keywordflow">else</span> {</div><div class="line">                showln(<span class="stringliteral">&quot;Network join failed&quot;</span>);</div><div class="line">                showln(<span class="stringliteral">&quot;Done&quot;</span>);</div><div class="line">            }</div><div class="line">            <span class="keywordflow">break</span>;</div><div class="line"></div><div class="line">        <span class="keywordflow">case</span> 4: <span class="comment">/* Join network (advance) */</span></div><div class="line">            show_request_channel();</div><div class="line">            step = 5;</div><div class="line">            <span class="keywordflow">break</span>;</div><div class="line"></div><div class="line">        <span class="keywordflow">case</span> 5: <span class="comment">/* Leave network */</span></div><div class="line">            ret = zb-&gt;<a name="a39"></a><a class="code" href="structartik__zigbee__module.html#a1beaa71fba91fd293e6118235b2ca7be">network_leave</a>();</div><div class="line">            <span class="keywordflow">if</span> (ret != <a class="code" href="artik__error_8h.html#a14bc2dfa42241600d567369cd25ddc70">S_OK</a>)</div><div class="line">                log_err(<span class="stringliteral">&quot;Network leave failed: %s\n&quot;</span>,</div><div class="line">                    error_msg(ret));</div><div class="line">            showln(<span class="stringliteral">&quot;Done&quot;</span>);</div><div class="line">            <span class="keywordflow">break</span>;</div><div class="line"></div><div class="line">        <span class="keywordflow">case</span> 6: <span class="comment">/* Get network state */</span></div><div class="line">            ret = zb-&gt;<a class="code" href="structartik__zigbee__module.html#a63e140c2ba60221c4783b7efc0863f69">network_request_my_network_status</a>(&amp;state);</div><div class="line">            <span class="keywordflow">if</span> (ret == <a class="code" href="artik__error_8h.html#a14bc2dfa42241600d567369cd25ddc70">S_OK</a>)</div><div class="line">                show_network_status(state);</div><div class="line">            <span class="keywordflow">else</span></div><div class="line">                log_err(<span class="stringliteral">&quot;Get network status failed: %s&quot;</span>,</div><div class="line">                    error_msg(ret));</div><div class="line">            ret = zb-&gt;<a class="code" href="structartik__zigbee__module.html#a985fa972f7d8ce86122fd75afed2075b">device_request_my_node_type</a>(&amp;type);</div><div class="line">            <span class="keywordflow">if</span> (ret == <a class="code" href="artik__error_8h.html#a14bc2dfa42241600d567369cd25ddc70">S_OK</a>)</div><div class="line">                show_node_type(type);</div><div class="line">            <span class="keywordflow">else</span></div><div class="line">                log_err(<span class="stringliteral">&quot;Get device node type failed: %s&quot;</span>,</div><div class="line">                    error_msg(ret));</div><div class="line">            <span class="keywordflow">break</span>;</div><div class="line"></div><div class="line">        <span class="keywordflow">case</span> 7: <span class="comment">/* Discover device */</span></div><div class="line">            ret = zb-&gt;<a name="a40"></a><a class="code" href="structartik__zigbee__module.html#aaa566c3675e92d7ce202f5a29db0a3a7">set_discover_cycle_time</a>(10);</div><div class="line">            <span class="keywordflow">if</span> (ret == <a class="code" href="artik__error_8h.html#a14bc2dfa42241600d567369cd25ddc70">S_OK</a>)</div><div class="line">                showln(<span class="stringliteral">&quot;Set discover cycle time to 10 minutes&quot;</span>);</div><div class="line">            <span class="keywordflow">else</span></div><div class="line">                log_err(<span class="stringliteral">&quot;Set discover cycle time error: %s&quot;</span>,</div><div class="line">                    error_msg(ret));</div><div class="line"></div><div class="line">            ret = zb-&gt;<a class="code" href="structartik__zigbee__module.html#af1f240ba2a936735b84a8923cbc972a7">device_discover</a>();</div><div class="line">            <span class="keywordflow">if</span> (ret == <a class="code" href="artik__error_8h.html#a14bc2dfa42241600d567369cd25ddc70">S_OK</a>)</div><div class="line">                showln(<span class="stringliteral">&quot;Wait response&quot;</span>);</div><div class="line">            <span class="keywordflow">else</span> {</div><div class="line">                log_err(<span class="stringliteral">&quot;Network discover failed: %s\n&quot;</span>,</div><div class="line">                    error_msg(ret));</div><div class="line">                showln(<span class="stringliteral">&quot;Done&quot;</span>);</div><div class="line">            }</div><div class="line">            <span class="keywordflow">break</span>;</div><div class="line"></div><div class="line">        <span class="keywordflow">case</span> 8: <span class="comment">/* Start testing */</span></div><div class="line">            _func_entry(_func_main);</div><div class="line">            <span class="keywordflow">break</span>;</div><div class="line"></div><div class="line">        <span class="keywordflow">case</span> 9:</div><div class="line">            ret = zb-&gt;<a name="a41"></a><a class="code" href="structartik__zigbee__module.html#a7734f3fd2c2c7d146658100f4d185b0b">network_permitjoin</a>(EASY_PJOIN_DURATION);</div><div class="line">            <span class="keywordflow">if</span> (ret != <a class="code" href="artik__error_8h.html#a14bc2dfa42241600d567369cd25ddc70">S_OK</a>)</div><div class="line">                log_err(<span class="stringliteral">&quot;Permit join failed:%s&quot;</span>,</div><div class="line">                    error_msg(ret));</div><div class="line">            <span class="keywordflow">else</span></div><div class="line">                showln(<span class="stringliteral">&quot;Permit join for %d seconds&quot;</span>,</div><div class="line">                    EASY_PJOIN_DURATION);</div><div class="line">            showln(<span class="stringliteral">&quot;Done&quot;</span>);</div><div class="line">            <span class="keywordflow">break</span>;</div><div class="line"></div><div class="line">        <span class="keywordflow">case</span> 10:</div><div class="line">            _func_entry(_func_network_find_join);</div><div class="line">            <span class="keywordflow">break</span>;</div><div class="line"></div><div class="line">        <span class="keywordflow">case</span> 11:</div><div class="line">            ret = zb-&gt;<a name="a42"></a><a class="code" href="structartik__zigbee__module.html#a8f1f09b9188c1052860f202e41c31784">network_stop_scan</a>();</div><div class="line">            <span class="keywordflow">if</span> (ret != <a class="code" href="artik__error_8h.html#a14bc2dfa42241600d567369cd25ddc70">S_OK</a>)</div><div class="line">                log_err(<span class="stringliteral">&quot;Network stop scanning failed: %s&quot;</span>,</div><div class="line">                    error_msg(ret));</div><div class="line">            <span class="keywordflow">else</span></div><div class="line">                showln(<span class="stringliteral">&quot;Network stop scanning success&quot;</span>);</div><div class="line">            showln(<span class="stringliteral">&quot;Done&quot;</span>);</div><div class="line">            <span class="keywordflow">break</span>;</div><div class="line"></div><div class="line">        <span class="keywordflow">default</span>:</div><div class="line">            show_retry();</div><div class="line">            <span class="keywordflow">break</span>;</div><div class="line">        }</div><div class="line"></div><div class="line">        <span class="keywordflow">break</span>;</div><div class="line"></div><div class="line">    <span class="keywordflow">case</span> 2: <span class="comment">/* network form - set channel */</span></div><div class="line">        ret = read_channel(input, max_size, &amp;set_network_info.<a name="a43"></a>channel);</div><div class="line">        <span class="keywordflow">if</span> (ret == <a class="code" href="artik__error_8h.html#a14bc2dfa42241600d567369cd25ddc70">S_OK</a>) {</div><div class="line">            show_request_tx();</div><div class="line">            step = 3;</div><div class="line">        }</div><div class="line">        <span class="keywordflow">break</span>;</div><div class="line"></div><div class="line">    <span class="keywordflow">case</span> 3: <span class="comment">/* network form - set tx */</span></div><div class="line">        ret = read_tx(input, max_size, &amp;set_network_info.tx_power);</div><div class="line">        <span class="keywordflow">if</span> (ret == <a class="code" href="artik__error_8h.html#a14bc2dfa42241600d567369cd25ddc70">S_OK</a>) {</div><div class="line">            show_request_pan_id();</div><div class="line">            step = 4;</div><div class="line">        }</div><div class="line">        <span class="keywordflow">break</span>;</div><div class="line"></div><div class="line">    <span class="keywordflow">case</span> 4: <span class="comment">/* network form - set pan id */</span></div><div class="line">        ret = read_pan_id(input, max_size, &amp;set_network_info.pan_id);</div><div class="line">        <span class="keywordflow">if</span> (ret == <a class="code" href="artik__error_8h.html#a14bc2dfa42241600d567369cd25ddc70">S_OK</a>) {</div><div class="line">            showln(<span class="stringliteral">&quot;Form network channel(%d) TX(%d) PAN ID(0x%x):&quot;</span>,</div><div class="line">                   set_network_info.channel,</div><div class="line">                   set_network_info.tx_power,</div><div class="line">                   set_network_info.pan_id);</div><div class="line">            ret = zb-&gt;<a name="a44"></a><a class="code" href="structartik__zigbee__module.html#a74c8f5c23ace37bbd1886bbaedb35a95">network_form_manually</a>(&amp;set_network_info);</div><div class="line">            conducted_by_commissioning = <span class="keyword">false</span>;</div><div class="line">            <span class="keywordflow">if</span> (ret != <a class="code" href="artik__error_8h.html#a14bc2dfa42241600d567369cd25ddc70">S_OK</a>)</div><div class="line">                log_err(<span class="stringliteral">&quot;Manually form network failed: %s&quot;</span>,</div><div class="line">                    error_msg(ret));</div><div class="line">            <span class="keywordflow">else</span></div><div class="line">                showln(<span class="stringliteral">&quot;Manually form network success\nDone&quot;</span>);</div><div class="line">            step = 1;</div><div class="line">        }</div><div class="line">        <span class="keywordflow">break</span>;</div><div class="line"></div><div class="line">    <span class="keywordflow">case</span> 5: <span class="comment">/* network join - set channel */</span></div><div class="line">        ret = read_channel(input, max_size, &amp;set_network_info.channel);</div><div class="line">        <span class="keywordflow">if</span> (ret == <a class="code" href="artik__error_8h.html#a14bc2dfa42241600d567369cd25ddc70">S_OK</a>) {</div><div class="line">            show_request_tx();</div><div class="line">            step = 6;</div><div class="line">        }</div><div class="line">        <span class="keywordflow">break</span>;</div><div class="line"></div><div class="line">    <span class="keywordflow">case</span> 6: <span class="comment">/* network join - set tx */</span></div><div class="line">        ret = read_tx(input, max_size, &amp;set_network_info.tx_power);</div><div class="line">        <span class="keywordflow">if</span> (ret == <a class="code" href="artik__error_8h.html#a14bc2dfa42241600d567369cd25ddc70">S_OK</a>) {</div><div class="line">            show_request_pan_id();</div><div class="line">            step = 7;</div><div class="line">        }</div><div class="line">        <span class="keywordflow">break</span>;</div><div class="line"></div><div class="line">    <span class="keywordflow">case</span> 7: <span class="comment">/* network join - set pan id */</span></div><div class="line">        ret = read_pan_id(input, max_size, &amp;set_network_info.pan_id);</div><div class="line">        <span class="keywordflow">if</span> (ret == <a class="code" href="artik__error_8h.html#a14bc2dfa42241600d567369cd25ddc70">S_OK</a>) {</div><div class="line">            showln(<span class="stringliteral">&quot;Join network channel(%d) TX(%d) PAN ID(0x%x):&quot;</span>,</div><div class="line">                   set_network_info.channel,</div><div class="line">                   set_network_info.tx_power,</div><div class="line">                   set_network_info.pan_id);</div><div class="line">            ret = zb-&gt;<a class="code" href="structartik__zigbee__module.html#af93fb343dc57d575e7250fbdf29bebc7">network_join_manually</a>(&amp;set_network_info);</div><div class="line">            conducted_by_commissioning = <span class="keyword">false</span>;</div><div class="line">            <span class="keywordflow">if</span> (ret != <a class="code" href="artik__error_8h.html#a14bc2dfa42241600d567369cd25ddc70">S_OK</a>)</div><div class="line">                log_err(<span class="stringliteral">&quot;Manually join network failed: %s&quot;</span>,</div><div class="line">                    error_msg(ret));</div><div class="line">            <span class="keywordflow">else</span> {</div><div class="line">                showln(<span class="stringliteral">&quot;Device discovering ...&quot;</span>);</div><div class="line">                ret = zb-&gt;<a class="code" href="structartik__zigbee__module.html#af1f240ba2a936735b84a8923cbc972a7">device_discover</a>();</div><div class="line">                <span class="keywordflow">if</span> (ret != <a class="code" href="artik__error_8h.html#a14bc2dfa42241600d567369cd25ddc70">S_OK</a>)</div><div class="line">                    log_err(<span class="stringliteral">&quot;Device discover failed: %s&quot;</span>,</div><div class="line">                        error_msg(ret));</div><div class="line">            }</div><div class="line"></div><div class="line">            step = 1;</div><div class="line">        }</div><div class="line">        <span class="keywordflow">break</span>;</div><div class="line"></div><div class="line">    }</div><div class="line"></div><div class="line">    <a class="code" href="artik__module_8h.html#a2b26deff010fc08966179cb6f34d9f66">artik_release_api_module</a>(zb);</div><div class="line">}</div><div class="line"></div><div class="line"><span class="keyword">static</span> <a class="code" href="artik__error_8h.html#a9b1d9ae639ccc7c1b865a73d74b06c74">artik_error</a> _func_endpoint_add(<a class="code" href="structartik__zigbee__module.html">artik_zigbee_module</a> *zb,</div><div class="line">                ARTIK_ZIGBEE_PROFILE profile,</div><div class="line">                ARTIK_ZIGBEE_DEVICEID device_id,</div><div class="line">                <span class="keywordtype">int</span> endpoint_id)</div><div class="line">{</div><div class="line">    <span class="keyword">struct </span>test_device *test_device;</div><div class="line">    <a class="code" href="artik__error_8h.html#a9b1d9ae639ccc7c1b865a73d74b06c74">artik_error</a> result = <a class="code" href="artik__error_8h.html#a14bc2dfa42241600d567369cd25ddc70">S_OK</a>;</div><div class="line"></div><div class="line">    test_device = add_test_device(profile, device_id, endpoint_id);</div><div class="line">    <span class="keywordflow">if</span> (test_device == NULL) {</div><div class="line">        log_err(<span class="stringliteral">&quot;Create test device failed&quot;</span>);</div><div class="line">        <span class="keywordflow">return</span> <a name="a45"></a><a class="code" href="artik__error_8h.html#af1e88709fee8687ef4a7586df77f2453">E_NO_MEM</a>;</div><div class="line">    }</div><div class="line"></div><div class="line">    <span class="keywordflow">if</span> (profile == ARTIK_ZIGBEE_PROFILE_HA) {</div><div class="line">        <span class="keywordflow">switch</span> (device_id) {</div><div class="line">        <span class="keywordflow">case</span> ARTIK_ZIGBEE_DEVICE_ON_OFF_SWITCH:</div><div class="line">            test_device-&gt;identify_request =</div><div class="line">                device_on_off_switch_func.\
                            identify_request;</div><div class="line">            test_device-&gt;<a name="a46"></a><a class="code" href="structartik__zigbee__device__on__off__switch.html#ae1a9e5a7405b6db86d92c9fe897730a3">identify_get_remaining_time</a> =</div><div class="line">                device_on_off_switch_func.\
                            identify_get_remaining_time;</div><div class="line">            test_device-&gt;<a name="a47"></a><a class="code" href="structartik__zigbee__device__on__off__switch.html#a60306109e3a5c335ab86aa70837d8836">onoff_command</a> =</div><div class="line">                device_on_off_switch_func.<a class="code" href="structartik__zigbee__device__on__off__switch.html#a60306109e3a5c335ab86aa70837d8836">onoff_command</a>;</div><div class="line">            test_device-&gt;ezmode_commissioning_initiator_start =</div><div class="line">                device_on_off_switch_func.\
                            ezmode_commissioning_initiator_start;</div><div class="line">            test_device-&gt;<a name="a48"></a><a class="code" href="structartik__zigbee__device__on__off__switch.html#a2401251ff2ad354061f58c85c9d58578">ezmode_commissioning_initiator_stop</a> =</div><div class="line">                device_on_off_switch_func.\
                            ezmode_commissioning_initiator_stop;</div><div class="line">            <span class="keywordflow">break</span>;</div><div class="line"></div><div class="line">        <span class="keywordflow">case</span> ARTIK_ZIGBEE_DEVICE_LEVEL_CONTROL_SWITCH:</div><div class="line">            test_device-&gt;identify_request =</div><div class="line">                device_level_control_switch_func.\
                            identify_request;</div><div class="line">            test_device-&gt;<a name="a49"></a><a class="code" href="structartik__zigbee__device__level__control__switch.html#a0cc51efea644d29c716a6deabb62d569">identify_get_remaining_time</a> =</div><div class="line">                device_level_control_switch_func.\
                            identify_get_remaining_time;</div><div class="line">            test_device-&gt;<a name="a50"></a><a class="code" href="structartik__zigbee__device__level__control__switch.html#a3a20fa14f2a986993d5c9d4ee168d800">onoff_command</a> =</div><div class="line">                device_level_control_switch_func.<a class="code" href="structartik__zigbee__device__level__control__switch.html#a3a20fa14f2a986993d5c9d4ee168d800">onoff_command</a>;</div><div class="line">            test_device-&gt;level_control_request =</div><div class="line">                device_level_control_switch_func.\
                            level_control_request;</div><div class="line">            test_device-&gt;<a name="a51"></a><a class="code" href="structartik__zigbee__device__level__control__switch.html#a3804dc3638737cbe3065c5d333d185ea">ezmode_commissioning_initiator_start</a> =</div><div class="line">                device_level_control_switch_func.\
                            ezmode_commissioning_initiator_start;</div><div class="line">            test_device-&gt;<a name="a52"></a><a class="code" href="structartik__zigbee__device__level__control__switch.html#a05921fd1f56522eae882dd5ba551d86b">ezmode_commissioning_initiator_stop</a> =</div><div class="line">                device_level_control_switch_func.\
                            ezmode_commissioning_initiator_stop;</div><div class="line">            <span class="keywordflow">break</span>;</div><div class="line"></div><div class="line">        <span class="keywordflow">case</span> ARTIK_ZIGBEE_DEVICE_ON_OFF_LIGHT:</div><div class="line">            test_device-&gt;groups_get_local_name_support =</div><div class="line">                device_on_off_light_func.\
                            groups_get_local_name_support;</div><div class="line">            test_device-&gt;<a name="a53"></a><a class="code" href="structartik__zigbee__device__on__off__light.html#a4e4ef5a54e539434bdd827c37af15256">groups_set_local_name_support</a> =</div><div class="line">                device_on_off_light_func.\
                            groups_set_local_name_support;</div><div class="line">            test_device-&gt;<a name="a54"></a><a class="code" href="structartik__zigbee__device__on__off__light.html#a33f625c62fb2301ad6ed42fdd707ab9f">onoff_get_value</a> =</div><div class="line">                device_on_off_light_func.<a class="code" href="structartik__zigbee__device__on__off__light.html#a33f625c62fb2301ad6ed42fdd707ab9f">onoff_get_value</a>;</div><div class="line">            test_device-&gt;ezmode_commissioning_target_start =</div><div class="line">                device_on_off_light_func.\
                            ezmode_commissioning_target_start;</div><div class="line">            test_device-&gt;<a name="a55"></a><a class="code" href="structartik__zigbee__device__on__off__light.html#acb0afb5a72b1fcdc9b7efb033dfd0b54">ezmode_commissioning_target_stop</a> =</div><div class="line">                device_on_off_light_func.\
                            ezmode_commissioning_target_stop;</div><div class="line">            <span class="keywordflow">break</span>;</div><div class="line"></div><div class="line">        <span class="keywordflow">case</span> ARTIK_ZIGBEE_DEVICE_DIMMABLE_LIGHT:</div><div class="line">            test_device-&gt;groups_get_local_name_support =</div><div class="line">                device_dimmable_light_func.\
                            groups_get_local_name_support;</div><div class="line">            test_device-&gt;<a name="a56"></a><a class="code" href="structartik__zigbee__device__dimmable__light.html#aef3beb2ac8f5e5c40bc45df425a2b8b3">groups_set_local_name_support</a> =</div><div class="line">                device_dimmable_light_func.\
                            groups_set_local_name_support;</div><div class="line">            test_device-&gt;<a name="a57"></a><a class="code" href="structartik__zigbee__device__dimmable__light.html#ada7cbfe6452cecac4a0759581a139a49">onoff_get_value</a> =</div><div class="line">                device_dimmable_light_func.<a class="code" href="structartik__zigbee__device__dimmable__light.html#ada7cbfe6452cecac4a0759581a139a49">onoff_get_value</a>;</div><div class="line">            test_device-&gt;level_control_get_value =</div><div class="line">                device_dimmable_light_func.\
                            level_control_get_value;</div><div class="line">            test_device-&gt;<a name="a58"></a><a class="code" href="structartik__zigbee__device__dimmable__light.html#a8b7d0feafac4023dd5d6efe851d79f94">ezmode_commissioning_target_start</a> =</div><div class="line">                device_dimmable_light_func.\
                            ezmode_commissioning_target_start;</div><div class="line">            test_device-&gt;<a name="a59"></a><a class="code" href="structartik__zigbee__device__dimmable__light.html#a0bf3c9d14389c317c2abe9d385c091e0">ezmode_commissioning_target_stop</a> =</div><div class="line">                device_dimmable_light_func.\
                            ezmode_commissioning_target_stop;</div><div class="line">            <span class="keywordflow">break</span>;</div><div class="line"></div><div class="line">        <span class="keywordflow">case</span> ARTIK_ZIGBEE_DEVICE_LIGHT_SENSOR:</div><div class="line">            test_device-&gt;identify_request =</div><div class="line">                device_light_sensor_func.<a name="a60"></a><a class="code" href="structartik__zigbee__device__light__sensor.html#a6268b540386a3fcf9ebd36dbfc9c398f">identify_request</a>;</div><div class="line">            test_device-&gt;identify_get_remaining_time =</div><div class="line">                device_light_sensor_func.\
                            identify_get_remaining_time;</div><div class="line">            test_device-&gt;<a name="a61"></a><a class="code" href="structartik__zigbee__device__light__sensor.html#aac89ff34770a6c419e0d4eac519162d2">illum_set_measured_value</a> =</div><div class="line">                device_light_sensor_func.\
                            illum_set_measured_value;</div><div class="line">            test_device-&gt;<a name="a62"></a><a class="code" href="structartik__zigbee__device__light__sensor.html#a58f47715668455902932f2c69546c644">illum_get_measured_value</a> =</div><div class="line">                device_light_sensor_func.\
                            illum_get_measured_value;</div><div class="line">            test_device-&gt;<a name="a63"></a><a class="code" href="structartik__zigbee__device__light__sensor.html#a348b5e1ddc9dcd7b3e3545d6a5ddddf2">illum_set_measured_value_range</a> =</div><div class="line">                device_light_sensor_func.\
                            illum_set_measured_value_range;</div><div class="line">            test_device-&gt;<a name="a64"></a><a class="code" href="structartik__zigbee__device__light__sensor.html#a75983a77edbe3c2e87fb1e41ce8d419e">ezmode_commissioning_initiator_start</a> =</div><div class="line">                device_light_sensor_func.\
                            ezmode_commissioning_initiator_start;</div><div class="line">            test_device-&gt;<a name="a65"></a><a class="code" href="structartik__zigbee__device__light__sensor.html#a00c0d3e8f43ce7363bc3452fa9e2a159">ezmode_commissioning_initiator_stop</a> =</div><div class="line">                device_light_sensor_func.\
                            ezmode_commissioning_initiator_stop;</div><div class="line">            <span class="keywordflow">break</span>;</div><div class="line"></div><div class="line"></div><div class="line">        <span class="keywordflow">case</span> ARTIK_ZIGBEE_DEVICE_REMOTE_CONTROL:</div><div class="line">            test_device-&gt;reset_to_factory_default =</div><div class="line">                device_remote_control_func.\
                            reset_to_factory_default;</div><div class="line">            test_device-&gt;<a name="a66"></a><a class="code" href="structartik__zigbee__device__remote__control.html#a0c89621d927d5c6b8b3b30f606408337">identify_request</a> =</div><div class="line">                device_remote_control_func.<a class="code" href="structartik__zigbee__device__remote__control.html#a0c89621d927d5c6b8b3b30f606408337">identify_request</a>;</div><div class="line">            test_device-&gt;identify_get_remaining_time =</div><div class="line">                device_remote_control_func.\
                            identify_get_remaining_time;</div><div class="line">            test_device-&gt;<a name="a67"></a><a class="code" href="structartik__zigbee__device__remote__control.html#a1d6be2b4eec7ea00c2ece7e4ecd14cb0">onoff_command</a> =</div><div class="line">                device_remote_control_func.<a class="code" href="structartik__zigbee__device__remote__control.html#a1d6be2b4eec7ea00c2ece7e4ecd14cb0">onoff_command</a>;</div><div class="line">            test_device-&gt;level_control_request =</div><div class="line">                device_remote_control_func.\
                            level_control_request;</div><div class="line">            test_device-&gt;<a name="a68"></a><a class="code" href="structartik__zigbee__device__remote__control.html#adedf97ff312a197eb627839febb0ed4e">request_reporting</a> =</div><div class="line">                device_remote_control_func.<a class="code" href="structartik__zigbee__device__remote__control.html#adedf97ff312a197eb627839febb0ed4e">request_reporting</a>;</div><div class="line">            test_device-&gt;stop_reporting =</div><div class="line">                device_remote_control_func.<a name="a69"></a><a class="code" href="structartik__zigbee__device__remote__control.html#a84f1afcad7e19931e9eb545d39024c2e">stop_reporting</a>;</div><div class="line">            test_device-&gt;ezmode_commissioning_target_start =</div><div class="line">                device_remote_control_func.\
                            ezmode_commissioning_target_start;</div><div class="line">            test_device-&gt;<a name="a70"></a><a class="code" href="structartik__zigbee__device__remote__control.html#a06bb4d365375ed5b2e5e8e8cdedde25a">ezmode_commissioning_target_stop</a> =</div><div class="line">                device_remote_control_func.\
                            ezmode_commissioning_target_stop;</div><div class="line">            <span class="keywordflow">break</span>;</div><div class="line"></div><div class="line">        <span class="keywordflow">default</span>:</div><div class="line">            log_err(<span class="stringliteral">&quot;Unsupported device type: 0x%04X&quot;</span>, device_id);</div><div class="line">            result = <a name="a71"></a><a class="code" href="artik__error_8h.html#a4e4bbc44fbb7aeb4062c9ce704b8d8af">E_BAD_ARGS</a>;</div><div class="line">            <span class="keywordflow">break</span>;</div><div class="line">        }</div><div class="line">    } <span class="keywordflow">else</span> {</div><div class="line">        log_err(<span class="stringliteral">&quot;Unsupported profile: %d&quot;</span>, profile);</div><div class="line">        result = <a class="code" href="artik__error_8h.html#a4e4bbc44fbb7aeb4062c9ce704b8d8af">E_BAD_ARGS</a>;</div><div class="line">    }</div><div class="line"></div><div class="line">    <span class="keywordflow">if</span> (result != <a class="code" href="artik__error_8h.html#a14bc2dfa42241600d567369cd25ddc70">S_OK</a>)</div><div class="line">        delete_test_device(endpoint_id);</div><div class="line"></div><div class="line">    <span class="keywordflow">return</span> result;</div><div class="line">}</div><div class="line"></div><div class="line"><span class="keyword">static</span> <a class="code" href="artik__error_8h.html#a9b1d9ae639ccc7c1b865a73d74b06c74">artik_error</a> _func_endpoint_init(<a class="code" href="structartik__zigbee__module.html">artik_zigbee_module</a> *zb)</div><div class="line">{</div><div class="line">    <a class="code" href="artik__zigbee_8h.html#ae7124ad519e1c002b998f8aebe387df9">artik_zigbee_endpoint_handle</a></div><div class="line">                handle_list[ARTIK_ZIGBEE_MAX_ENDPOINT_SIZE];</div><div class="line">    <a name="_a72"></a><a class="code" href="structartik__zigbee__local__endpoint__info.html">artik_zigbee_local_endpoint_info</a> endpoint_info;</div><div class="line">    <span class="keywordtype">int</span> i = 0, size = 0;</div><div class="line">    <a class="code" href="artik__error_8h.html#a9b1d9ae639ccc7c1b865a73d74b06c74">artik_error</a> ret = <a class="code" href="artik__error_8h.html#a487d95c56515019592eb5e2e86491b0d">E_ZIGBEE_ERROR</a>;</div><div class="line">    <span class="keyword">struct </span>test_device *device = NULL;</div><div class="line"></div><div class="line">    get_test_device_list(handle_list, ARTIK_ZIGBEE_MAX_ENDPOINT_SIZE,</div><div class="line">                                    &amp;size);</div><div class="line">    <span class="keywordflow">if</span> (size &lt;= 0) {</div><div class="line">        log_err(<span class="stringliteral">&quot;device list is NULL&quot;</span>);</div><div class="line">        <span class="keywordflow">return</span> <a class="code" href="artik__error_8h.html#abcc55041f89fe6efa035f539532d358b">E_ZIGBEE_NO_DEVICE</a>;</div><div class="line">    }</div><div class="line"></div><div class="line">    memset(&amp;endpoint_info, 0, <span class="keyword">sizeof</span>(<a class="code" href="structartik__zigbee__local__endpoint__info.html">artik_zigbee_local_endpoint_info</a>));</div><div class="line">    <span class="keywordflow">for</span> (i = 0; i &lt; size; i++) {</div><div class="line">        device = get_test_device(i);</div><div class="line">        <span class="keywordflow">if</span> (device != NULL) {</div><div class="line">            endpoint_info.<a name="a73"></a>endpoints[endpoint_info.<a name="a74"></a>count].<a name="a75"></a>profile =</div><div class="line">                                device-&gt;profile;</div><div class="line">            endpoint_info.endpoints[endpoint_info.count].<a name="a76"></a>endpoint_id</div><div class="line">                            = device-&gt;endpoint_id;</div><div class="line">            endpoint_info.endpoints[endpoint_info.count].<a name="a77"></a>device_id =</div><div class="line">                            device-&gt;device_id;</div><div class="line">            endpoint_info.count++;</div><div class="line">        }</div><div class="line">    }</div><div class="line">    ret = zb-&gt;<a name="a78"></a><a class="code" href="structartik__zigbee__module.html#ae615b8418fe4535d4c487fea835a6b52">set_local_endpoint</a>(&amp;endpoint_info);</div><div class="line">    <span class="keywordflow">if</span> (ret != <a class="code" href="artik__error_8h.html#a14bc2dfa42241600d567369cd25ddc70">S_OK</a>)</div><div class="line">        log_err(<span class="stringliteral">&quot;Set local endpoint error %d&quot;</span>, ret);</div><div class="line"></div><div class="line">    ret = zb-&gt;<a name="a79"></a><a class="code" href="structartik__zigbee__module.html#af262afa844ffb67292bfadb822f53af6">initialize</a>(_on_callback, NULL);</div><div class="line">    <span class="keywordflow">if</span> (ret != <a class="code" href="artik__error_8h.html#a14bc2dfa42241600d567369cd25ddc70">S_OK</a>)</div><div class="line">        log_err(<span class="stringliteral">&quot;Initialize error %d&quot;</span>, ret);</div><div class="line">    <span class="keywordflow">return</span> ret;</div><div class="line">}</div><div class="line"></div><div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span> _func_endpoint_show(<span class="keywordtype">void</span>)</div><div class="line">{</div><div class="line">    <span class="keyword">struct </span>device_type *device_type;</div><div class="line">    <span class="keywordtype">int</span> i, count;</div><div class="line"></div><div class="line">    count = _get_device_type_count();</div><div class="line">    <span class="keywordflow">for</span> (i = 0; i &lt; count; i++) {</div><div class="line">        device_type = _get_device_type(i);</div><div class="line">        showln(<span class="stringliteral">&quot;%d: %s&quot;</span>, i + 1, device_type-&gt;name);</div><div class="line">    }</div><div class="line">}</div><div class="line"></div><div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span> _func_endpoint(<span class="keywordtype">char</span> *input, <span class="keywordtype">int</span> max_size)</div><div class="line">{</div><div class="line">    <span class="keyword">static</span> <span class="keywordtype">int</span> step;</div><div class="line">    <span class="keyword">static</span> <span class="keyword">struct </span>device_type *select_device_type;</div><div class="line">    <a class="code" href="structartik__zigbee__module.html">artik_zigbee_module</a> *zb;</div><div class="line">    <a class="code" href="artik__error_8h.html#a9b1d9ae639ccc7c1b865a73d74b06c74">artik_error</a> ret;</div><div class="line">    <span class="keywordtype">int</span> n;</div><div class="line"></div><div class="line">    <span class="keywordflow">if</span> (input == NULL)</div><div class="line">        step = 0;</div><div class="line"></div><div class="line">    zb = (<a class="code" href="structartik__zigbee__module.html">artik_zigbee_module</a> *)<a class="code" href="artik__module_8h.html#a5dd30d1b28a0ab577a06e417cfb28aa5">artik_request_api_module</a>(<span class="stringliteral">&quot;zigbee&quot;</span>);</div><div class="line">    <span class="keywordflow">switch</span> (step) {</div><div class="line">    <span class="keywordflow">case</span> 0:</div><div class="line">        show_hyphen();</div><div class="line">        _func_endpoint_show();</div><div class="line">        showln(<span class="stringliteral">&quot;0: ADD DEVICE DONE&quot;</span>);</div><div class="line">        show(<span class="stringliteral">&quot;Add device: &quot;</span>);</div><div class="line">        step = 1;</div><div class="line">        <span class="keywordflow">break</span>;</div><div class="line"></div><div class="line">    <span class="keywordflow">case</span> 1: <span class="comment">/* add device */</span></div><div class="line">        n = read_int(input, max_size, -1);</div><div class="line">        <span class="keywordflow">if</span> (n == 0) {</div><div class="line">            <span class="keywordflow">if</span> (get_test_device_count() == 0) {</div><div class="line">                show(<span class="stringliteral">&quot;\nAt least 1 endpoint,&quot;</span>\</div><div class="line">                    <span class="stringliteral">&quot; please input again: &quot;</span>);</div><div class="line">            } <span class="keywordflow">else</span> {</div><div class="line">                <span class="keywordflow">if</span> (_func_endpoint_init(zb) == <a class="code" href="artik__error_8h.html#a14bc2dfa42241600d567369cd25ddc70">S_OK</a>)</div><div class="line">                    _func_entry(_func_network);</div><div class="line">                <span class="keywordflow">else</span> {</div><div class="line">                    <a class="code" href="artik__module_8h.html#a2b26deff010fc08966179cb6f34d9f66">artik_release_api_module</a>(zb);</div><div class="line">                    exit_loop();</div><div class="line">                    <span class="keywordflow">return</span>;</div><div class="line">                }</div><div class="line">            }</div><div class="line">        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (n &gt;= 1 &amp;&amp; n &lt;= _get_device_type_count()) {</div><div class="line">            select_device_type = _get_device_type(n - 1);</div><div class="line">            show(<span class="stringliteral">&quot;Set endpoint id (%d): &quot;</span>,</div><div class="line">                 select_device_type-&gt;default_endpoint_id);</div><div class="line">            step = 2;</div><div class="line">        } <span class="keywordflow">else</span> {</div><div class="line">            show_retry();</div><div class="line">        }</div><div class="line">        <span class="keywordflow">break</span>;</div><div class="line"></div><div class="line">    <span class="keywordflow">case</span> 2: <span class="comment">/* set endpoint id */</span></div><div class="line">        <span class="keywordflow">if</span> (read_lf(input, max_size))</div><div class="line">            n = select_device_type-&gt;default_endpoint_id;</div><div class="line">        <span class="keywordflow">else</span></div><div class="line">            n = read_int(input, max_size, -1);</div><div class="line"></div><div class="line">        <span class="keywordflow">if</span> (n &gt;= ENDPOINT_ID_MIN &amp;&amp; n &lt;= ENDPOINT_ID_MAX) {</div><div class="line">            <span class="keywordflow">if</span> (check_test_device_endpoint_id(n) == <span class="keyword">true</span>) {</div><div class="line">                ret = _func_endpoint_add(zb,</div><div class="line">                select_device_type-&gt;profile,</div><div class="line">                select_device_type-&gt;device_id,</div><div class="line">                n);</div><div class="line">                <span class="keywordflow">if</span> (ret == <a class="code" href="artik__error_8h.html#a14bc2dfa42241600d567369cd25ddc70">S_OK</a>)</div><div class="line">                    show(<span class="stringliteral">&quot;Added device \&quot;%s\&quot;&quot;</span>\</div><div class="line">                        <span class="stringliteral">&quot; with ep(%d)\n\n&quot;</span>,</div><div class="line">                         select_device_type-&gt;name, n);</div><div class="line">                <span class="keywordflow">else</span></div><div class="line">                    showln(<span class="stringliteral">&quot;Add endpoint failed: %s&quot;</span>,</div><div class="line">                        error_msg(ret));</div><div class="line"></div><div class="line">                show(<span class="stringliteral">&quot;Add device: &quot;</span>);</div><div class="line">                step = 1;</div><div class="line">            } <span class="keywordflow">else</span> {</div><div class="line">                show(<span class="stringliteral">&quot;\nRepeated endpoint id,&quot;</span>\</div><div class="line">                    <span class="stringliteral">&quot; please input again: &quot;</span>);</div><div class="line">            }</div><div class="line">        } <span class="keywordflow">else</span> {</div><div class="line">            show_range(ENDPOINT_ID_MIN, ENDPOINT_ID_MAX);</div><div class="line">        }</div><div class="line">        <span class="keywordflow">break</span>;</div><div class="line">    }</div><div class="line"></div><div class="line">    <a class="code" href="artik__module_8h.html#a2b26deff010fc08966179cb6f34d9f66">artik_release_api_module</a>(zb);</div><div class="line">}</div><div class="line"></div><div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span> _func_entrance(<span class="keywordtype">char</span> *input, <span class="keywordtype">int</span> max_size)</div><div class="line">{</div><div class="line">    <span class="keyword">static</span> <span class="keywordtype">int</span> step;</div><div class="line">    <span class="keyword">static</span> <a class="code" href="structartik__zigbee__local__endpoint__info.html">artik_zigbee_local_endpoint_info</a> endpoint_info;</div><div class="line">    <a name="_a80"></a><a class="code" href="structartik__zigbee__local__endpoint.html">artik_zigbee_local_endpoint</a> local_ep;</div><div class="line">    <a class="code" href="structartik__zigbee__module.html">artik_zigbee_module</a> *zb;</div><div class="line">    <a class="code" href="artik__error_8h.html#a9b1d9ae639ccc7c1b865a73d74b06c74">artik_error</a> ret = <a class="code" href="artik__error_8h.html#a14bc2dfa42241600d567369cd25ddc70">S_OK</a>;</div><div class="line">    <span class="keywordtype">int</span> i = 0, n = 0;</div><div class="line"></div><div class="line">    <span class="keywordflow">if</span> (input == NULL)</div><div class="line">        step = 0;</div><div class="line"></div><div class="line">    zb = (<a class="code" href="structartik__zigbee__module.html">artik_zigbee_module</a> *) <a class="code" href="artik__module_8h.html#a5dd30d1b28a0ab577a06e417cfb28aa5">artik_request_api_module</a>(<span class="stringliteral">&quot;zigbee&quot;</span>);</div><div class="line">    <span class="keywordflow">switch</span> (step) {</div><div class="line">    <span class="keywordflow">case</span> 0:</div><div class="line">        memset(&amp;endpoint_info, 0,</div><div class="line">                <span class="keyword">sizeof</span>(<a class="code" href="structartik__zigbee__local__endpoint__info.html">artik_zigbee_local_endpoint_info</a>));</div><div class="line">        ret = zb-&gt;<a name="a81"></a><a class="code" href="structartik__zigbee__module.html#a143174e4f0db3c67fbb269d360afe8b7">get_local_endpoint</a>(&amp;endpoint_info);</div><div class="line">        <span class="keywordflow">if</span> (ret == <a class="code" href="artik__error_8h.html#a14bc2dfa42241600d567369cd25ddc70">S_OK</a> &amp;&amp; endpoint_info.count &gt; 0) {</div><div class="line">            showln(<span class="stringliteral">&quot;Found %d saved local endpoints&quot;</span>,</div><div class="line">                            endpoint_info.count);</div><div class="line">            <span class="keywordflow">for</span> (i = 0; i &lt; endpoint_info.count; i++) {</div><div class="line">                local_ep = endpoint_info.endpoints[i];</div><div class="line">                showln(<span class="stringliteral">&quot;Profile 0x%04X endpoint %d&quot;</span>\</div><div class="line">                    <span class="stringliteral">&quot; device id 0x%04X&quot;</span>, local_ep.profile,</div><div class="line">                        local_ep.endpoint_id,</div><div class="line">                        local_ep.device_id);</div><div class="line">            }</div><div class="line">            show_hyphen();</div><div class="line">            showln(<span class="stringliteral">&quot;0: Resume device&quot;</span>);</div><div class="line">            showln(<span class="stringliteral">&quot;1: Add new device&quot;</span>);</div><div class="line">            show_select();</div><div class="line">            step = 1;</div><div class="line">        } <span class="keywordflow">else</span></div><div class="line">            _func_entry(_func_endpoint);</div><div class="line">        <span class="keywordflow">break</span>;</div><div class="line"></div><div class="line">    <span class="keywordflow">case</span> 1: <span class="comment">/* Select to resume device or add new device */</span></div><div class="line">        n = read_int(input, max_size, -1);</div><div class="line">        <span class="keywordflow">if</span> (n == 0) {</div><div class="line">            show_hyphen();</div><div class="line">            showln(<span class="stringliteral">&quot;Resume device&quot;</span>);</div><div class="line">            <span class="keywordflow">for</span> (i = 0; i &lt; endpoint_info.count; i++) {</div><div class="line">                local_ep = endpoint_info.endpoints[i];</div><div class="line">                ret = _func_endpoint_add(zb, local_ep.profile,</div><div class="line">                        local_ep.device_id,</div><div class="line">                        local_ep.endpoint_id);</div><div class="line">                <span class="keywordflow">if</span> (ret == <a class="code" href="artik__error_8h.html#a14bc2dfa42241600d567369cd25ddc70">S_OK</a>)</div><div class="line">                    showln(<span class="stringliteral">&quot;Added endpoint %d&quot;</span>,</div><div class="line">                            local_ep.endpoint_id);</div><div class="line">                <span class="keywordflow">else</span></div><div class="line">                    showln(<span class="stringliteral">&quot;Add endpoint %d failed: %s&quot;</span>,</div><div class="line">                        local_ep.endpoint_id,</div><div class="line">                        error_msg(ret));</div><div class="line">            }</div><div class="line"></div><div class="line">            ret = _func_endpoint_init(zb);</div><div class="line">            <span class="keywordflow">if</span> (ret != <a class="code" href="artik__error_8h.html#a14bc2dfa42241600d567369cd25ddc70">S_OK</a>) {</div><div class="line">                <a class="code" href="artik__module_8h.html#a2b26deff010fc08966179cb6f34d9f66">artik_release_api_module</a>(zb);</div><div class="line">                exit_loop();</div><div class="line">                <span class="keywordflow">return</span>;</div><div class="line">            }</div><div class="line"></div><div class="line">            _func_entry(_func_network);</div><div class="line">        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (n == 1)</div><div class="line">            _func_entry(_func_endpoint);</div><div class="line">        <span class="keywordflow">else</span></div><div class="line">            show_retry();</div><div class="line">        <span class="keywordflow">break</span>;</div><div class="line">    }</div><div class="line"></div><div class="line">    <a class="code" href="artik__module_8h.html#a2b26deff010fc08966179cb6f34d9f66">artik_release_api_module</a>(zb);</div><div class="line">}</div><div class="line"></div><div class="line"><span class="keywordtype">void</span> _on_callback_attr_changed(<a name="_a82"></a><a class="code" href="structartik__zigbee__attribute__changed__response.html">artik_zigbee_attribute_changed_response</a> *info)</div><div class="line">{</div><div class="line">    <span class="keyword">struct </span>test_device *device;</div><div class="line">    <a class="code" href="artik__zigbee__clusters_8h.html#aa129df30dce6eea1d0cbebd3c6a3ec2d">artik_zigbee_onoff_status</a> status;</div><div class="line">    <a class="code" href="artik__error_8h.html#a9b1d9ae639ccc7c1b865a73d74b06c74">artik_error</a> ret;</div><div class="line">    <span class="keywordtype">int</span> n;</div><div class="line"></div><div class="line">    device = get_test_device_by_endpoint_id(info-&gt;<a name="a83"></a>endpoint_id);</div><div class="line">    <span class="keywordflow">if</span> (!device) {</div><div class="line">        log_err(<span class="stringliteral">&quot;Invalid endpoint id: %d&quot;</span>, info-&gt;endpoint_id);</div><div class="line">        <span class="keywordflow">return</span>;</div><div class="line">    }</div><div class="line"></div><div class="line">    <span class="keywordflow">switch</span> (info-&gt;<a name="a84"></a>type) {</div><div class="line">    <span class="keywordflow">case</span> ARTIK_ZIGBEE_ATTR_ONOFF_STATUS:</div><div class="line">        <span class="keywordflow">if</span> (device-&gt;onoff_get_value != NULL) {</div><div class="line">            ret = device-&gt;onoff_get_value(device-&gt;handle, &amp;status);</div><div class="line">            <span class="keywordflow">if</span> (ret == <a class="code" href="artik__error_8h.html#a14bc2dfa42241600d567369cd25ddc70">S_OK</a>) {</div><div class="line">                <span class="keywordflow">if</span> (status == ARTIK_ZIGBEE_ONOFF_ON)</div><div class="line">                    showln(<span class="stringliteral">&quot;Attribute ONOFF changed&quot;</span>\</div><div class="line">                        <span class="stringliteral">&quot; to ON by ep(%d)&quot;</span>,</div><div class="line">                           info-&gt;endpoint_id);</div><div class="line">                <span class="keywordflow">else</span> <span class="keywordflow">if</span> (status == ARTIK_ZIGBEE_ONOFF_OFF)</div><div class="line">                    showln(<span class="stringliteral">&quot;Attribute ONOFF changed&quot;</span>\</div><div class="line">                        <span class="stringliteral">&quot; to OFF by ep(%d)&quot;</span>,</div><div class="line">                           info-&gt;endpoint_id);</div><div class="line">                <span class="keywordflow">else</span></div><div class="line">                    showln(<span class="stringliteral">&quot;Attribute ONOFF changed to&quot;</span>\</div><div class="line">                        <span class="stringliteral">&quot; unrecognized value:%d&quot;</span>\</div><div class="line">                        <span class="stringliteral">&quot; by ep(%d)&quot;</span>,</div><div class="line">                           status, info-&gt;endpoint_id);</div><div class="line">            } <span class="keywordflow">else</span></div><div class="line">                log_err(<span class="stringliteral">&quot;Attribute ONOFF changed by ep(%d),&quot;</span>\</div><div class="line">                    <span class="stringliteral">&quot; get value failed: %s&quot;</span>,</div><div class="line">                    info-&gt;endpoint_id, error_msg(ret));</div><div class="line">        } <span class="keywordflow">else</span></div><div class="line">            log_err(<span class="stringliteral">&quot;Not support onoff_get_value by ep(%d)&quot;</span>,</div><div class="line">                            info-&gt;endpoint_id);</div><div class="line">        <span class="keywordflow">break</span>;</div><div class="line"></div><div class="line">    <span class="keywordflow">case</span> ARTIK_ZIGBEE_ATTR_LEVELCONTROL_LEVEL:</div><div class="line">        <span class="keywordflow">if</span> (device-&gt;level_control_get_value != NULL) {</div><div class="line">            ret = device-&gt;level_control_get_value(device-&gt;handle,</div><div class="line">                                    &amp;n);</div><div class="line">            <span class="keywordflow">if</span> (ret == <a class="code" href="artik__error_8h.html#a14bc2dfa42241600d567369cd25ddc70">S_OK</a>)</div><div class="line">                showln(<span class="stringliteral">&quot;Attribute LEVEL changed to %d by&quot;</span>\</div><div class="line">                    <span class="stringliteral">&quot; ep(%d)&quot;</span>,</div><div class="line">                       n, info-&gt;endpoint_id);</div><div class="line">            <span class="keywordflow">else</span></div><div class="line">                log_err(<span class="stringliteral">&quot;Attribute LEVEL changed by ep(%d),&quot;</span>\</div><div class="line">                    <span class="stringliteral">&quot; get value failed: %s&quot;</span>,</div><div class="line">                    info-&gt;endpoint_id, error_msg(ret));</div><div class="line">        } <span class="keywordflow">else</span></div><div class="line">            log_err(<span class="stringliteral">&quot;Not support level_control_get_value by ep(%d)&quot;</span>,</div><div class="line">                    info-&gt;endpoint_id);</div><div class="line">        <span class="keywordflow">break</span>;</div><div class="line"></div><div class="line">    <span class="keywordflow">default</span>:</div><div class="line">        showln(<span class="stringliteral">&quot;Attribute(%d) changed by endpoint(%d)&quot;</span>, info-&gt;type,</div><div class="line">               info-&gt;endpoint_id);</div><div class="line">        <span class="keywordflow">break</span>;</div><div class="line">    }</div><div class="line">}</div><div class="line"></div><div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span> _on_level_control_command_callback(</div><div class="line">            <a class="code" href="structartik__zigbee__level__control__command.html">artik_zigbee_level_control_command</a> *level_control)</div><div class="line">{</div><div class="line">    showln(<span class="stringliteral">&quot;Level control command callback type %d&quot;</span>,</div><div class="line">            level_control-&gt;control_type);</div><div class="line"></div><div class="line">    <span class="keywordflow">switch</span> (level_control-&gt;control_type) {</div><div class="line">    <span class="keywordflow">case</span> ARTIK_ZIGBEE_MOVE_TO_LEVEL:</div><div class="line">        showln(<span class="stringliteral">&quot;Move to level %d transition time %d&quot;</span>,</div><div class="line">            level_control-&gt;parameters.move_to_level.level,</div><div class="line">            level_control-&gt;parameters.move_to_level.\
                        transition_time);</div><div class="line">        <span class="keywordflow">break</span>;</div><div class="line"></div><div class="line">    <span class="keywordflow">case</span> ARTIK_ZIGBEE_MOVE:</div><div class="line">        showln(<span class="stringliteral">&quot;Move mode %d rate %d&quot;</span>,</div><div class="line">            level_control-&gt;parameters.move.control_mode,</div><div class="line">            level_control-&gt;parameters.move.rate);</div><div class="line">        <span class="keywordflow">break</span>;</div><div class="line"></div><div class="line">    <span class="keywordflow">case</span> ARTIK_ZIGBEE_STEP:</div><div class="line">        showln(<span class="stringliteral">&quot;Step mode %d step size %d transition time %d&quot;</span>,</div><div class="line">            level_control-&gt;parameters.step.control_mode,</div><div class="line">            level_control-&gt;parameters.step.step_size,</div><div class="line">            level_control-&gt;parameters.step.transition_time);</div><div class="line">        <span class="keywordflow">break</span>;</div><div class="line"></div><div class="line">    <span class="keywordflow">case</span> ARTIK_ZIGBEE_STOP:</div><div class="line">        showln(<span class="stringliteral">&quot;Stop&quot;</span>);</div><div class="line">        <span class="keywordflow">break</span>;</div><div class="line"></div><div class="line">    <span class="keywordflow">case</span> ARTIK_ZIGBEE_MOVE_TO_LEVEL_ONOFF:</div><div class="line">        showln(<span class="stringliteral">&quot;On/off move to level %d transition time %d&quot;</span>,</div><div class="line">            level_control-&gt;parameters.move_to_level.level,</div><div class="line">            level_control-&gt;parameters.move_to_level.\
                        transition_time);</div><div class="line">        <span class="keywordflow">break</span>;</div><div class="line"></div><div class="line">    <span class="keywordflow">case</span> ARTIK_ZIGBEE_MOVE_ONOFF:</div><div class="line">        showln(<span class="stringliteral">&quot;On/off move mode %d rate %d&quot;</span>,</div><div class="line">            level_control-&gt;parameters.move.control_mode,</div><div class="line">            level_control-&gt;parameters.move.rate);</div><div class="line">        <span class="keywordflow">break</span>;</div><div class="line"></div><div class="line">    <span class="keywordflow">case</span> ARTIK_ZIGBEE_STEP_ONOFF:</div><div class="line">        showln(<span class="stringliteral">&quot;On/off step mode %d step size %d transition time %d&quot;</span>,</div><div class="line">            level_control-&gt;parameters.step.control_mode,</div><div class="line">            level_control-&gt;parameters.step.step_size,</div><div class="line">            level_control-&gt;parameters.step.transition_time);</div><div class="line">        <span class="keywordflow">break</span>;</div><div class="line"></div><div class="line">    <span class="keywordflow">case</span> ARTIK_ZIGBEE_STOP_ONOFF:</div><div class="line">        showln(<span class="stringliteral">&quot;On/off stop&quot;</span>);</div><div class="line">        <span class="keywordflow">break</span>;</div><div class="line">    }</div><div class="line">}</div><div class="line"></div><div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span> _on_callback(<span class="keywordtype">void</span> *user_data,</div><div class="line">            <a class="code" href="artik__zigbee_8h.html#a7b3f5c2c5bf75a5dd0c592450b95dcd0">artik_zigbee_response_type</a> response_type,</div><div class="line">            <span class="keywordtype">void</span> *payload)</div><div class="line">{</div><div class="line">    <a class="code" href="structartik__zigbee__network__find__result.html">artik_zigbee_network_find_result</a> *net_find;</div><div class="line">    <a name="_a85"></a><a class="code" href="structartik__zigbee__groups__info.html">artik_zigbee_groups_info</a> *group_info;</div><div class="line">    <a name="_a86"></a><a class="code" href="structartik__zigbee__reporting__info.html">artik_zigbee_reporting_info</a> *reporting_info;</div><div class="line">    <a name="_a87"></a><a class="code" href="structartik__zigbee__received__command.html">artik_zigbee_received_command</a> *received_command;</div><div class="line">    <a name="_a88"></a><a class="code" href="structartik__zigbee__identify__feedback__info.html">artik_zigbee_identify_feedback_info</a> *identify_info;</div><div class="line">    <a name="_a89"></a><a class="code" href="structartik__zigbee__report__attribute__info.html">artik_zigbee_report_attribute_info</a> *report_attr_info;</div><div class="line">    <a name="_a90"></a><a class="code" href="structartik__zigbee__commissioning__target__info.html">artik_zigbee_commissioning_target_info</a> *target_info;</div><div class="line">    <a name="_a91"></a><a class="code" href="structartik__zigbee__commissioning__bound__info.html">artik_zigbee_commissioning_bound_info</a> *bound_info;</div><div class="line">    <span class="keyword">struct </span>test_device *test_device;</div><div class="line">    <a name="_a92"></a><a class="code" href="structartik__zigbee__device__discovery.html">artik_zigbee_device_discovery</a> *device_discovery;</div><div class="line">    <a name="_a93"></a><a class="code" href="structartik__zigbee__match__desc__response.html">artik_zigbee_match_desc_response</a> *match_desc;</div><div class="line">    <a class="code" href="artik__error_8h.html#a9b1d9ae639ccc7c1b865a73d74b06c74">artik_error</a> ret;</div><div class="line">    <a class="code" href="artik__zigbee_8h.html#a11286182414861a99a5bfba0bccd744b">artik_zigbee_notification</a> notification;</div><div class="line">    <a class="code" href="artik__zigbee_8h.html#a846fae810969d7615a144f97144f5028">artik_zigbee_network_notification</a> network_notification;</div><div class="line">    <a class="code" href="artik__zigbee_8h.html#ab047b954fe7b9b67facb53a50eb45d5c">artik_zigbee_commissioning_state</a> commissioning_state;</div><div class="line">    <a class="code" href="structartik__zigbee__module.html">artik_zigbee_module</a> *zb;</div><div class="line">    <span class="keywordtype">int</span> i;</div><div class="line"></div><div class="line">    log_dbg(<span class="stringliteral">&quot;In callback, response type : %d&quot;</span>, response_type);</div><div class="line"></div><div class="line">    zb = (<a class="code" href="structartik__zigbee__module.html">artik_zigbee_module</a> *)<a class="code" href="artik__module_8h.html#a5dd30d1b28a0ab577a06e417cfb28aa5">artik_request_api_module</a>(<span class="stringliteral">&quot;zigbee&quot;</span>);</div><div class="line">    <span class="keywordflow">switch</span> (response_type) {</div><div class="line">    <span class="keywordflow">case</span> ARTIK_ZIGBEE_RESPONSE_IEEE_ADDR_RESP:</div><div class="line">        memcpy(&amp;addr_rsp, payload,</div><div class="line">                <span class="keyword">sizeof</span>(<a class="code" href="structartik__zigbee__ieee__addr__response.html">artik_zigbee_ieee_addr_response</a>));</div><div class="line"></div><div class="line">        <span class="keywordflow">if</span> (addr_rsp.<a name="a94"></a>result == ARTIK_ZIGBEE_SERVICE_DISCOVERY_DONE) {</div><div class="line">            show(<span class="stringliteral">&quot;Ieee address response node id 0x%04x, eui64 &quot;</span>,</div><div class="line">                    addr_rsp.<a name="a95"></a>node_id);</div><div class="line">            show(<span class="stringliteral">&quot;%02x&quot;</span>, addr_rsp.<a name="a96"></a>eui64[0]);</div><div class="line">            <span class="keywordflow">for</span> (i = 1; i &lt; ARTIK_ZIGBEE_EUI64_SIZE; i++)</div><div class="line">                show(<span class="stringliteral">&quot;:%02x&quot;</span>, addr_rsp.eui64[i]);</div><div class="line">            showln(<span class="stringliteral">&quot;&quot;</span>);</div><div class="line">        } <span class="keywordflow">else</span></div><div class="line">            showln(<span class="stringliteral">&quot;Ieee address response fail for result %d&quot;</span>,</div><div class="line">                            addr_rsp.result);</div><div class="line">        <span class="keywordflow">break</span>;</div><div class="line">    <span class="keywordflow">case</span> ARTIK_ZIGBEE_RESPONSE_SIMPLE_DESC_RESP:</div><div class="line">        memcpy(&amp;simple_descriptor, payload,</div><div class="line">            <span class="keyword">sizeof</span>(<a class="code" href="structartik__zigbee__simple__descriptor__response.html">artik_zigbee_simple_descriptor_response</a>));</div><div class="line"></div><div class="line">        <span class="keywordflow">if</span> (simple_descriptor.<a name="a97"></a>result ==</div><div class="line">                    ARTIK_ZIGBEE_SERVICE_DISCOVERY_DONE) {</div><div class="line">            showln(<span class="stringliteral">&quot;Simple descriptor response target node id&quot;</span>\</div><div class="line">                <span class="stringliteral">&quot; 0x%04x, target endpoint %d&quot;</span>,</div><div class="line">                simple_descriptor.<a name="a98"></a>target_node_id,</div><div class="line">                simple_descriptor.<a name="a99"></a>target_endpoint);</div><div class="line">            show(<span class="stringliteral">&quot;Client cluster count %d&quot;</span>,</div><div class="line">                simple_descriptor.<a name="a100"></a>client_cluster_count);</div><div class="line">            <span class="keywordflow">for</span> (i = 0; i &lt; simple_descriptor.client_cluster_count;</div><div class="line">                                    i++)</div><div class="line">                show(<span class="stringliteral">&quot; %d:0x%04x&quot;</span>, i,</div><div class="line">                    simple_descriptor.<a name="a101"></a>client_cluster[i]);</div><div class="line">            showln(<span class="stringliteral">&quot;&quot;</span>);</div><div class="line">            show(<span class="stringliteral">&quot;Server cluster count %d&quot;</span>,</div><div class="line">                simple_descriptor.<a name="a102"></a>server_cluster_count);</div><div class="line">            <span class="keywordflow">for</span> (i = 0; i &lt; simple_descriptor.server_cluster_count;</div><div class="line">                                    i++)</div><div class="line">                show(<span class="stringliteral">&quot; %d:0x%04x&quot;</span>, i,</div><div class="line">                    simple_descriptor.<a name="a103"></a>server_cluster[i]);</div><div class="line">            showln(<span class="stringliteral">&quot;&quot;</span>);</div><div class="line">        } <span class="keywordflow">else</span></div><div class="line">            showln(<span class="stringliteral">&quot;Simple descriptor response fail for result %d&quot;</span>,</div><div class="line">                    simple_descriptor.result);</div><div class="line">        <span class="keywordflow">break</span>;</div><div class="line">    <span class="keywordflow">case</span> ARTIK_ZIGBEE_RESPONSE_MATCH_DESC_RESP:</div><div class="line">        match_desc = (<a class="code" href="structartik__zigbee__match__desc__response.html">artik_zigbee_match_desc_response</a> *) payload;</div><div class="line">        <span class="keywordflow">if</span> (match_desc-&gt;<a name="a104"></a>result ==</div><div class="line">                ARTIK_ZIGBEE_SERVICE_DISCOVERY_RECEIVED) {</div><div class="line">            showln(<span class="stringliteral">&quot;Match description received&quot;</span>\</div><div class="line">                        <span class="stringliteral">&quot; node id 0x%04x, eui64 &quot;</span>,</div><div class="line">                match_desc-&gt;<a name="a105"></a>node_id, match_desc-&gt;<a name="a106"></a>count);</div><div class="line">            <span class="keywordflow">for</span> (i = 0; i &lt; match_desc-&gt;count; i++)</div><div class="line">                showln(<span class="stringliteral">&quot;endpoint %d&quot;</span>,</div><div class="line">                    match_desc-&gt;<a name="a107"></a>endpoint_list[i]);</div><div class="line">        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (match_desc-&gt;result ==</div><div class="line">                    ARTIK_ZIGBEE_SERVICE_DISCOVERY_DONE)</div><div class="line">            showln(<span class="stringliteral">&quot;match description response complete&quot;</span>);</div><div class="line">        <span class="keywordflow">else</span></div><div class="line">            showln(<span class="stringliteral">&quot;match description response fail for result %d&quot;</span>,</div><div class="line">                    match_desc-&gt;result);</div><div class="line">        <span class="keywordflow">break</span>;</div><div class="line">    <span class="keywordflow">case</span> ARTIK_ZIGBEE_RESPONSE_NOTIFICATION:</div><div class="line">        notification = *((<a class="code" href="artik__zigbee_8h.html#a11286182414861a99a5bfba0bccd744b">artik_zigbee_notification</a> *) payload);</div><div class="line">        <span class="keywordflow">switch</span> (notification) {</div><div class="line">        <span class="keywordflow">case</span> ARTIK_ZIGBEE_CMD_SUCCESS:</div><div class="line">            showln(<span class="stringliteral">&quot;NOTIFICATION: SUCCESS&quot;</span>);</div><div class="line">            <span class="keywordflow">break</span>;</div><div class="line"></div><div class="line">        <span class="keywordflow">case</span> ARTIK_ZIGBEE_CMD_ERR_PORT_PROBLEM:</div><div class="line">        <span class="keywordflow">case</span> ARTIK_ZIGBEE_CMD_ERR_NO_SUCH_COMMAND:</div><div class="line">        <span class="keywordflow">case</span> ARTIK_ZIGBEE_CMD_ERR_WRONG_NUMBER_OF_ARGUMENTS:</div><div class="line">        <span class="keywordflow">case</span> ARTIK_ZIGBEE_CMD_ERR_ARGUMENT_OUT_OF_RANGE:</div><div class="line">        <span class="keywordflow">case</span> ARTIK_ZIGBEE_CMD_ERR_ARGUMENT_SYNTAX_ERROR:</div><div class="line">        <span class="keywordflow">case</span> ARTIK_ZIGBEE_CMD_ERR_STRING_TOO_LONG:</div><div class="line">        <span class="keywordflow">case</span> ARTIK_ZIGBEE_CMD_ERR_INVALID_ARGUMENT_TYPE:</div><div class="line">        <span class="keywordflow">case</span> ARTIK_ZIGBEE_CMD_ERR:</div><div class="line">            showln(<span class="stringliteral">&quot;NOTIFICATION: ERROR(%d)&quot;</span>, notification);</div><div class="line">            <span class="keywordflow">break</span>;</div><div class="line"></div><div class="line">        <span class="keywordflow">default</span>:</div><div class="line">            showln(<span class="stringliteral">&quot;NOTIFICATION: ERROR(%d)&quot;</span>, notification);</div><div class="line">            <span class="keywordflow">break</span>;</div><div class="line">        }</div><div class="line">        <span class="keywordflow">break</span>;</div><div class="line"></div><div class="line">    <span class="keywordflow">case</span> ARTIK_ZIGBEE_RESPONSE_NETWORK_NOTIFICATION:</div><div class="line">        network_notification = *((<a class="code" href="artik__zigbee_8h.html#a846fae810969d7615a144f97144f5028">artik_zigbee_network_notification</a> *)</div><div class="line">                                payload);</div><div class="line">        <span class="keywordflow">switch</span> (network_notification) {</div><div class="line">        <span class="keywordflow">case</span> ARTIK_ZIGBEE_NETWORK_JOIN:</div><div class="line">            showln(<span class="stringliteral">&quot;NETWORK_NOTIFICATION: JOIN&quot;</span>);</div><div class="line">            <span class="keywordflow">if</span> (!conducted_by_commissioning) {</div><div class="line">                showln(<span class="stringliteral">&quot;Device discovering ...&quot;</span>);</div><div class="line">                ret = zb-&gt;<a class="code" href="structartik__zigbee__module.html#af1f240ba2a936735b84a8923cbc972a7">device_discover</a>();</div><div class="line">                <span class="keywordflow">if</span> (ret != <a class="code" href="artik__error_8h.html#a14bc2dfa42241600d567369cd25ddc70">S_OK</a>)</div><div class="line">                    log_err(<span class="stringliteral">&quot;Device discover failed:%s&quot;</span>,</div><div class="line">                            error_msg(ret));</div><div class="line">            }</div><div class="line">            <span class="keywordflow">break</span>;</div><div class="line"></div><div class="line">        <span class="keywordflow">case</span> ARTIK_ZIGBEE_NETWORK_LEAVE:</div><div class="line">            showln(<span class="stringliteral">&quot;NETWORK_NOTIFICATION: LEAVE&quot;</span>);</div><div class="line">            <span class="keywordflow">break</span>;</div><div class="line"></div><div class="line">        <span class="keywordflow">case</span> ARTIK_ZIGBEE_NETWORK_EXIST:</div><div class="line">            showln(<span class="stringliteral">&quot;NETWORK_NOTIFICATION: Network exist,&quot;</span>\</div><div class="line">                <span class="stringliteral">&quot; please leave current network and try again&quot;</span>);</div><div class="line">            <span class="keywordflow">break</span>;</div><div class="line"></div><div class="line">        <span class="keywordflow">case</span> ARTIK_ZIGBEE_NETWORK_FIND_FORM_SUCCESS:</div><div class="line">            showln(<span class="stringliteral">&quot;NETWORK_NOTIFICATION: FIND FORM SUCCESS&quot;</span>);</div><div class="line">            ret = zb-&gt;<a class="code" href="structartik__zigbee__module.html#a7734f3fd2c2c7d146658100f4d185b0b">network_permitjoin</a>(EASY_PJOIN_DURATION);</div><div class="line">            <span class="keywordflow">if</span> (ret != <a class="code" href="artik__error_8h.html#a14bc2dfa42241600d567369cd25ddc70">S_OK</a>)</div><div class="line">                log_err(<span class="stringliteral">&quot;zigbee_network_permitjoin failed:%s&quot;</span>,</div><div class="line">                                error_msg(ret));</div><div class="line">            <span class="keywordflow">break</span>;</div><div class="line"></div><div class="line">        <span class="keywordflow">case</span> ARTIK_ZIGBEE_NETWORK_FIND_FORM_FAILED:</div><div class="line">            showln(<span class="stringliteral">&quot;NETWORK_NOTIFICATION: FIND FORM FAILED&quot;</span>);</div><div class="line">            <span class="keywordflow">break</span>;</div><div class="line"></div><div class="line">        <span class="keywordflow">case</span> ARTIK_ZIGBEE_NETWORK_FIND_JOIN_SUCCESS:</div><div class="line">            showln(<span class="stringliteral">&quot;NETWORK_NOTIFICATION: FIND JOIN SUCCESS&quot;</span>);</div><div class="line">            <span class="keywordflow">if</span> (!conducted_by_commissioning) {</div><div class="line">                showln(<span class="stringliteral">&quot;Device discovering ...&quot;</span>);</div><div class="line">                ret = zb-&gt;<a class="code" href="structartik__zigbee__module.html#af1f240ba2a936735b84a8923cbc972a7">device_discover</a>();</div><div class="line">                <span class="keywordflow">if</span> (ret != <a class="code" href="artik__error_8h.html#a14bc2dfa42241600d567369cd25ddc70">S_OK</a>)</div><div class="line">                    log_err(<span class="stringliteral">&quot;Device discover failed:%s&quot;</span>,</div><div class="line">                                error_msg(ret));</div><div class="line">            }</div><div class="line">            <span class="keywordflow">break</span>;</div><div class="line"></div><div class="line">        <span class="keywordflow">case</span> ARTIK_ZIGBEE_NETWORK_FIND_JOIN_FAILED:</div><div class="line">            showln(<span class="stringliteral">&quot;NETWORK_NOTIFICATION: FIND JOIN FAILED&quot;</span>);</div><div class="line">            <span class="keywordflow">break</span>;</div><div class="line"></div><div class="line">        <span class="keywordflow">default</span>:</div><div class="line">            showln(<span class="stringliteral">&quot;NETWORK_NOTIFICATION: %d&quot;</span>,</div><div class="line">                            network_notification);</div><div class="line">            <span class="keywordflow">break</span>;</div><div class="line">        }</div><div class="line">        <span class="keywordflow">break</span>;</div><div class="line"></div><div class="line">    <span class="keywordflow">case</span> ARTIK_ZIGBEE_RESPONSE_NETWORK_FIND:</div><div class="line">        net_find = (<a class="code" href="structartik__zigbee__network__find__result.html">artik_zigbee_network_find_result</a> *)payload;</div><div class="line">        <span class="keywordflow">switch</span> (net_find-&gt;<a name="a108"></a>find_status) {</div><div class="line">        <span class="keywordflow">case</span> ARTIK_ZIGBEE_NETWORK_FOUND:</div><div class="line">            <span class="keywordflow">if</span> (nwk_find_size &lt; NWK_FIND_MAX_SIZE) {</div><div class="line">                memcpy(&amp;nwk_found_list[nwk_find_size], net_find,</div><div class="line">                    <span class="keyword">sizeof</span>(</div><div class="line">                    <a class="code" href="structartik__zigbee__network__find__result.html">artik_zigbee_network_find_result</a>));</div><div class="line">                nwk_find_size++;</div><div class="line"></div><div class="line">                showln(<span class="stringliteral">&quot;%d: network channel(%d),&quot;</span>\</div><div class="line">                    <span class="stringliteral">&quot; tx power(%d), pan id(0x%04X)&quot;</span>,</div><div class="line">                    nwk_find_size,</div><div class="line">                    net_find-&gt;network_info.channel,</div><div class="line">                    net_find-&gt;network_info.tx_power,</div><div class="line">                    net_find-&gt;network_info.pan_id);</div><div class="line">            } <span class="keywordflow">else</span></div><div class="line">                showln(<span class="stringliteral">&quot;Network found out of max size %d&quot;</span>,</div><div class="line">                    NWK_FIND_MAX_SIZE);</div><div class="line">            <span class="keywordflow">break</span>;</div><div class="line"></div><div class="line">        <span class="keywordflow">case</span> ARTIK_ZIGBEE_NETWORK_FIND_FINISHED:</div><div class="line">            showln(<span class="stringliteral">&quot;Network find finished&quot;</span>);</div><div class="line">            <span class="keywordflow">if</span> (current_func == _func_network_find_join)</div><div class="line">                _func_network_found_end_show();</div><div class="line">            <span class="keywordflow">break</span>;</div><div class="line"></div><div class="line">        <span class="keywordflow">case</span> ARTIK_ZIGBEE_NETWORK_FIND_ERR:</div><div class="line">            showln(<span class="stringliteral">&quot;Network find error&quot;</span>);</div><div class="line">            <span class="keywordflow">if</span> (current_func == _func_network_find_join) {</div><div class="line">                _func_network_found_show();</div><div class="line">                _func_network_found_end_show();</div><div class="line">            }</div><div class="line">            <span class="keywordflow">break</span>;</div><div class="line"></div><div class="line">        <span class="keywordflow">default</span>:</div><div class="line">            showln(<span class="stringliteral">&quot;Network find unknown status&quot;</span>);</div><div class="line">            <span class="keywordflow">break</span>;</div><div class="line">        }</div><div class="line">        <span class="keywordflow">break</span>;</div><div class="line"></div><div class="line">    <span class="keywordflow">case</span> ARTIK_ZIGBEE_RESPONSE_DEVICE_DISCOVER:</div><div class="line">        device_discovery = (<a class="code" href="structartik__zigbee__device__discovery.html">artik_zigbee_device_discovery</a> *) payload;</div><div class="line">        <span class="keywordflow">switch</span> (device_discovery-&gt;<a name="a109"></a>status) {</div><div class="line">        <span class="keywordflow">case</span> ARTIK_ZIGBEE_DEVICE_DISCOVERY_START:</div><div class="line">            showln(<span class="stringliteral">&quot;Device discovery start&quot;</span>);</div><div class="line">            <span class="keywordflow">break</span>;</div><div class="line">        <span class="keywordflow">case</span> ARTIK_ZIGBEE_DEVICE_DISCOVERY_FOUND:</div><div class="line">            showln(<span class="stringliteral">&quot;Device discovery found:&quot;</span>);</div><div class="line">            show_device(&amp;(device_discovery-&gt;<a name="a110"></a>device));</div><div class="line">            <span class="keywordflow">break</span>;</div><div class="line">        <span class="keywordflow">case</span> ARTIK_ZIGBEE_DEVICE_DISCOVERY_IN_PROGRESS:</div><div class="line">            showln(<span class="stringliteral">&quot;Device discovery in progress&quot;</span>);</div><div class="line">            showln(<span class="stringliteral">&quot;Done&quot;</span>);</div><div class="line">            <span class="keywordflow">break</span>;</div><div class="line">        <span class="keywordflow">case</span> ARTIK_ZIGBEE_DEVICE_DISCOVERY_DONE:</div><div class="line">            showln(<span class="stringliteral">&quot;Done&quot;</span>);</div><div class="line">            <span class="keywordflow">break</span>;</div><div class="line">        <span class="keywordflow">case</span> ARTIK_ZIGBEE_DEVICE_DISCOVERY_NO_DEVICE:</div><div class="line">            showln(<span class="stringliteral">&quot;Device discovery no device&quot;</span>);</div><div class="line">            showln(<span class="stringliteral">&quot;Done&quot;</span>);</div><div class="line">            <span class="keywordflow">break</span>;</div><div class="line">        <span class="keywordflow">case</span> ARTIK_ZIGBEE_DEVICE_DISCOVERY_ERROR:</div><div class="line">            showln(<span class="stringliteral">&quot;Device discovery error&quot;</span>);</div><div class="line">            <span class="keywordflow">break</span>;</div><div class="line">        <span class="keywordflow">case</span> ARTIK_ZIGBEE_DEVICE_DISCOVERY_CHANGED:</div><div class="line">            showln(<span class="stringliteral">&quot;Device discovery changed:&quot;</span>);</div><div class="line">            show_device(&amp;(device_discovery-&gt;device));</div><div class="line">            <span class="keywordflow">break</span>;</div><div class="line">        <span class="keywordflow">case</span> ARTIK_ZIGBEE_DEVICE_DISCOVERY_LOST:</div><div class="line">            showln(<span class="stringliteral">&quot;Device discovery lost:&quot;</span>);</div><div class="line">            show_device(&amp;(device_discovery-&gt;device));</div><div class="line">            <span class="keywordflow">break</span>;</div><div class="line">        <span class="keywordflow">default</span>:</div><div class="line">            showln(<span class="stringliteral">&quot;Discovery device unknown result&quot;</span>);</div><div class="line">            showln(<span class="stringliteral">&quot;Done&quot;</span>);</div><div class="line">            <span class="keywordflow">break</span>;</div><div class="line">        }</div><div class="line">        <span class="keywordflow">break</span>;</div><div class="line"></div><div class="line">    <span class="keywordflow">case</span> ARTIK_ZIGBEE_RESPONSE_GROUPS_INFO:</div><div class="line">        group_info = (<a class="code" href="structartik__zigbee__groups__info.html">artik_zigbee_groups_info</a> *)payload;</div><div class="line">        showln(<span class="stringliteral">&quot;GROUPS: group ID(%d) cmd(%d)&quot;</span>,</div><div class="line">               group_info-&gt;<a name="a111"></a>group_id, group_info-&gt;<a name="a112"></a>group_cmd);</div><div class="line"></div><div class="line">        <span class="keywordflow">switch</span> (group_info-&gt;group_cmd) {</div><div class="line">        <span class="keywordflow">case</span> ARTIK_ZIGBEE_GROUPS_ADD_IF_IDENTIFYING:</div><div class="line">            showln(<span class="stringliteral">&quot;ARTIK_ZIGBEE_GROUPS_ADD_IF_IDENTIFYING&quot;</span>);</div><div class="line">            <span class="keywordflow">break</span>;</div><div class="line">        <span class="keywordflow">case</span> ARTIK_ZIGBEE_GROUPS_ADD:</div><div class="line">            showln(<span class="stringliteral">&quot;ARTIK_ZIGBEE_GROUPS_ADD&quot;</span>);</div><div class="line">            <span class="keywordflow">break</span>;</div><div class="line">        <span class="keywordflow">case</span> ARTIK_ZIGBEE_GROUPS_REMOVE:</div><div class="line">            showln(<span class="stringliteral">&quot;ARTIK_ZIGBEE_GROUPS_REMOVE&quot;</span>);</div><div class="line">            <span class="keywordflow">break</span>;</div><div class="line">        <span class="keywordflow">case</span> ARTIK_ZIGBEE_GROUPS_REMOVE_ALL:</div><div class="line">            showln(<span class="stringliteral">&quot;ARTIK_ZIGBEE_GROUPS_REMOVE_ALL&quot;</span>);</div><div class="line">            <span class="keywordflow">break</span>;</div><div class="line">        <span class="keywordflow">default</span>:</div><div class="line">            showln(<span class="stringliteral">&quot;Groups command not support&quot;</span>);</div><div class="line">        }</div><div class="line">        test_device = get_test_device_by_endpoint_id(</div><div class="line">                        group_info-&gt;<a name="a113"></a>endpoint_id);</div><div class="line">        <span class="keywordflow">if</span> (test_device == NULL) {</div><div class="line">            log_err(<span class="stringliteral">&quot;Not found endpoint id:%d&quot;</span>,</div><div class="line">                        group_info-&gt;endpoint_id);</div><div class="line">            <span class="keywordflow">break</span>;</div><div class="line">        }</div><div class="line"></div><div class="line">        ret = test_device-&gt;groups_get_local_name_support(</div><div class="line">                        test_device-&gt;handle,</div><div class="line">                        group_info-&gt;endpoint_id);</div><div class="line">        <span class="keywordflow">if</span> (ret == <a class="code" href="artik__error_8h.html#a14bc2dfa42241600d567369cd25ddc70">S_OK</a>) {</div><div class="line">            showln(<span class="stringliteral">&quot;ARTIK_ZIGBEE_GROUPS: name supported by ep(%d)&quot;</span>,</div><div class="line">                     group_info-&gt;endpoint_id);</div><div class="line">            ret = test_device-&gt;groups_set_local_name_support(</div><div class="line">                        test_device-&gt;handle, <span class="keyword">false</span>);</div><div class="line">            <span class="keywordflow">if</span> (ret != <a class="code" href="artik__error_8h.html#a14bc2dfa42241600d567369cd25ddc70">S_OK</a>) {</div><div class="line">                showln(<span class="stringliteral">&quot;Setting local groups name support&quot;</span>\</div><div class="line">                    <span class="stringliteral">&quot; attribute value to FALSE failed: %s&quot;</span>,</div><div class="line">                    error_msg(ret));</div><div class="line">            } <span class="keywordflow">else</span></div><div class="line">                showln(<span class="stringliteral">&quot;Setting local groups name support&quot;</span>\</div><div class="line">                    <span class="stringliteral">&quot; attribute value to FALSE succeeded&quot;</span>);</div><div class="line">        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (ret == <a class="code" href="artik__error_8h.html#ac32e2eaa0134cd9626a55a2587662501">E_NOT_SUPPORTED</a>) {</div><div class="line">            showln(<span class="stringliteral">&quot;ARTIK_ZIGBEE_GROUPS: name not supported&quot;</span>\</div><div class="line">                    <span class="stringliteral">&quot; by ep(%d)&quot;</span>,</div><div class="line">                    group_info-&gt;endpoint_id);</div><div class="line">            ret = test_device-&gt;groups_set_local_name_support(</div><div class="line">                        test_device-&gt;handle, <span class="keyword">true</span>);</div><div class="line">            <span class="keywordflow">if</span> (ret != <a class="code" href="artik__error_8h.html#a14bc2dfa42241600d567369cd25ddc70">S_OK</a>) {</div><div class="line">                showln(<span class="stringliteral">&quot;Setting local groups name support&quot;</span>\</div><div class="line">                    <span class="stringliteral">&quot; attribute value to TRUE failed: %s&quot;</span>,</div><div class="line">                    error_msg(ret));</div><div class="line">            } <span class="keywordflow">else</span></div><div class="line">                showln(<span class="stringliteral">&quot;Setting local groups name support&quot;</span>\</div><div class="line">                    <span class="stringliteral">&quot; attribute value to TRUE succeeded&quot;</span>);</div><div class="line">        } <span class="keywordflow">else</span></div><div class="line">            showln(<span class="stringliteral">&quot;ARTIK_ZIGBEE_GROUPS: get name support&quot;</span>\</div><div class="line">                    <span class="stringliteral">&quot; failed: %s&quot;</span>,</div><div class="line">                    error_msg(ret));</div><div class="line">        <span class="keywordflow">break</span>;</div><div class="line"></div><div class="line">    <span class="keywordflow">case</span> ARTIK_ZIGBEE_RESPONSE_ATTRIBUTE_CHANGE:</div><div class="line">        _on_callback_attr_changed((</div><div class="line">            <a class="code" href="structartik__zigbee__attribute__changed__response.html">artik_zigbee_attribute_changed_response</a> *)payload);</div><div class="line">        <span class="keywordflow">break</span>;</div><div class="line"></div><div class="line">    <span class="keywordflow">case</span> ARTIK_ZIGBEE_RESPONSE_CLIENT_TO_SERVER_COMMAND_RECEIVED:</div><div class="line">        received_command = (<a class="code" href="structartik__zigbee__received__command.html">artik_zigbee_received_command</a> *)payload;</div><div class="line">        <span class="keywordflow">if</span> (received_command-&gt;<a name="a114"></a>is_global_command)</div><div class="line">            showln(<span class="stringliteral">&quot;receive global command:0x%02X endpoint:%d&quot;</span>\</div><div class="line">                <span class="stringliteral">&quot; cluster:0x%04X&quot;</span>,</div><div class="line">                received_command-&gt;<a name="a115"></a>command_id,</div><div class="line">                received_command-&gt;<a name="a116"></a>dest_endpoint_id,</div><div class="line">                received_command-&gt;<a name="a117"></a>cluster_id);</div><div class="line">        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (received_command-&gt;dest_endpoint_id ==</div><div class="line">                        ARTIK_ZIGBEE_BROADCAST_ENDPOINT)</div><div class="line">            showln(<span class="stringliteral">&quot;receive broadcast command cluster:0x%04X&quot;</span>\</div><div class="line">                <span class="stringliteral">&quot; command:0x%02X&quot;</span>,</div><div class="line">                received_command-&gt;cluster_id,</div><div class="line">                received_command-&gt;command_id);</div><div class="line">        <span class="keywordflow">else</span></div><div class="line">            showln(<span class="stringliteral">&quot;receive command endpoint:%d cluster:0x%04X&quot;</span>\</div><div class="line">                <span class="stringliteral">&quot; command:0x%02X&quot;</span>,</div><div class="line">                received_command-&gt;dest_endpoint_id,</div><div class="line">                received_command-&gt;cluster_id,</div><div class="line">                received_command-&gt;command_id);</div><div class="line">        <span class="keywordflow">if</span> (received_command-&gt;<a name="a118"></a>payload_length &gt; 0)</div><div class="line">            showln(<span class="stringliteral">&quot;receive command:0x%02X payload length is %d&quot;</span>,</div><div class="line">                received_command-&gt;command_id,</div><div class="line">                received_command-&gt;payload_length);</div><div class="line">        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (received_command-&gt;payload_length == 0)</div><div class="line">            showln(<span class="stringliteral">&quot;receive command:0x%02X payload is empty&quot;</span>,</div><div class="line">                received_command-&gt;command_id);</div><div class="line">        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (received_command-&gt;payload_length == -1)</div><div class="line">            showln(<span class="stringliteral">&quot;receive command:0x%02X payload length over:%d&quot;</span>,</div><div class="line">                received_command-&gt;command_id,</div><div class="line">            ARTIK_ZIGBEE_MAX_RECEIVED_COMMAND_PLAYLOAD_LENGTH);</div><div class="line">        <span class="keywordflow">else</span></div><div class="line">            showln(<span class="stringliteral">&quot;receive command:0x%02X unrecognized payload&quot;</span>\</div><div class="line">                <span class="stringliteral">&quot; length is %d&quot;</span>,</div><div class="line">                received_command-&gt;command_id,</div><div class="line">                received_command-&gt;payload_length);</div><div class="line">        <span class="keywordflow">break</span>;</div><div class="line"></div><div class="line">    <span class="keywordflow">case</span> ARTIK_ZIGBEE_RESPONSE_REPORTING_CONFIGURE:</div><div class="line">        reporting_info = (<a class="code" href="structartik__zigbee__reporting__info.html">artik_zigbee_reporting_info</a> *)payload;</div><div class="line">        <span class="keywordflow">if</span> (reporting_info-&gt;<a name="a119"></a>used == <span class="keyword">true</span>)</div><div class="line">            showln(<span class="stringliteral">&quot;get reporting configure ep:%d cluster:%d&quot;</span>\</div><div class="line">                <span class="stringliteral">&quot; attr:%d min_interval:%d max_interval:%d&quot;</span>\</div><div class="line">                <span class="stringliteral">&quot; reportable_change:%d&quot;</span>,</div><div class="line">                reporting_info-&gt;<a name="a120"></a>endpoint_id,</div><div class="line">                reporting_info-&gt;<a name="a121"></a>cluster_id,</div><div class="line">                reporting_info-&gt;<a name="a122"></a>attribute_id,</div><div class="line">                reporting_info-&gt;<a name="a123"></a>reported.<a name="a124"></a><a class="code" href="structartik__zigbee__reporting__info.html#a2a94c29d1e66a98cd429dda120f200be">min_interval</a>,</div><div class="line">                reporting_info-&gt;reported.<a name="a125"></a><a class="code" href="structartik__zigbee__reporting__info.html#af47cfabee8c4d45635e9afc26d340a48">max_interval</a>,</div><div class="line">                reporting_info-&gt;reported.<a name="a126"></a><a class="code" href="structartik__zigbee__reporting__info.html#a4bf4e7bb6315665b9d98744f97883818">reportable_change</a>);</div><div class="line">        <span class="keywordflow">else</span></div><div class="line">            showln(<span class="stringliteral">&quot;removed reporting configure cluster:%d&quot;</span>\</div><div class="line">                <span class="stringliteral">&quot; attr:%d min_interval:%d max_interval:%d&quot;</span>\</div><div class="line">                <span class="stringliteral">&quot; reportable_change:%d&quot;</span>,</div><div class="line">                reporting_info-&gt;cluster_id,</div><div class="line">                reporting_info-&gt;attribute_id,</div><div class="line">                reporting_info-&gt;reported.<a class="code" href="structartik__zigbee__reporting__info.html#a2a94c29d1e66a98cd429dda120f200be">min_interval</a>,</div><div class="line">                reporting_info-&gt;reported.<a class="code" href="structartik__zigbee__reporting__info.html#af47cfabee8c4d45635e9afc26d340a48">max_interval</a>,</div><div class="line">                reporting_info-&gt;reported.<a class="code" href="structartik__zigbee__reporting__info.html#a4bf4e7bb6315665b9d98744f97883818">reportable_change</a>);</div><div class="line">        <span class="keywordflow">break</span>;</div><div class="line"></div><div class="line">    <span class="keywordflow">case</span> ARTIK_ZIGBEE_RESPONSE_REPORT_ATTRIBUTE:</div><div class="line">        report_attr_info = (<a class="code" href="structartik__zigbee__report__attribute__info.html">artik_zigbee_report_attribute_info</a> *)</div><div class="line">                                payload;</div><div class="line">        <span class="keywordflow">switch</span> (report_attr_info-&gt;<a name="a127"></a>attribute_type) {</div><div class="line">        <span class="keywordflow">case</span> ARTIK_ZIGBEE_ATTR_ILLUMINANCE:</div><div class="line">            showln(<span class="stringliteral">&quot;Report attribute: Illuminance: %d&quot;</span>,</div><div class="line">                   report_attr_info-&gt;<a name="a128"></a>data.<a name="a129"></a>value);</div><div class="line">            reporting_measured_illum_count++;</div><div class="line">            <span class="keywordflow">if</span> (reporting_measured_illum_count &gt;</div><div class="line">                            REPORTING_MAX_COUNT) {</div><div class="line">                _stop_reporting(</div><div class="line">                ARTIK_ZIGBEE_REPORTING_MEASURED_ILLUMINANCE);</div><div class="line">                reporting_measured_illum_count = 0;</div><div class="line">            }</div><div class="line">            <span class="keywordflow">break</span>;</div><div class="line">        <span class="keywordflow">default</span>:</div><div class="line">            log_err(<span class="stringliteral">&quot;Not supported attribute&quot;</span>);</div><div class="line">            <span class="keywordflow">break</span>;</div><div class="line">        }</div><div class="line">        <span class="keywordflow">break</span>;</div><div class="line"></div><div class="line">    <span class="keywordflow">case</span> ARTIK_ZIGBEE_RESPONSE_IDENTIFY_FEEDBACK_START:</div><div class="line">        identify_info = (<a class="code" href="structartik__zigbee__identify__feedback__info.html">artik_zigbee_identify_feedback_info</a> *)payload;</div><div class="line">        showln(<span class="stringliteral">&quot;Identify feedback start with %d seconds by ep(%d)&quot;</span>,</div><div class="line">               identify_info-&gt;<a name="a130"></a>duration, identify_info-&gt;<a name="a131"></a>endpoint_id);</div><div class="line">        <span class="keywordflow">break</span>;</div><div class="line"></div><div class="line">    <span class="keywordflow">case</span> ARTIK_ZIGBEE_RESPONSE_IDENTIFY_FEEDBACK_STOP:</div><div class="line">        identify_info = (<a class="code" href="structartik__zigbee__identify__feedback__info.html">artik_zigbee_identify_feedback_info</a> *)payload;</div><div class="line">        showln(<span class="stringliteral">&quot;Identify feedback stop by ep(%d)&quot;</span>,</div><div class="line">                        identify_info-&gt;endpoint_id);</div><div class="line">        <span class="keywordflow">break</span>;</div><div class="line"></div><div class="line">    <span class="keywordflow">case</span> ARTIK_ZIGBEE_RESPONSE_COMMISSIONING_STATUS:</div><div class="line">        commissioning_state = *((<a class="code" href="artik__zigbee_8h.html#ab047b954fe7b9b67facb53a50eb45d5c">artik_zigbee_commissioning_state</a> *)</div><div class="line">                                payload);</div><div class="line">        <span class="keywordflow">switch</span> (commissioning_state) {</div><div class="line">        <span class="keywordflow">case</span> ARTIK_ZIGBEE_COMMISSIONING_ERROR:</div><div class="line">            showln(<span class="stringliteral">&quot;Commissioning: error&quot;</span>);</div><div class="line">            showln(<span class="stringliteral">&quot;Done&quot;</span>);</div><div class="line">            <span class="keywordflow">break</span>;</div><div class="line">        <span class="keywordflow">case</span> ARTIK_ZIGBEE_COMMISSIONING_ERR_IN_PROGRESS:</div><div class="line">            showln(<span class="stringliteral">&quot;Commissioning: error in progress&quot;</span>);</div><div class="line">            showln(<span class="stringliteral">&quot;Done&quot;</span>);</div><div class="line">            <span class="keywordflow">break</span>;</div><div class="line">        <span class="keywordflow">case</span> ARTIK_ZIGBEE_COMMISSIONING_NETWORK_STEERING_FORM:</div><div class="line">            showln(<span class="stringliteral">&quot;Commissioning: network steering form&quot;</span>);</div><div class="line">            <span class="keywordflow">break</span>;</div><div class="line">        <span class="keywordflow">case</span> ARTIK_ZIGBEE_COMMISSIONING_NETWORK_STEERING_SUCCESS:</div><div class="line">            showln(<span class="stringliteral">&quot;Commissioning: network steering success&quot;</span>);</div><div class="line">            <span class="keywordflow">break</span>;</div><div class="line">        <span class="keywordflow">case</span> ARTIK_ZIGBEE_COMMISSIONING_NETWORK_STEERING_FAILED:</div><div class="line">            showln(<span class="stringliteral">&quot;Commissioning: network steering failed&quot;</span>);</div><div class="line">            <span class="keywordflow">break</span>;</div><div class="line">        <span class="keywordflow">case</span> ARTIK_ZIGBEE_COMMISSIONING_WAIT_NETWORK_STEERING:</div><div class="line">            showln(<span class="stringliteral">&quot;Commissioning: wait for network steering&quot;</span>);</div><div class="line">            <span class="keywordflow">break</span>;</div><div class="line">        <span class="keywordflow">case</span> ARTIK_ZIGBEE_COMMISSIONING_INITIATOR_SUCCESS:</div><div class="line">            _commissioning_initiator_run(zb, CS_INITIATOR_SUCCESS);</div><div class="line">            <span class="keywordflow">break</span>;</div><div class="line">        <span class="keywordflow">case</span> ARTIK_ZIGBEE_COMMISSIONING_INITIATOR_FAILED:</div><div class="line">            _commissioning_initiator_run(zb, CS_INITIATOR_FAILED);</div><div class="line">            <span class="keywordflow">break</span>;</div><div class="line">        <span class="keywordflow">case</span> ARTIK_ZIGBEE_COMMISSIONING_INITIATOR_STOP:</div><div class="line">            showln(<span class="stringliteral">&quot;Commissioning: initiator stopped&quot;</span>);</div><div class="line">            showln(<span class="stringliteral">&quot;Done&quot;</span>);</div><div class="line">            <span class="keywordflow">break</span>;</div><div class="line">        <span class="keywordflow">case</span> ARTIK_ZIGBEE_COMMISSIONING_TARGET_SUCCESS:</div><div class="line">            _commissioning_target_run(zb, CS_TARGET_SUCCESS);</div><div class="line">            <span class="keywordflow">break</span>;</div><div class="line">        <span class="keywordflow">case</span> ARTIK_ZIGBEE_COMMISSIONING_TARGET_FAILED:</div><div class="line">            _commissioning_target_run(zb, CS_TARGET_FAILED);</div><div class="line">            <span class="keywordflow">break</span>;</div><div class="line">        <span class="keywordflow">case</span> ARTIK_ZIGBEE_COMMISSIONING_TARGET_STOP:</div><div class="line">            showln(<span class="stringliteral">&quot;Commissioning: target stopped&quot;</span>);</div><div class="line">            showln(<span class="stringliteral">&quot;Done&quot;</span>);</div><div class="line">            <span class="keywordflow">break</span>;</div><div class="line">        }</div><div class="line">        <span class="keywordflow">break</span>;</div><div class="line"></div><div class="line">    <span class="keywordflow">case</span> ARTIK_ZIGBEE_RESPONSE_COMMISSIONING_TARGET_INFO:</div><div class="line">        target_info = (<a class="code" href="structartik__zigbee__commissioning__target__info.html">artik_zigbee_commissioning_target_info</a> *)payload;</div><div class="line">        showln(<span class="stringliteral">&quot;Commissioning: found target id:0x%04X, endpoint:%d&quot;</span>,</div><div class="line">            target_info-&gt;<a name="a132"></a>node_id, target_info-&gt;<a name="a133"></a>endpoint_id);</div><div class="line">        <span class="keywordflow">break</span>;</div><div class="line"></div><div class="line">    <span class="keywordflow">case</span> ARTIK_ZIGBEE_RESPONSE_COMMISSIONING_BOUND_INFO:</div><div class="line">        bound_info = (<a class="code" href="structartik__zigbee__commissioning__bound__info.html">artik_zigbee_commissioning_bound_info</a> *)payload;</div><div class="line">        showln(<span class="stringliteral">&quot;Commissioning: bound target endpoint:%d,&quot;</span>\</div><div class="line">            <span class="stringliteral">&quot; clusterId:0x%04X&quot;</span>,</div><div class="line">            bound_info-&gt;<a name="a134"></a>endpoint_id, bound_info-&gt;<a name="a135"></a>cluster_id);</div><div class="line">        <span class="keywordflow">break</span>;</div><div class="line"></div><div class="line">    <span class="keywordflow">case</span> ARTIK_ZIGBEE_RESPONSE_BASIC_RESET_TO_FACTORY:</div><div class="line">        showln(<span class="stringliteral">&quot;Basic reset to factory defauts by endpoint %d&quot;</span>,</div><div class="line">                            *((<span class="keywordtype">int</span> *) payload));</div><div class="line">        <span class="keywordflow">break</span>;</div><div class="line"></div><div class="line">    <span class="keywordflow">case</span> ARTIK_ZIGBEE_RESPONSE_LEVEL_CONTROL:</div><div class="line">        _on_level_control_command_callback((</div><div class="line">                <a class="code" href="structartik__zigbee__level__control__command.html">artik_zigbee_level_control_command</a> *) payload);</div><div class="line">        <span class="keywordflow">break</span>;</div><div class="line"></div><div class="line">    <span class="keywordflow">default</span>:</div><div class="line">        <span class="keywordflow">break</span>;</div><div class="line">    }</div><div class="line"></div><div class="line">    log_dbg(<span class="stringliteral">&quot;[testzigbee] callback end\n&quot;</span>);</div><div class="line"></div><div class="line">    <a class="code" href="artik__module_8h.html#a2b26deff010fc08966179cb6f34d9f66">artik_release_api_module</a>(zb);</div><div class="line">}</div><div class="line"></div><div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span> _on_timer_callback(<span class="keyword">enum</span> timer_command cmd, <span class="keywordtype">int</span> <span class="keywordtype">id</span>, <span class="keywordtype">void</span> *user_data)</div><div class="line">{</div><div class="line">    <a class="code" href="structartik__zigbee__module.html">artik_zigbee_module</a> *zb;</div><div class="line"></div><div class="line">    zb = (<a class="code" href="structartik__zigbee__module.html">artik_zigbee_module</a> *)<a class="code" href="artik__module_8h.html#a5dd30d1b28a0ab577a06e417cfb28aa5">artik_request_api_module</a>(<span class="stringliteral">&quot;zigbee&quot;</span>);</div><div class="line"></div><div class="line">    <span class="keywordflow">switch</span> (cmd) {</div><div class="line">    <span class="keywordflow">case</span> TIMER_CS_TARGET_TIMEOUT:</div><div class="line">        <span class="keywordflow">if</span> (cs_target_timeout_id == <span class="keywordtype">id</span>)</div><div class="line">            _commissioning_target_run(zb, CS_TARGET_TIMEOUT);</div><div class="line">        <span class="keywordflow">break</span>;</div><div class="line">    <span class="keywordflow">default</span>:</div><div class="line">        log_err(<span class="stringliteral">&quot;Unexpected timer callback:%d&quot;</span>, cmd);</div><div class="line">        <span class="keywordflow">break</span>;</div><div class="line">    }</div><div class="line"></div><div class="line">    <span class="keywordflow">if</span> (user_data != NULL)</div><div class="line">        free(user_data);</div><div class="line"></div><div class="line">    <a class="code" href="artik__module_8h.html#a2b26deff010fc08966179cb6f34d9f66">artik_release_api_module</a>(zb);</div><div class="line">}</div><div class="line"></div><div class="line"><span class="keyword">static</span> <span class="keywordtype">int</span> _on_keyboard_received(<span class="keywordtype">int</span> fd, <span class="keyword">enum</span> <a class="code" href="artik__loop_8h.html#aae0ec264a4ec3d92b8ee632d19001aca">watch_io</a> io, <span class="keywordtype">void</span> *user_data)</div><div class="line">{</div><div class="line">    <span class="keywordtype">char</span> input[KEYBOARD_INPUT_SIZE];</div><div class="line"></div><div class="line">    <span class="keywordflow">if</span> (fd != STDIN_FILENO)</div><div class="line">        log_err(<span class="stringliteral">&quot;Wrong fd: %d&quot;</span>, fd);</div><div class="line"></div><div class="line">    <span class="keywordflow">if</span> (io != <a name="a136"></a><a class="code" href="artik__loop_8h.html#aae0ec264a4ec3d92b8ee632d19001acaab2a48d8b68e4b4526a4a80b5c59ceb38">WATCH_IO_IN</a> &amp;&amp; io != <a name="a137"></a><a class="code" href="artik__loop_8h.html#aae0ec264a4ec3d92b8ee632d19001acaa98cfc386c7a12b191388e7dcdb9a71cf">WATCH_IO_ERR</a> &amp;&amp; io != <a name="a138"></a><a class="code" href="artik__loop_8h.html#aae0ec264a4ec3d92b8ee632d19001acaa736da6ba944100edc1dec0f148b43fc1">WATCH_IO_HUP</a> &amp;&amp;</div><div class="line">        io != <a name="a139"></a><a class="code" href="artik__loop_8h.html#aae0ec264a4ec3d92b8ee632d19001acaa9340721e92e010e146313296ca105ce1">WATCH_IO_NVAL</a>)</div><div class="line">        log_err(<span class="stringliteral">&quot;Wrong io: %d&quot;</span>, io);</div><div class="line"></div><div class="line">    <span class="keywordflow">if</span> (user_data)</div><div class="line">        log_err(<span class="stringliteral">&quot;Wrong user data: %p&quot;</span>, user_data);</div><div class="line"></div><div class="line">    <span class="keywordflow">if</span> (fgets(input, KEYBOARD_INPUT_SIZE, stdin) == NULL)</div><div class="line">        <span class="keywordflow">return</span> 1;</div><div class="line"></div><div class="line">    current_func(input, KEYBOARD_INPUT_SIZE);</div><div class="line"></div><div class="line">    <span class="keywordflow">return</span> 1;</div><div class="line">}</div><div class="line"></div><div class="line"></div><div class="line"><span class="keywordtype">int</span> main(<span class="keywordtype">int</span> argc, <span class="keywordtype">char</span> *argv[])</div><div class="line">{</div><div class="line">    <a class="code" href="structartik__zigbee__module.html">artik_zigbee_module</a> *zb;</div><div class="line">    <a name="_a140"></a><a class="code" href="structartik__loop__module.html">artik_loop_module</a> *loop;</div><div class="line">    <span class="keyword">enum</span> <a class="code" href="artik__loop_8h.html#aae0ec264a4ec3d92b8ee632d19001aca">watch_io</a> io;</div><div class="line"></div><div class="line">    <span class="keywordflow">if</span> (!<a name="a141"></a><a class="code" href="artik__module_8h.html#aa25c1a2b432cb7009448764e64e8bbcd">artik_is_module_available</a>(ARTIK_MODULE_ZIGBEE)) {</div><div class="line">        log_err(<span class="stringliteral">&quot;Module zigbee is not available&quot;</span>);</div><div class="line">        <span class="keywordflow">return</span> -1;</div><div class="line">    }</div><div class="line"></div><div class="line">    zb = (<a class="code" href="structartik__zigbee__module.html">artik_zigbee_module</a> *)<a class="code" href="artik__module_8h.html#a5dd30d1b28a0ab577a06e417cfb28aa5">artik_request_api_module</a>(<span class="stringliteral">&quot;zigbee&quot;</span>);</div><div class="line">    loop = (<a class="code" href="structartik__loop__module.html">artik_loop_module</a> *)<a class="code" href="artik__module_8h.html#a5dd30d1b28a0ab577a06e417cfb28aa5">artik_request_api_module</a>(<span class="stringliteral">&quot;loop&quot;</span>);</div><div class="line"></div><div class="line">    _func_entry(_func_entrance);</div><div class="line"></div><div class="line">    io = (<a class="code" href="artik__loop_8h.html#aae0ec264a4ec3d92b8ee632d19001acaab2a48d8b68e4b4526a4a80b5c59ceb38">WATCH_IO_IN</a> | <a class="code" href="artik__loop_8h.html#aae0ec264a4ec3d92b8ee632d19001acaa98cfc386c7a12b191388e7dcdb9a71cf">WATCH_IO_ERR</a> | <a class="code" href="artik__loop_8h.html#aae0ec264a4ec3d92b8ee632d19001acaa736da6ba944100edc1dec0f148b43fc1">WATCH_IO_HUP</a> | <a class="code" href="artik__loop_8h.html#aae0ec264a4ec3d92b8ee632d19001acaa9340721e92e010e146313296ca105ce1">WATCH_IO_NVAL</a>);</div><div class="line">    loop-&gt;<a name="a142"></a><a class="code" href="structartik__loop__module.html#ab336606b4f84ebc47210f32b4dcbac67">add_fd_watch</a>(STDIN_FILENO, io, _on_keyboard_received, NULL, NULL);</div><div class="line">    loop-&gt;<a name="a143"></a><a class="code" href="structartik__loop__module.html#aa6b0681b3fccf42591f1e04a431ce7a5">run</a>();</div><div class="line"></div><div class="line">    release_all_test_devices(zb);</div><div class="line">    <a class="code" href="artik__module_8h.html#a2b26deff010fc08966179cb6f34d9f66">artik_release_api_module</a>(loop);</div><div class="line">    <a class="code" href="artik__module_8h.html#a2b26deff010fc08966179cb6f34d9f66">artik_release_api_module</a>(zb);</div><div class="line"></div><div class="line">    <span class="keywordflow">return</span> 0;</div><div class="line">}</div><div class="line"></div><!-- fragment --> </div><!-- contents -->
            </div>
            <div class='page-updated-on'>
              <i class='fa fa-clock-o'></i>
              <strong>Last updated on:</strong>
              <time datetime='2017-11-30 20:55:09 +0000'>Nov 30 2017,  8:55 PM</time>
            </div>
            <div></div>
            <ul class='paging-links'>
            </ul>
          </div>
        </div>
      </div>
    </div>
    <footer class="sa-footer" data-swiftype-index="false">
      <section style="display: none;">
      </section>
      <section>
        <div class="sa-container">
          <div class="row">
            <div class="col-xs-12">
              <small>Copyright &copy; 1995-2019 SAMSUNG All Rights Reserved.</small>
              <div class="pull-right">
                <a style="margin-right: 10px;" href="javascript:zE.activate()">Contact</a>
                <a style="margin-right: 10px;" href="/agreement">Developer License Agreement</a>
                <a href="http://www.samsung.com">Samsung.com <i class="fa fa-chevron-right fa-1"></i></a>
              </div>
            </div>
          </div>
        </div>
      </section>
    </footer>
    <script id='toc' type='text/html'>
      <div>
        {{#title}}
        <h2 class='table-of-contents-title'>
          <a href='#{{href}}'>{{ text }}</a>
        </h2>
        {{/title}}
        <ul class='table-of-contents-list nav'>
          {{#items}}
          <li class='{{className}}'>
            <a href='#{{href}}'>{{text}}</a>
          </li>
          {{/items}}
        </ul>
      </div>
    </script>
    <script src="..\javascripts\manifest.js?1549048180"></script>
    <script src="..\javascripts\doxygen\resize.js?1549048163"></script>
    <script type="text/javascript" src="dynsections.js"></script>
    <script type="text/javascript" src="navtreedata.js"></script>
    <script type="text/javascript" src="navtree.js"></script>
    <script type="text/javascript" src="search\search.js"></script>
    
    <script>
      $(document).ready(initResizable);
      $(window).load(resizeHeight);
      var searchBox = new SearchBox("searchBox", "search",false,'Search');
    
      var $sideNav = $('#side-nav').wrap('<li class="api-nav" data-family="[5, 7, 10]"></li>');
      var $sideNavListItem = $('#side-nav').parent();
      var $betaFeatures = $('a[data-name="datasheets"]').parent();
      $($sideNavListItem).insertBefore($betaFeatures);
    
      $('#nav-tree').floatingScrollbar();
    </script>
    <script src="..\javascripts\lib\scrollbar.js?1549048170"></script>
    <script type='text/javascript'>
      function getCookieDomain() {
        var temp = window.location.hostname.split('.').reverse();
      
        if (temp.length == 1) {
          domain = temp[0]; // localhost
        } else if (temp.length > 1) {
          domain = temp[1] + '.' + temp[0]; // staging + production
        }
      
        return domain;
      }
      
      $(function() {
        if (typeof Cookies.get('eol') === 'undefined') {
          Cookies.set('eol', 'true', { expires: 0.5, path: '/' });
      
          var p = document.createElement('p');
      
          p.innerHTML = "Please kindly note that due to the closure of ARTIK business, log-on required services on the ARTIK.io website will no longer be accessible beginning on February 1, 2019.\
           Most of the menu functionalities will be removed from the website, and we are going to provide only downloads, documentation and blog pages as below:<br>\
          <br>\
          <a href='https://developer.artik.io/downloads' target='_blank'>https://developer.artik.io/downloads</a><br>\
          <a href='https://developer.artik.io/documentation' target='_blank'>https://developer.artik.io/documentation</a><br>\
          <a href='https://www.artik.io/blog' target='_blank'>https://www.artik.io/blog</a><br>\
          <br>\
          The downloads, documentation and blog pages will be accessible until November 30, 2019.\
           ARTIK.io will be completely shut down on November 30, 2019. All of your personal data and account profile will be permanently and safely destroyed in accordance with the applicable privacy laws.\
          <br><br>\
          Thank you for your interest and support towards ARTIK business.";
      
          swal({
            html: true,
            title: "Dear ARTIK Customers,",
            content: p,
            icon: "warning",
            dangerMode: false,
          });
        }
      
        // cookies overlay
        var cookieName = 'cookiesOverlay';
      
        _onload_cookiesOverlay = function() {
          var acceptedPP = !!Cookies.get(cookieName);
      
          if (!acceptedPP) {
            var overlay = document.createElement("div");
            var policy = '<div class="frame"><p>We use cookies on our website as described in our\
             <a href="https://www.samsung.com/us/account/privacy-policy/">Privacy Policy</a>,\
             to enhance your browsing experience and we process personal information in the United States which, for users outside the United States, may have a lower standard of data privacy laws compared to your country of residence. Please click Accept to confirm your acceptance to our use of cookies. By continuing to use the website you are deemed to have consented to our use of cookies.</p>\
             <a class="button" onclick="cookiesOverlayAcceptPP()">Accept</a></div>';
      
            overlay.id = "cookies-alert";
            overlay.innerHTML = policy;
            document.getElementsByTagName("body")[0].appendChild(overlay);
          }
        }
      
        if (window.addEventListener) {window.addEventListener('load', _onload_cookiesOverlay, false);}
        else {window.attachEvent('onload', _onload_cookiesOverlay)}
      
        window.cookiesOverlayAcceptPP = function() {
          Cookies.set(cookieName, "true", { expires: 365, path: '/', domain: getCookieDomain() });
          document.getElementById("cookies-alert").style.display = "none";
        }
      });
    </script>
  </div></body>
</html>
