<!DOCTYPE html>
<html>
  <head>
    <link href='mqtt-subscriber.html' rel='canonical'>
    <meta charset='utf-8'>
    <!-- Always force latest IE rendering engine or request Chrome Frame -->
    <meta content='IE=edge,chrome=1' http-equiv='X-UA-Compatible'>
    <!-- Use title if it's in the page YAML frontmatter -->
    <meta content='width=device-width, user-scalable=yes, initial-scale=1.0, minimum-scale=1.0' name='viewport'>
    <meta content='UA-62517590-18' name='ua-id'>
    <meta content='ARTIK Documentation: MQTT Subscriber' property='og:title'>
    <meta content='https://developer.artik.io//documentation/images/artik-modules-og.png?1549048075' property='og:image'>
    <meta content='ARTIK Documentation' property='og:site_name'>
    <meta content='Here you will find information to help you get started, as well as the developer guides for more advanced activities.' property='og:description'>
    <meta content='summary_large_image' name='twitter:card'>
    <meta content='@SamsungIoT' name='twitter:site'>
    <meta content='@SamsungIoT' name='twitter:creator'>
    <meta content='ARTIK Documentation: MQTT Subscriber' name='twitter:title'>
    <meta content='Here you will find information to help you get started, as well as the developer guides for more advanced activities.' name='twitter:description'>
    <meta content='https://developer.artik.io//documentation/images/artik-modules-og.png?1549048075' name='twitter:image'>
    <meta class='swiftype' content='modules' data-type='string' name='tags'>
    <meta class='swiftype' content='developer' data-type='string' name='tags'>
    <meta class='swiftype' content='5.0' data-type='float' name='doc_weight'>
    <title>ARTIK Documentation: MQTT Subscriber</title>
    <link href="..\..\stylesheets\application.css?1549048074" rel="stylesheet">
    <link href="https://static.artik.io/css/navigation_v3.css" rel="stylesheet">
    <link href="..\..\stylesheets\print.css?1549048074" rel="stylesheet" media="print">
    <script src="https://unpkg.com/sweetalert/dist/sweetalert.min.js"></script>
    <link rel="shortcut icon" href="..\..\images\favicon-family.ico">
    <!-- Start of samsungartik Zendesk Widget script -->
    <script>/*<![CDATA[*/window.zEmbed||function(e,t){var n,o,d,i,s,a=[],r=document.createElement("iframe");window.zEmbed=function(){a.push(arguments)},window.zE=window.zE||window.zEmbed,r.src="javascript:false",r.title="",r.role="presentation",(r.frameElement||r).style.cssText="display: none",d=document.getElementsByTagName("script"),d=d[d.length-1],d.parentNode.insertBefore(r,d),i=r.contentWindow,s=i.document;try{o=s}catch(e){n=document.domain,r.src='javascript:var d=document.open();d.domain="'+n+'";void(0);',o=s}o.open()._l=function(){var o=this.createElement("script");n&&(this.domain=n),o.id="js-iframe-async",o.src=e,this.t=+new Date,this.zendeskHost=t,this.zEQueue=a,this.body.appendChild(o)},o.write('<body onload="document._l();">'),o.close()}("https://assets.zendesk.com/embeddable_framework/main.js","samsungartik.zendesk.com");
    /*]]>*/</script>
    <!-- End of samsungartik Zendesk Widget script -->
    
    <script>
      window.zESettings = {
        webWidget: {
          chat: {
            suppress: true
          },
          helpCenter: {
            suppress: true
          }
        }
      };
    
      zE(function() {
        zE.hide();
      });
    </script>
  </head>
  <body class='documentation documentation_artik-05x documentation_artik-05x_tutorials documentation_artik-05x_tutorials_mqtt-subscriber' data-offset='50' data-spy='scroll' data-target='#toc'>
    <noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-NG3HTN5" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
    new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
    j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
    '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-NG3HTN5');</script>
    <header class="sa-header" data-swiftype-index="false">
      <nav class="navbar yamm navbar-default">
        <div class="sa-container">
          <div class="navbar-header">
            
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#sa-collapse" aria-expanded="false">
              <span class="sr-only">Toggle navigation</span>
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
            </button>
            <a href="/" class="navbar-brand">
              <img alt="Samsung ARTIK" src="..\..\images\logo.png?1549048075">
            </a>
          </div>
    
          <div class="collapse navbar-collapse" id="sa-collapse">
            <ul class="nav navbar-nav">
              <li>
                <a href="/">Downloads Archive</a>
              </li>
              <li>
                <a href="..\..\index.htm" class="active">Documentation Archive</a>
              </li>
              <li>
                <a href="https://www.artik.io/blog/">Blog Archive</a>
              </li>
            </ul>
    
          </div>
        </div>
      </nav>
    </header>
    <div class='container container-full-width'>
      <div class='content side'>
        <a class='toggle-menu' href='#'>
          &#8595;
        </a>
        <nav class='section-nav' data-swiftype-index='false'>
          <ul class='section-nav-list'>
            <li class='section-nav-item'>
              <h4 class='section-title'>
                Documentation
              </h4>
              <div class='section-subtitle'><a href="..\..\index.htm">Quick Index</a></div>
              <ul class='subsections'>
                <li data-family='[0, 5, 7, 10]'>
                  <a href="..\..\security-topics\index.htm" data-name="security-topics" aria-expanded="false">Security Topics</a>
                </li>
                <li data-family='[0, 5, 7, 10]'>
                  <a href="..\..\overview.html" data-name="artik-overview-faq" aria-expanded="false">ARTIK Overview / FAQ</a>
                </li>
                <li data-family='[0]'>
                  <a href="..\..\artik-0\getting-started\index.htm" data-directory="true" data-name="artik-0-020-030" aria-expanded="true" override="true">ARTIK 0 (020/030)</a>
                  <ul class='subsections'>
                    <li data-family='[0]'>
                      <a href="..\..\artik-0\getting-started\index.htm" data-directory="true" data-name="getting-started" aria-expanded="false">Getting Started</a>
                      <ul class='subsections'>
                        <li data-family='[0, 5, 7, 10]'>
                          <a href="..\..\artik-0\getting-started\in-the-box.html" data-name="open-the-box-and-go" aria-expanded="false">Open the box and go!</a>
                        </li>
                        <li data-family='[0, 5, 7, 10]'>
                          <a href="..\..\artik-0\getting-started\connect.html" data-name="connect-to-the-world" aria-expanded="false">Connect to the World</a>
                        </li>
                      </ul>
                    </li>
                    <li data-family='[0]'>
                      <a href="..\..\artik-0\tutorials\index.htm" data-directory="true" data-name="tutorials" aria-expanded="false">Tutorials</a>
                      <ul class='subsections'>
                      </ul>
                    </li>
                  </ul>
                </li>
                <li data-family='[0]'>
                  <a href="..\getting-started\index.htm" data-directory="true" data-name="artik-0-053-055" aria-expanded="true" override="true">ARTIK 0 (053/055)</a>
                  <ul class='subsections'>
                    <li data-family='[0]'>
                      <a href="..\getting-started\index.htm" data-directory="true" data-name="getting-started" aria-expanded="false">Getting Started</a>
                      <ul class='subsections'>
                        <li data-family='[0, 5, 7, 10]'>
                          <a href="..\getting-started\in-the-box.html" data-name="in-the-box" aria-expanded="false">In the box</a>
                        </li>
                        <li data-family='[0, 5, 7, 10]'>
                          <a href="..\getting-started\prepare-ide.html" data-name="set-up-the-artik-ide" aria-expanded="false">Set up the ARTIK IDE</a>
                        </li>
                        <li data-family='[0, 5, 7, 10]'>
                          <a href="..\getting-started\communicate.html" data-name="connect-to-the-world" aria-expanded="false">Connect to the World</a>
                        </li>
                        <li data-family='[0, 5, 7, 10]'>
                          <a href="..\getting-started\board-ref.html" data-name="board-reference-br-header-map-gpio" aria-expanded="false">Board Reference /<br>Header Map / GPIO</a>
                        </li>
                        <li data-family='[0, 5, 7, 10]'>
                          <a href="..\getting-started\up-to-date.html" data-name="bring-sdk-up-to-date" aria-expanded="false">Bring SDK up-to-date</a>
                        </li>
                        <li data-family='[0, 5, 7, 10]'>
                          <a href="..\getting-started\s-modules.html" data-name="font-color-green-strong-s-modules-strong-font" aria-expanded="false"><font color="green"><strong>"s" modules</strong></font></a>
                        </li>
                      </ul>
                    </li>
                    <li data-family='[0]'>
                      <a href="index.htm" data-directory="true" data-name="tutorials" aria-expanded="true">Tutorials</a>
                      <ul class='subsections'>
                        <li data-family='[0, 5, 7, 10]'>
                          <a href="blink-an-led.html" data-name="blink-an-led" aria-expanded="false">Blink an LED</a>
                        </li>
                        <li data-family='[0, 5, 7, 10]'>
                          <a href="sensor-tutorial.html" data-name="sensors-artik-ide" aria-expanded="false">Sensors -- ARTIK IDE</a>
                        </li>
                        <li data-family='[0, 5, 7, 10]'>
                          <a href="mqtt-subscriber.html" data-name="mqtt-subscriber" aria-expanded="false" class="active">MQTT Subscriber</a>
                        </li>
                        <li data-family='[0, 5, 7, 10]'>
                          <a href="mqtt-publisher.html" data-name="mqtt-publisher" aria-expanded="false">MQTT Publisher</a>
                        </li>
                        <li data-family='[0, 5, 7, 10]'>
                          <a href="mqtt-to-cloud.html" data-name="mqtt-to-artik-cloud" aria-expanded="false">MQTT to ARTIK Cloud</a>
                        </li>
                        <li data-family='[0, 5, 7, 10]'>
                          <a href="i2c.html" data-name="i2c-interface" aria-expanded="false">I2C Interface</a>
                        </li>
                      </ul>
                    </li>
                    <li data-family='[5, 7, 10]'>
                      <a href="..\cloud-services\index.htm" data-directory="true" data-name="iot-in-the-cloud" aria-expanded="false">IoT in the Cloud</a>
                      <ul class='subsections'>
                        <li data-family='[0, 5, 7, 10]'>
                          <a href="..\cloud-services\aws-iot-sdk.html" data-name="aws-iot-sdk" aria-expanded="false">AWS IoT SDK</a>
                        </li>
                        <li data-family='[0, 5, 7, 10]'>
                          <a href="..\cloud-services\smartthings.html" data-name="smartthings-iot" aria-expanded="false">SmartThings IoT</a>
                        </li>
                        <li data-family='[0, 5, 7, 10]'>
                          <a href="..\cloud-services\thingworx.html" data-name="thingworx" aria-expanded="false">ThingWorx</a>
                        </li>
                      </ul>
                    </li>
                    <li data-family='[0]'>
                      <a href="..\projects\index.htm" data-directory="true" data-name="technology-projects" aria-expanded="false">Technology Projects</a>
                      <ul class='subsections'>
                        <li data-family='[0, 5, 7, 10]'>
                          <a href="..\projects\modbus.html" data-name="shoreline-modbus" aria-expanded="false">Shoreline -- Modbus</a>
                        </li>
                        <li data-family='[0, 5, 7, 10]'>
                          <a href="..\projects\smart-light.html" data-name="smart-dimmable-light-artik-cloud" aria-expanded="false">Smart Dimmable Light -- ARTIK Cloud</a>
                        </li>
                      </ul>
                    </li>
                    <li data-family='[0]'>
                      <a href="..\advanced-concepts\index.htm" data-directory="true" data-name="advanced-developers" aria-expanded="false">Advanced Developers</a>
                      <ul class='subsections'>
                        <li data-family='[0, 5, 7, 10]'>
                          <a href="..\advanced-concepts\prepare-dev-env.html" data-name="set-up-environment" aria-expanded="false">Set Up Environment</a>
                        </li>
                        <li data-family='[0, 5, 7, 10]'>
                          <a href="..\advanced-concepts\communicate-053.html" data-name="compile-and-load" aria-expanded="false">Compile and Load</a>
                        </li>
                        <li data-family='[0, 5, 7, 10]'>
                          <a href="..\advanced-concepts\configure-053.html" data-name="customization-tools" aria-expanded="false">Customization Tools</a>
                        </li>
                        <li data-family='[0, 5, 7, 10]'>
                          <a href="..\advanced-concepts\sign.html" data-name="kms-code-signing" aria-expanded="false">KMS Code Signing</a>
                        </li>
                      </ul>
                    </li>
                  </ul>
                </li>
                <li data-family='[5, 7, 10]'>
                  <a href="..\..\artik\getting-started\index.htm" data-directory="true" data-name="artik-5-7-10" aria-expanded="true" override="true">ARTIK 5 / 7 / 10</a>
                  <ul class='subsections'>
                    <li data-family='[5, 7, 10]'>
                      <a href="..\..\artik\getting-started\index.htm" data-directory="true" data-name="getting-started" aria-expanded="false">Getting Started</a>
                      <ul class='subsections'>
                        <li data-family='[0, 5, 7, 10]'>
                          <a href="..\..\artik\getting-started\in-the-box.html" data-name="in-the-box-antennas-br-board-reference" aria-expanded="false">In the box / antennas /<br>board reference</a>
                        </li>
                        <li data-family='[0, 5, 7, 10]'>
                          <a href="..\..\artik\getting-started\powering-up.html" data-name="power-up-the-board" aria-expanded="false">Power up the board</a>
                        </li>
                        <li data-family='[0, 5, 7, 10]'>
                          <a href="..\..\artik\getting-started\prepare-ide.html" data-name="set-up-the-artik-ide" aria-expanded="false">Set up the ARTIK IDE</a>
                        </li>
                        <li data-family='[0, 5, 7, 10]'>
                          <a href="..\..\artik\getting-started\up-to-date.html" data-name="bring-artik-up-to-date" aria-expanded="false">Bring ARTIK up-to-date</a>
                        </li>
                        <li data-family='[0, 5, 7, 10]'>
                          <a href="..\..\artik\getting-started\connect.html" data-name="connect-to-the-world" aria-expanded="false">Connect to the World</a>
                        </li>
                        <li data-family='[0, 5, 7, 10]'>
                          <a href="..\..\artik\getting-started\s-modules.html" data-name="strong-s-strong-modules" aria-expanded="false"><strong>s</strong> modules</a>
                        </li>
                      </ul>
                    </li>
                    <li data-family='[5, 7, 10]'>
                      <a href="..\..\artik\tutorials\index.htm" data-directory="true" data-name="tutorials" aria-expanded="false">Tutorials</a>
                      <ul class='subsections'>
                        <li data-family='[0, 5, 7, 10]'>
                          <a href="..\..\artik\tutorials\say-hello.html" data-name="first-say-hello" aria-expanded="false">First: Say Hello!</a>
                        </li>
                        <li data-family='[0, 5, 7, 10]'>
                          <a href="..\..\artik\tutorials\blink-an-led.html" data-name="blink-an-led" aria-expanded="false">Blink an LED</a>
                        </li>
                        <li data-family='[0, 5, 7, 10]'>
                          <a href="..\..\artik\tutorials\read-a-button.html" data-name="read-a-button-press" aria-expanded="false">Read a button press</a>
                        </li>
                        <li data-family='[0, 5, 7, 10]'>
                          <a href="..\..\artik\tutorials\sensor-tutorial.html" data-name="sensors-artik-ide" aria-expanded="false">Sensors -- ARTIK IDE</a>
                        </li>
                        <li data-family='[0, 5, 7, 10]'>
                          <a href="..\..\artik\tutorials\node-red.html" data-name="intro-to-node-red" aria-expanded="false">Intro to Node-RED</a>
                        </li>
                      </ul>
                    </li>
                    <li data-family='[5, 7, 10]'>
                      <a href="..\..\artik\cloud-services\index.htm" data-directory="true" data-name="iot-in-the-cloud" aria-expanded="false">IoT in the Cloud</a>
                      <ul class='subsections'>
                        <li data-family='[5, 7, 10]'>
                          <a href="..\..\artik\cloud-services\aws\index.htm" data-directory="true" data-name="aws-iot" aria-expanded="false">AWS IoT</a>
                          <ul class='subsections'>
                            <li data-family='[0, 5, 7, 10]'>
                              <a href="..\..\artik\cloud-services\aws\greengrass.html" data-name="greengrass-azul" aria-expanded="false">Greengrass + Azul</a>
                            </li>
                            <li data-family='[0, 5, 7, 10]'>
                              <a href="..\..\artik\cloud-services\aws\aws-iot.html" data-name="iot-overview" aria-expanded="false">IoT -- Overview</a>
                            </li>
                            <li data-family='[0, 5, 7, 10]'>
                              <a href="..\..\artik\cloud-services\aws\aws-iot-jitr.html" data-name="iot-jit-register" aria-expanded="false">IoT -- JIT Register</a>
                            </li>
                            <li data-family='[0, 5, 7, 10]'>
                              <a href="..\..\artik\cloud-services\aws\lambda.html" data-name="lambda-jit-register" aria-expanded="false">Lambda - JIT Register</a>
                            </li>
                          </ul>
                        </li>
                        <li data-family='[5, 7, 10]'>
                          <a href="..\..\artik\cloud-services\azure\index.htm" data-directory="true" data-name="azure-iot" aria-expanded="false">Azure IoT</a>
                          <ul class='subsections'>
                            <li data-family='[0, 5, 7, 10]'>
                              <a href="..\..\artik\cloud-services\azure\azure-iot-enroll.html" data-name="hub-enroll-x-509" aria-expanded="false">Hub - Enroll X.509</a>
                            </li>
                            <li data-family='[0, 5, 7, 10]'>
                              <a href="..\..\artik\cloud-services\azure\azure-iot-register.html" data-name="hub-register" aria-expanded="false">Hub - Register</a>
                            </li>
                            <li data-family='[0, 5, 7, 10]'>
                              <a href="..\..\artik\cloud-services\azure\azure-iot-edge.html" data-name="edge-stream" aria-expanded="false">Edge - Stream</a>
                            </li>
                          </ul>
                        </li>
                        <li data-family='[5, 7, 10]'>
                          <a href="..\..\artik\cloud-services\google\index.htm" data-directory="true" data-name="google-iot" aria-expanded="false">Google IoT</a>
                          <ul class='subsections'>
                          </ul>
                        </li>
                        <li data-family='[0, 5, 7, 10]'>
                          <a href="..\..\artik\cloud-services\thingworx.html" data-name="thingworx" aria-expanded="false">ThingWorx</a>
                        </li>
                        <li data-family='[0, 5, 7, 10]'>
                          <a href="..\..\artik\cloud-services\opc-ua.html" data-name="opc-ua-interface" aria-expanded="false">OPC-UA Interface</a>
                        </li>
                        <li data-family='[0, 5, 7, 10]'>
                          <a href="..\..\artik\cloud-services\node-red-cloud.html" data-name="sense-tecnic-fred" aria-expanded="false">Sense Tecnic -- FRED</a>
                        </li>
                      </ul>
                    </li>
                    <li data-family='[5, 7, 10]'>
                      <a href="..\..\artik\ml\index.htm" data-directory="true" data-name="machine-learning" aria-expanded="false">Machine Learning</a>
                      <ul class='subsections'>
                        <li data-family='[0, 5, 7, 10]'>
                          <a href="..\..\artik\ml\tensorflowlite.html" data-name="machine-learning-tensorflow" aria-expanded="false">Machine Learning-TensorFlow</a>
                        </li>
                      </ul>
                    </li>
                    <li data-family='[5, 7, 10]'>
                      <a href="..\..\artik\db\index.htm" data-directory="true" data-name="database-services" aria-expanded="false">Database Services</a>
                      <ul class='subsections'>
                        <li data-family='[0, 5, 7, 10]'>
                          <a href="..\..\artik\db\influx.html" data-name="store-data-influxdb" aria-expanded="false">Store Data - InfluxDB</a>
                        </li>
                      </ul>
                    </li>
                    <li data-family='[5, 7, 10]'>
                      <a href="..\..\artik\remote-cloud\index.htm" data-directory="true" data-name="cloud-services" aria-expanded="false">Cloud Services</a>
                      <ul class='subsections'>
                        <li data-family='[0, 5, 7, 10]'>
                          <a href="..\..\artik\remote-cloud\rekognition.html" data-name="objects-rekognition" aria-expanded="false">Objects - Rekognition</a>
                        </li>
                        <li data-family='[0, 5, 7, 10]'>
                          <a href="..\..\artik\remote-cloud\s3.html" data-name="file-bucket-s3" aria-expanded="false">File Bucket - S3</a>
                        </li>
                        <li data-family='[0, 5, 7, 10]'>
                          <a href="..\..\artik\remote-cloud\goog-asst.html" data-name="voice-assistant-google" aria-expanded="false">Voice Assistant-Google</a>
                        </li>
                        <li data-family='[0, 5, 7, 10]'>
                          <a href="..\..\artik\remote-cloud\kairos.html" data-name="recognize-faces-kairos" aria-expanded="false">Recognize Faces-Kairos</a>
                        </li>
                      </ul>
                    </li>
                    <li data-family='[5, 7, 10]'>
                      <a href="..\..\artik\projects\index.htm" data-directory="true" data-name="technology-projects" aria-expanded="false">Technology Projects</a>
                      <ul class='subsections'>
                        <li data-family='[0, 5, 7, 10]'>
                          <a href="..\..\artik\projects\arduino-if.html" data-name="arduino-i-f-projects" aria-expanded="false">Arduino I-F Projects</a>
                        </li>
                        <li data-family='[0, 5, 7, 10]'>
                          <a href="..\..\artik\projects\gesture-tutorial.html" data-name="gesture-control" aria-expanded="false">Gesture Control</a>
                        </li>
                        <li data-family='[0, 5, 7, 10]'>
                          <a href="..\..\artik\projects\trashcan.html" data-name="smart-trash-can" aria-expanded="false">Smart Trash Can</a>
                        </li>
                        <li data-family='[0, 5, 7, 10]'>
                          <a href="..\..\artik\projects\facial-recog.html" data-name="face-identity-detection" aria-expanded="false">Face/Identity Detection</a>
                        </li>
                        <li data-family='[0, 5, 7, 10]'>
                          <a href="..\..\artik\projects\cellular.html" data-name="cellular-modem" aria-expanded="false">Cellular Modem</a>
                        </li>
                        <li data-family='[0, 5, 7, 10]'>
                          <a href="..\..\artik\projects\canbus.html" data-name="serial-can-bus" aria-expanded="false">Serial CAN Bus</a>
                        </li>
                      </ul>
                    </li>
                    <li data-family='[5, 7, 10]'>
                      <a href="..\..\artik\advanced-concepts\index.htm" data-directory="true" data-name="advanced-developers" aria-expanded="false">Advanced Developers</a>
                      <ul class='subsections'>
                        <li data-family='[0, 5, 7, 10]'>
                          <a href="..\..\artik\advanced-concepts\prepare-dev-env.html" data-name="set-up-environment" aria-expanded="false">Set Up Environment</a>
                        </li>
                        <li data-family='[0, 5, 7, 10]'>
                          <a href="..\..\artik\advanced-concepts\compile.html" data-name="compile-and-load" aria-expanded="false">Compile and Load</a>
                        </li>
                        <li data-family='[0, 5, 7, 10]'>
                          <a href="..\..\artik\advanced-concepts\sign.html" data-name="kms-code-signing" aria-expanded="false">KMS Code Signing</a>
                        </li>
                        <li data-family='[0, 5, 7, 10]'>
                          <a href="..\..\artik\advanced-concepts\configure.html" data-name="customization-tools" aria-expanded="false">Customization Tools</a>
                        </li>
                        <li data-family='[0, 5, 7, 10]'>
                          <a href="..\..\artik\advanced-concepts\verified-boot.html" data-name="verified-boot" aria-expanded="false">Verified Boot</a>
                        </li>
                      </ul>
                    </li>
                  </ul>
                </li>
                <li data-family='[0, 5, 7, 10]'>
                  <a href="..\..\developer-guide\index.htm" data-directory="true" data-name="developer-guide" aria-expanded="true">Developer Guide</a>
                  <ul class='subsections'>
                    <li data-family='[0, 5, 7, 10]'>
                      <a href="..\..\developer-guide\artik-ide\index.htm" data-directory="true" data-name="artik-ide-terminal" aria-expanded="false">ARTIK IDE / Terminal</a>
                      <ul class='subsections'>
                        <li data-family='[0, 5, 7, 10]'>
                          <a href="..\..\developer-guide\artik-ide\install-ide.html" data-name="installing-artik-ide" aria-expanded="false">Installing ARTIK IDE</a>
                        </li>
                        <li data-family='[0, 5, 7, 10]'>
                          <a href="..\..\developer-guide\artik-ide\serial-debug.html" data-name="terminal-console" aria-expanded="false">Terminal Console</a>
                        </li>
                        <li data-family='[0, 5, 7, 10]'>
                          <a href="..\..\developer-guide\artik-ide\linux-apps.html" data-name="building-linux-apps" aria-expanded="false">Building Linux Apps</a>
                        </li>
                        <li data-family='[0, 5, 7, 10]'>
                          <a href="..\..\developer-guide\artik-ide\tizen-apps.html" data-name="building-tizen-rt-apps" aria-expanded="false">Building Tizen RT Apps</a>
                        </li>
                        <li data-family='[0, 5, 7, 10]'>
                          <a href="..\..\developer-guide\artik-ide\create-sdk.html" data-name="creating-tizen-rt-sdk" aria-expanded="false">Creating Tizen RT SDK</a>
                        </li>
                        <li data-family='[0, 5, 7, 10]'>
                          <a href="..\..\developer-guide\artik-ide\update-sdk.html" data-name="updating-artik-sdk" aria-expanded="false">Updating ARTIK SDK</a>
                        </li>
                        <li data-family='[0, 5, 7, 10]'>
                          <a href="..\..\developer-guide\artik-ide\release_notes.html" data-name="release-notes" aria-expanded="false">Release Notes</a>
                        </li>
                      </ul>
                    </li>
                    <li data-family='[5, 7, 10]'>
                      <a href="..\..\developer-guide\ethernet-wifi\index.htm" data-directory="true" data-name="ethernet-and-wi-fi" aria-expanded="false">Ethernet and Wi-Fi</a>
                      <ul class='subsections'>
                        <li data-family='[0, 5, 7, 10]'>
                          <a href="..\..\developer-guide\ethernet-wifi\ethernet.html" data-name="ethernet" aria-expanded="false">Ethernet</a>
                        </li>
                        <li data-family='[0, 5, 7, 10]'>
                          <a href="..\..\developer-guide\ethernet-wifi\wifi.html" data-name="wi-fi-client" aria-expanded="false">Wi-Fi Client</a>
                        </li>
                        <li data-family='[0, 5, 7, 10]'>
                          <a href="..\..\developer-guide\ethernet-wifi\ap.html" data-name="wi-fi-access-point" aria-expanded="false">Wi-Fi Access Point</a>
                        </li>
                        <li data-family='[0, 5, 7, 10]'>
                          <a href="..\..\developer-guide\ethernet-wifi\p2p.html" data-name="wi-fi-direct-p2p" aria-expanded="false">Wi-Fi Direct/P2P</a>
                        </li>
                        <li data-family='[0, 5, 7, 10]'>
                          <a href="..\..\developer-guide\ethernet-wifi\proxies.html" data-name="proxies-and-certificates" aria-expanded="false">Proxies and Certificates</a>
                        </li>
                      </ul>
                    </li>
                    <li data-family='[5, 7, 10]'>
                      <a href="..\..\developer-guide\gpio\index.htm" data-directory="true" data-name="programmable-pins" aria-expanded="false">Programmable Pins</a>
                      <ul class='subsections'>
                        <li data-family='[0, 5, 7, 10]'>
                          <a href="..\..\developer-guide\gpio\gpio-mapping.html" data-name="gpio-header-maps" aria-expanded="false">GPIO Header Maps</a>
                        </li>
                        <li data-family='[0, 5, 7, 10]'>
                          <a href="..\..\developer-guide\gpio\kernel-gpio.html" data-name="pin-programming" aria-expanded="false">Pin Programming</a>
                        </li>
                      </ul>
                    </li>
                    <li data-family='[5, 7, 10]'>
                      <a href="..\..\developer-guide\multimedia\index.htm" data-directory="true" data-name="audio-display-camera" aria-expanded="false">Audio-Display-Camera</a>
                      <ul class='subsections'>
                        <li data-family='[0, 5, 7, 10]'>
                          <a href="..\..\developer-guide\multimedia\audio-guide.html" data-name="audio-record-play" aria-expanded="false">Audio Record/Play</a>
                        </li>
                        <li data-family='[0, 5, 7, 10]'>
                          <a href="..\..\developer-guide\multimedia\camera-input-guide-a10.html" data-name="mipi-camera" aria-expanded="false">MIPI Camera</a>
                        </li>
                        <li data-family='[0, 5, 7, 10]'>
                          <a href="..\..\developer-guide\multimedia\usb-camera.html" data-name="usb-camera" aria-expanded="false">USB Camera</a>
                        </li>
                        <li data-family='[0, 5, 7, 10]'>
                          <a href="..\..\developer-guide\multimedia\display.html" data-name="mipi-lvds-hdmi-display" aria-expanded="false">MIPI/LVDS/HDMI Display</a>
                        </li>
                      </ul>
                    </li>
                    <li data-family='[0, 5, 7, 10]'>
                      <a href="..\..\developer-guide\wireless-iot\index.htm" data-directory="true" data-name="wireless-iot-networks" aria-expanded="false">Wireless IoT Networks</a>
                      <ul class='subsections'>
                        <li data-family='[0, 5, 7, 10]'>
                          <a href="..\..\developer-guide\wireless-iot\bluetooth\index.htm" data-directory="true" data-name="bluetooth" aria-expanded="false">Bluetooth</a>
                          <ul class='subsections'>
                            <li data-family='[0, 5, 7, 10]'>
                              <a href="..\..\developer-guide\wireless-iot\bluetooth\bluetooth-central.html" data-name="artik-5-7-linux" aria-expanded="false">ARTIK 5/7 -- Linux</a>
                            </li>
                            <li data-family='[0, 5, 7, 10]'>
                              <a href="..\..\developer-guide\wireless-iot\bluetooth\bluetooth-020.html" data-name="artik-020-gcc-iar" aria-expanded="false">ARTIK 020 -- gcc/IAR</a>
                            </li>
                          </ul>
                        </li>
                        <li data-family='[0, 5, 7, 10]'>
                          <a href="..\..\developer-guide\wireless-iot\zigbee\index.htm" data-directory="true" data-name="zigbee" aria-expanded="false">ZigBee</a>
                          <ul class='subsections'>
                            <li data-family='[0, 5, 7, 10]'>
                              <a href="..\..\developer-guide\wireless-iot\zigbee\zigbee-cli.html" data-name="zigbee-cli" aria-expanded="false">ZigBee CLI</a>
                            </li>
                            <li data-family='[0, 5, 7, 10]'>
                              <a href="..\..\developer-guide\wireless-iot\zigbee\zigbee-prog.html" data-name="artik-5-7-sdk-api" aria-expanded="false">ARTIK 5/7 SDK API</a>
                            </li>
                            <li data-family='[0, 5, 7, 10]'>
                              <a href="..\..\developer-guide\wireless-iot\zigbee\libzigbee.html" data-name="artik-5-7-libzigbee" aria-expanded="false">ARTIK 5/7 libzigbee</a>
                            </li>
                            <li data-family='[0, 5, 7, 10]'>
                              <a href="..\..\developer-guide\wireless-iot\zigbee\zigbee-030.html" data-name="artik-030-gcc-iar" aria-expanded="false">ARTIK 030 -- gcc/IAR</a>
                            </li>
                          </ul>
                        </li>
                        <li data-family='[0, 5, 7, 10]'>
                          <a href="..\..\developer-guide\wireless-iot\zwave.html" data-name="z-wave" aria-expanded="false">Z-Wave</a>
                        </li>
                        <li data-family='[0, 5, 7, 10]'>
                          <a href="..\..\developer-guide\wireless-iot\sigfox.html" data-name="sigfox" aria-expanded="false">SIGFOX</a>
                        </li>
                        <li data-family='[0, 5, 7, 10]'>
                          <a href="..\..\developer-guide\wireless-iot\hass.html" data-name="home-assistant" aria-expanded="false">Home Assistant</a>
                        </li>
                      </ul>
                    </li>
                    <li data-family='[5, 7, 10]'>
                      <a href="..\..\developer-guide\storage\index.htm" data-directory="true" data-name="usb-and-microsd" aria-expanded="false">USB and microSD</a>
                      <ul class='subsections'>
                        <li data-family='[0, 5, 7, 10]'>
                          <a href="..\..\developer-guide\storage\microSD-usb.html" data-name="microsd-and-usb-storage" aria-expanded="false">microSD and USB Storage</a>
                        </li>
                        <li data-family='[0, 5, 7, 10]'>
                          <a href="..\..\developer-guide\storage\usb-device.html" data-name="usb-device" aria-expanded="false">USB -- Device</a>
                        </li>
                        <li data-family='[0, 5, 7, 10]'>
                          <a href="..\..\developer-guide\storage\usb-host.html" data-name="usb-host" aria-expanded="false">USB -- Host</a>
                        </li>
                      </ul>
                    </li>
                    <li data-family='[0, 5, 7, 10]'>
                      <a href="..\..\developer-guide\ide\index.htm" data-directory="true" data-name="software-tools" aria-expanded="false">Software Tools</a>
                      <ul class='subsections'>
                        <li data-family='[0, 5, 7, 10]'>
                          <a href="..\..\developer-guide\ide\arduino.html" data-name="arduino-ide" aria-expanded="false">Arduino IDE</a>
                        </li>
                        <li data-family='[5, 7, 10]'>
                          <a href="..\..\developer-guide\ide\eclipse\index.htm" data-directory="true" data-name="eclipse-ide" aria-expanded="false">Eclipse IDE</a>
                          <ul class='subsections'>
                            <li data-family='[0, 5, 7, 10]'>
                              <a href="..\..\developer-guide\ide\eclipse\eclipse-cdt.html" data-name="linux" aria-expanded="false">>> Linux</a>
                            </li>
                            <li data-family='[0, 5, 7, 10]'>
                              <a href="..\..\developer-guide\ide\eclipse\eclipse-win.html" data-name="windows" aria-expanded="false">>> Windows</a>
                            </li>
                            <li data-family='[0, 5, 7, 10]'>
                              <a href="..\..\developer-guide\ide\eclipse\sysroot.html" data-name="artik-sdk" aria-expanded="false">>> ARTIK SDK</a>
                            </li>
                          </ul>
                        </li>
                        <li data-family='[0, 5, 7, 10]'>
                          <a href="..\..\developer-guide\ide\iar.html" data-name="iar-embedded-workbench-arm-ide" aria-expanded="false">IAR Embedded Workbench ARM IDE</a>
                        </li>
                        <li data-family='[0, 5, 7, 10]'>
                          <a href="..\..\developer-guide\ide\resin-io.html" data-name="resin-io" aria-expanded="false">resin-io</a>
                        </li>
                        <li data-family='[0, 5, 7, 10]'>
                          <a href="..\..\developer-guide\ide\simplicity.html" data-name="simplicity-studio" aria-expanded="false">Simplicity Studio</a>
                        </li>
                        <li data-family='[0, 5, 7, 10]'>
                          <a href="..\..\developer-guide\ide\virtualbox.html" data-name="virtualbox" aria-expanded="false">VirtualBox</a>
                        </li>
                      </ul>
                    </li>
                    <li data-family='[5, 7, 10]'>
                      <a href="..\..\developer-guide\libraries\index.htm" data-directory="true" data-name="libraries" aria-expanded="false">Libraries</a>
                      <ul class='subsections'>
                        <li data-family='[0, 5, 7, 10]'>
                          <a href="..\..\developer-guide\libraries\arduino-lib.html" data-name="arduino-libraries-overview" aria-expanded="false">Arduino Libraries - Overview</a>
                        </li>
                        <li data-family='[0, 5, 7, 10]'>
                          <a href="..\..\developer-guide\libraries\temboo.html" data-name="temboo-arduino-library" aria-expanded="false">Temboo Arduino Library</a>
                        </li>
                      </ul>
                    </li>
                    <li data-family='[5, 7, 10]'>
                      <a href="..\..\developer-guide\update-image\index.htm" data-directory="true" data-name="updating-artik-image" aria-expanded="false">Updating ARTIK Image</a>
                      <ul class='subsections'>
                        <li data-family='[0, 5, 7, 10]'>
                          <a href="..\..\developer-guide\update-image\updating-artik-image.html" data-name="update-full-image-br-microsd" aria-expanded="false">Update Full Image <br>(microSD)</a>
                        </li>
                        <li data-family='[0, 5, 7, 10]'>
                          <a href="..\..\developer-guide\update-image\usb-update.html" data-name="update-image-over-usb" aria-expanded="false">Update Image over USB</a>
                        </li>
                        <li data-family='[0, 5, 7, 10]'>
                          <a href="..\..\developer-guide\update-image\usb-recovery.html" data-name="recovery-over-usb" aria-expanded="false">Recovery over USB</a>
                        </li>
                        <li data-family='[0, 5, 7, 10]'>
                          <a href="..\..\developer-guide\update-image\u-boot.html" data-name="environment-variables-update" aria-expanded="false">Environment Variables Update</a>
                        </li>
                        <li data-family='[0, 5, 7, 10]'>
                          <a href="..\..\developer-guide\update-image\ncp-update.html" data-name="zigbee-thread-radio-ncp-update" aria-expanded="false">ZigBee/Thread Radio (NCP) Update</a>
                        </li>
                      </ul>
                    </li>
                  </ul>
                </li>
                <li data-family='[5, 7, 10]'>
                  <a href="..\..\advanced-concepts\index.htm" data-directory="true" data-name="advanced-concepts" aria-expanded="true">Advanced Concepts</a>
                  <ul class='subsections'>
                    <li data-family='[0, 5, 7, 10]'>
                      <a href="..\..\advanced-concepts\mqtt\index.htm" data-directory="true" data-name="mqtt-web-coding" aria-expanded="false">MQTT/Web Coding</a>
                      <ul class='subsections'>
                        <li data-family='[0, 5, 7, 10]'>
                          <a href="..\..\advanced-concepts\mqtt\color-mqtt.html" data-name="mqtt-message-broker" aria-expanded="false">MQTT Message Broker</a>
                        </li>
                        <li data-family='[0, 5, 7, 10]'>
                          <a href="..\..\advanced-concepts\mqtt\color-mqtt-adv.html" data-name="mqtt-pub-sub-topics" aria-expanded="false">MQTT Pub/Sub Topics</a>
                        </li>
                        <li data-family='[0, 5, 7, 10]'>
                          <a href="..\..\advanced-concepts\mqtt\color-mqtt-web.html" data-name="web-window-to-mqtt" aria-expanded="false">Web Window to MQTT</a>
                        </li>
                        <li data-family='[0, 5, 7, 10]'>
                          <a href="..\..\advanced-concepts\mqtt\color-mqtt-client.html" data-name="publish-to-artik-cloud" aria-expanded="false">Publish to ARTIK Cloud</a>
                        </li>
                        <li data-family='[0, 5, 7, 10]'>
                          <a href="..\..\advanced-concepts\mqtt\color-mqtt-arduino.html" data-name="artik-cloud-via-arduino" aria-expanded="false">ARTIK Cloud via Arduino</a>
                        </li>
                        <li data-family='[0, 5, 7, 10]'>
                          <a href="..\..\advanced-concepts\mqtt\color-mqtt-actions.html" data-name="actions-and-artik-cloud" aria-expanded="false">Actions and ARTIK Cloud</a>
                        </li>
                      </ul>
                    </li>
                    <li data-family='[5, 7, 10]'>
                      <a href="..\..\advanced-concepts\secure\index.htm" data-directory="true" data-name="ssl-tls-security" aria-expanded="false">SSL/TLS Security</a>
                      <ul class='subsections'>
                        <li data-family='[0, 5, 7, 10]'>
                          <a href="..\..\advanced-concepts\secure\secure-intro.html" data-name="ssl-tls-secured-links" aria-expanded="false">SSL/TLS-Secured Links</a>
                        </li>
                        <li data-family='[0, 5, 7, 10]'>
                          <a href="..\..\advanced-concepts\secure\secure-programs.html" data-name="start-up-program-load" aria-expanded="false">Start-up Program Load</a>
                        </li>
                        <li data-family='[0, 5, 7, 10]'>
                          <a href="..\..\advanced-concepts\secure\wifi-reconnect.html" data-name="robust-wi-fi" aria-expanded="false">Robust Wi-Fi</a>
                        </li>
                      </ul>
                    </li>
                    <li data-family='[5, 7, 10]'>
                      <a href="..\..\advanced-concepts\secure-os\index.htm" data-directory="true" data-name="s-module-security" aria-expanded="false">s Module Security</a>
                      <ul class='subsections'>
                        <li data-family='[0, 5, 7, 10]'>
                          <a href="..\..\advanced-concepts\secure-os\secure-os.html" data-name="secure-os-and-tls" aria-expanded="false">Secure OS and TLS</a>
                        </li>
                        <li data-family='[0, 5, 7, 10]'>
                          <a href="..\..\advanced-concepts\secure-os\secure-storage.html" data-name="secure-storage" aria-expanded="false">Secure Storage</a>
                        </li>
                        <li data-family='[0, 5, 7, 10]'>
                          <a href="..\..\advanced-concepts\secure-os\secure-api-sdk.html" data-name="security-api-thru-sdk" aria-expanded="false">Security API thru SDK</a>
                        </li>
                        <li data-family='[0, 5, 7, 10]'>
                          <a href="..\..\advanced-concepts\secure-os\secure-api.html" data-name="security-api-thru-see" aria-expanded="false">Security API thru SEE</a>
                        </li>
                        <li data-family='[0, 5, 7, 10]'>
                          <a href="..\..\advanced-concepts\secure-os\openssl.html" data-name="openssl-support" aria-expanded="false">OpenSSL Support</a>
                        </li>
                        <li data-family='[0, 5, 7, 10]'>
                          <a href="..\..\advanced-concepts\secure-os\secure-boot.html" data-name="secure-boot" aria-expanded="false">Secure Boot</a>
                        </li>
                        <li data-family='[0, 5, 7, 10]'>
                          <a href="..\..\advanced-concepts\secure-os\jtag-lock.html" data-name="jtag-port-lock" aria-expanded="false">JTAG Port Lock</a>
                        </li>
                        <li data-family='[0, 5, 7, 10]'>
                          <a href="..\..\advanced-concepts\secure-os\kms.html" data-name="production-kms" aria-expanded="false">Production KMS</a>
                        </li>
                        <li data-family='[5, 7, 10]'><a href="..\..\security-api\index.htm" data-directory="true" data-name="security-api" aria-expanded="false">ARTIK Security (SEE) API</a></li>
                      </ul>
                    </li>
                    <li data-family='[0, 5, 7, 10]'>
                      <a href="..\..\advanced-concepts\onboarding\index.htm" data-directory="true" data-name="onboarding-qr-codes" aria-expanded="false">Onboarding/QR Codes</a>
                      <ul class='subsections'>
                        <li data-family='[0, 5, 7, 10]'>
                          <a href="..\..\advanced-concepts\onboarding\onboarding.html" data-name="on-boarding" aria-expanded="false">On-boarding</a>
                        </li>
                        <li data-family='[0, 5, 7, 10]'>
                          <a href="..\..\advanced-concepts\onboarding\qr-codes.html" data-name="printing-qr-codes" aria-expanded="false">Printing QR Codes</a>
                        </li>
                      </ul>
                    </li>
                    <li data-family='[0, 5, 7, 10]'>
                      <a href="..\..\advanced-concepts\secure-ota\index.htm" data-directory="true" data-name="ota-firmware-update" aria-expanded="false">OTA Firmware Update</a>
                      <ul class='subsections'>
                        <li data-family='[0, 5, 7, 10]'>
                          <a href="..\..\advanced-concepts\secure-ota\gateway-ota\index.htm" data-directory="true" data-name="gateway-a530-710" aria-expanded="false">Gateway-A530/710</a>
                          <ul class='subsections'>
                            <li data-family='[0, 5, 7, 10]'>
                              <a href="..\..\advanced-concepts\secure-ota\gateway-ota\general-ota.html" data-name="update-procedure" aria-expanded="false">Update Procedure</a>
                            </li>
                          </ul>
                        </li>
                        <li data-family='[0]'>
                          <a href="..\..\advanced-concepts\secure-ota\wifi-ota\index.htm" data-directory="true" data-name="wi-fi-node-a05x" aria-expanded="false">Wi-Fi Node - A05X</a>
                          <ul class='subsections'>
                            <li data-family='[0]'>
                              <a href="..\..\advanced-concepts\secure-ota\wifi-ota\edge-node-update.html" data-name="update-procedure" aria-expanded="false">Update Procedure</a>
                            </li>
                          </ul>
                        </li>
                        <li data-family='[0]'>
                          <a href="..\..\advanced-concepts\secure-ota\thread-ota\index.htm" data-directory="true" data-name="thread-node-a030" aria-expanded="false">Thread Node - A030</a>
                          <ul class='subsections'>
                            <li data-family='[0]'>
                              <a href="..\..\advanced-concepts\secure-ota\thread-ota\ota-guide.html" data-name="update-procedure" aria-expanded="false">Update Procedure</a>
                            </li>
                            <li data-family='[0, 5, 7, 10]'>
                              <a href="..\..\advanced-concepts\secure-ota\thread-ota\enm-intro.html" data-name="edge-node-manager" aria-expanded="false">Edge Node Manager</a>
                            </li>
                            <li class='enm-nav' data-family='[0, 5, 7, 10]'><a href="..\..\advanced-concepts\coap\enm-rest-api\index.htm" data-directory="false" aria-expanded="false">ENM REST API</a></li>
                          </ul>
                        </li>
                        <li data-family='[0, 5, 7, 10]'>
                          <a href="..\..\advanced-concepts\secure-ota\signing.html" data-name="package-signing" aria-expanded="false">Package Signing</a>
                        </li>
                      </ul>
                    </li>
                  </ul>
                </li>
                <li data-family='[0, 5, 7, 10]'>
                  <a href="..\..\changelog.html" data-name="changelog" aria-expanded="false">Changelog</a>
                </li>
              </ul>
            </li>
          </ul>
        </nav>
        <div id='st-results-container'>
          <div class='container'>
            <div class='row'>
              <div class='col-xs-12 col-sm-12'>
                <div id='st-filters'>
                  <h3>Filter results by</h3>
                  <div>
                    <label>
                      <input type='checkbox' value='modules'>
                      ARTIK Modules
                    </label>
                  </div>
                  <div>
                    <label>
                      <input type='checkbox' value='cloud'>
                      ARTIK Cloud
                    </label>
                  </div>
                  <div>
                    <label>
                      <input type='checkbox' value='developer'>
                      Developer
                    </label>
                  </div>
                  <div>
                    <label>
                      <input type='checkbox' value='forums'>
                      Forums
                    </label>
                  </div>
                  <div>
                    <label>
                      <input type='checkbox' value='marketplace'>
                      IoT Marketplace
                    </label>
                  </div>
                </div>
              </div>
            </div>
            <div class='row'>
              <div class='col-xs-12 col-sm-12'>
                <div id='swiftype-results'></div>
              </div>
            </div>
          </div>
        </div>
        <div class='main content' data-view='Content'>
          <div id='family-selectors'>
            <button data-family='0'>ARTIK 0</button>
            <button data-family='5'>ARTIK 5/7/10</button>
            <!-- %button{data: { family: 7 }} ARTIK 7 -->
            <!-- %button{data: { family: 10 }} ARTIK 10 -->
          </div>
          <div class='main-content-interior' data-swiftype-name='body' data-swiftype-type='text'>
            <h1 id="artik-05x-as-mqtt-subscriber">ARTIK 05X as MQTT Subscriber</h1>
            
            <p>The ARTIK 05X module makes great use of <a href="http://mosquitto.org/man/mqtt-7.html" title="Mosquitto MQTT page">MQTT</a> as a lightweight IoT messaging protocol. MQTT follows a publish-subscribe ("pub/sub") model; the ARTIK 05X device acts as a sensor that publishes its findings to the central broker, and also as an actuator that subscribes to messages from the broker and carries out actions.</p>
            
            <p>In this tutorial, we use the ARTIK IDE to set up your ARTIK 05X module as a simple MQTT subscriber. It waits for messages with a topic of 'color' and then turns on the appropriate LED when it sees the right color message.</p>
            
            <p>You will need an MQTT broker and an MQTT publisher to test out the subscriber code we provide here.</p>
            
            <ul>
              <li>
                <p>If you have an ARTIK 5/7/10 module available, follow the <a href="..\..\advanced-concepts\mqtt\color-mqtt.html">introductory MQTT tutorial</a>. For the moment, all you really need to do is connect to Wi-Fi<sup>®</sup> and then enter<br>
            <code>mosquitto -v &amp;</code><br>
            which will start the broker and make it ready for an ARTIK 05X connect request.</p>
              </li>
              <li>
                <p>If not, you'll need to set up <a href="https://mosquitto.org/download/" target="_blank">Mosquitto</a> as an MQTT broker on your PC. You can then install and use <a href="http://www.mqttfx.org/" target="_blank">MQTT.fx</a> to publish MQTT messages.</p>
              </li>
            </ul>
            
            <p>There are many other options, so choose the one you are most comfortable with.</p>
            
            <p><strong>Prerequisites</strong></p>
            
            <p>You'll need the following resources, and about a half hour of your time.</p>
            
            <ul>
              <li>Any system set up as MQTT broker</li>
              <li>ARTIK 05X module</li>
              <li>Wi-Fi<sup>®</sup> access point</li>
              <li>ARTIK IDE using SDK v1.6 or later</li>
            </ul>
            
            <p>You'll be using the ARTIK IDE to compile the code for ARTIK 05X modules, so you'll probably want to try out an <a href="..\..\developer-guide\artik-ide\tizen-apps.html">example project</a> before tackling this one.</p>
            
            <h2 id="set-up-subscriber-edge-device">Set Up Subscriber Edge Device</h2>
            
            <p>We will use an ARTIK 05X module as our edge device.</p>
            
            <p style="margin-left: 12px;">
              <a class="btn btn-primary" role="button" data-toggle="collapse" href="#053-mqtt-sub" aria-expanded="false" aria-controls="053-mqtt-sub">
                see it demonstrated
              </a>
            </p>
            
            <div class="collapse" id="053-mqtt-sub">
              <div class="boxed">
                <iframe width="560" height="315" class="video-embed" data-youtube="https://www.youtube.com/embed/9dhuvOJgq6g?rel=0" data-youku="https://player.youku.com/embed/XMzAzODA4NjI0NA=="></iframe>
            
              </div>
            </div>
            
            <ol>
            <li>
            
            In the ARTIK IDE, open a new ARTIK 05X C Project.  Name the project anything you like. Click Next.
            
            </li>
            <li>
            
            
            Select the Hello World example, which we'll just use as a placeholder for our code. Click Next.
            
            </li>
            <li>
            On the next screen, Configuration, where you would normally just hit Next, you need to set "Pre-build configuration" to <strong>extra</strong>. Doing so brings in the MQTT functions we'll need for this project. Hit Next and Finish<br>
            <img src="..\..\images\docs\developer-guide\artik-ide-config-mqtt.jpg"><br><br>
            
            </li>
            <li>
            Delete the <code>hello_main.c</code> file; we'll be creating our own.
            
            </li>
            <li>
            Start with  MQTT subscriber code, which we've provided here. 
            
            <p style="margin-left: 0px;"><strong style="display: inline-block; margin-right: 5px;"><font color="blue"></font> </strong>
            
              <a class="btn btn-primary" role="button" data-toggle="collapse" href="#mqtt-sub-main" aria-expanded="false" aria-controls="mqtt-sub-main">
                main.c code
              </a>
            </p>
            
            <div class="collapse" id="mqtt-sub-main">
            <div class="boxed">
              <h3 id="mainc-code">main.c code</h3>
            
            <div class="highlight c"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1&#x000A;2&#x000A;3&#x000A;4&#x000A;5&#x000A;6&#x000A;7&#x000A;8&#x000A;9&#x000A;10&#x000A;11&#x000A;12&#x000A;13&#x000A;14&#x000A;15&#x000A;16&#x000A;17&#x000A;18&#x000A;19&#x000A;20&#x000A;21&#x000A;22&#x000A;23&#x000A;24&#x000A;25&#x000A;26&#x000A;27&#x000A;28&#x000A;29&#x000A;30&#x000A;31&#x000A;32&#x000A;33&#x000A;34&#x000A;35&#x000A;36&#x000A;37&#x000A;38&#x000A;39&#x000A;40&#x000A;41&#x000A;42&#x000A;43&#x000A;44&#x000A;45&#x000A;46&#x000A;47&#x000A;48&#x000A;49&#x000A;50&#x000A;51&#x000A;52&#x000A;53&#x000A;54&#x000A;55&#x000A;56&#x000A;57&#x000A;58&#x000A;59&#x000A;60&#x000A;61&#x000A;62&#x000A;63&#x000A;64&#x000A;65&#x000A;66&#x000A;67&#x000A;68&#x000A;69&#x000A;70&#x000A;71&#x000A;72&#x000A;73&#x000A;74&#x000A;75&#x000A;76&#x000A;77&#x000A;78&#x000A;79&#x000A;80&#x000A;81&#x000A;82&#x000A;83&#x000A;84&#x000A;85&#x000A;86&#x000A;87&#x000A;88&#x000A;89&#x000A;90&#x000A;91&#x000A;92&#x000A;93&#x000A;94&#x000A;95&#x000A;96&#x000A;97&#x000A;98&#x000A;99&#x000A;100&#x000A;101&#x000A;102&#x000A;103&#x000A;104&#x000A;105&#x000A;106&#x000A;107&#x000A;108&#x000A;109&#x000A;110&#x000A;111&#x000A;112&#x000A;113&#x000A;114&#x000A;115&#x000A;116&#x000A;117&#x000A;118&#x000A;119&#x000A;120&#x000A;121&#x000A;122&#x000A;123&#x000A;124&#x000A;125&#x000A;126&#x000A;127&#x000A;128&#x000A;129&#x000A;130&#x000A;131&#x000A;132&#x000A;133&#x000A;134&#x000A;135&#x000A;136&#x000A;137&#x000A;138&#x000A;139&#x000A;140&#x000A;141&#x000A;142&#x000A;143&#x000A;144&#x000A;145&#x000A;146&#x000A;147&#x000A;148&#x000A;149&#x000A;150&#x000A;151&#x000A;152&#x000A;153&#x000A;154&#x000A;155&#x000A;156&#x000A;157&#x000A;158&#x000A;159&#x000A;160&#x000A;161&#x000A;162&#x000A;163&#x000A;164&#x000A;165&#x000A;166&#x000A;167&#x000A;168&#x000A;169&#x000A;170&#x000A;171&#x000A;172&#x000A;173&#x000A;174&#x000A;175&#x000A;176&#x000A;177&#x000A;178&#x000A;179&#x000A;180&#x000A;181&#x000A;182&#x000A;183&#x000A;184&#x000A;185&#x000A;186&#x000A;187&#x000A;188&#x000A;189&#x000A;190&#x000A;191&#x000A;192&#x000A;193&#x000A;194&#x000A;195&#x000A;196&#x000A;197&#x000A;198&#x000A;199&#x000A;200&#x000A;201&#x000A;202&#x000A;203&#x000A;204&#x000A;205&#x000A;206&#x000A;207&#x000A;208&#x000A;209&#x000A;210&#x000A;211&#x000A;212&#x000A;213&#x000A;214&#x000A;215&#x000A;216&#x000A;217&#x000A;218&#x000A;219&#x000A;220&#x000A;221&#x000A;222&#x000A;223&#x000A;224&#x000A;225&#x000A;226&#x000A;227&#x000A;228&#x000A;229&#x000A;230&#x000A;231&#x000A;232&#x000A;233&#x000A;234&#x000A;235&#x000A;236&#x000A;237&#x000A;238&#x000A;239&#x000A;240&#x000A;241&#x000A;242&#x000A;243&#x000A;244&#x000A;245&#x000A;246&#x000A;247&#x000A;248&#x000A;249&#x000A;250&#x000A;251&#x000A;252&#x000A;253&#x000A;254&#x000A;255&#x000A;256&#x000A;257&#x000A;258&#x000A;259&#x000A;260&#x000A;261&#x000A;262&#x000A;263&#x000A;264&#x000A;265&#x000A;266&#x000A;267</pre></td><td class="code"><pre><span class="cp">#include "wifi.h"&#x000A;#include &lt;tinyara/gpio.h&gt;&#x000A;#include &lt;apps/netutils/mqtt_api.h&gt;&#x000A;#include &lt;apps/netutils/dhcpc.h&gt;&#x000A;</span>&#x000A;<span class="cp">#define DEFAULT_CLIENT_ID "123456789"&#x000A;#define SERVER_ADDR "10.0.1.98"&#x000A;#define RED "RED"&#x000A;#define BLUE "BLUE"&#x000A;#define GREEN "GREEN"&#x000A;#define RED_LED 45&#x000A;#define GREEN_LED 60&#x000A;#define BLUE_LED 49&#x000A;#define RED_ON_BOARD_LED 45&#x000A;#define NET_DEVNAME "wl1"&#x000A;</span>&#x000A;<span class="c1">// mqtt client handle&#x000A;</span><span class="n">mqtt_client_t</span><span class="o">*</span> <span class="n">pClientHandle</span> <span class="o">=</span> <span class="nb">NULL</span><span class="p">;</span>&#x000A;&#x000A;<span class="c1">// mqtt client parameters&#x000A;</span><span class="n">mqtt_client_config_t</span> <span class="n">clientConfig</span><span class="p">;</span>&#x000A;&#x000A;<span class="c1">//int blinkerValue = 0;&#x000A;</span><span class="kt">int</span> <span class="n">currentLED</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>&#x000A;&#x000A;<span class="c1">// mqtt client on connect callback&#x000A;</span><span class="kt">void</span> <span class="nf">onConnect</span><span class="p">(</span><span class="kt">void</span><span class="o">*</span> <span class="n">client</span><span class="p">,</span> <span class="kt">int</span> <span class="n">result</span><span class="p">)</span> <span class="p">{</span>&#x000A;    <span class="n">printf</span><span class="p">(</span><span class="s">"mqtt client connected to the server</span><span class="se">\n</span><span class="s">"</span><span class="p">);</span>&#x000A;<span class="p">}</span>&#x000A;&#x000A;<span class="c1">// mqtt client on disconnect callback&#x000A;</span><span class="kt">void</span> <span class="nf">onDisconnect</span><span class="p">(</span><span class="kt">void</span><span class="o">*</span> <span class="n">client</span><span class="p">,</span> <span class="kt">int</span> <span class="n">result</span><span class="p">)</span> <span class="p">{</span>&#x000A;    <span class="n">printf</span><span class="p">(</span><span class="s">"mqtt client disconnected from the server</span><span class="se">\n</span><span class="s">"</span><span class="p">);</span>&#x000A;<span class="p">}</span>&#x000A;&#x000A;<span class="c1">// Write the value of given gpio port.&#x000A;</span><span class="kt">void</span> <span class="nf">gpio_write</span><span class="p">(</span><span class="kt">int</span> <span class="n">port</span><span class="p">,</span> <span class="kt">int</span> <span class="n">value</span><span class="p">)</span> <span class="p">{</span>&#x000A;    <span class="kt">char</span> <span class="n">str</span><span class="p">[</span><span class="mi">4</span><span class="p">];</span>&#x000A;    <span class="k">static</span> <span class="kt">char</span> <span class="n">devpath</span><span class="p">[</span><span class="mi">16</span><span class="p">];</span>&#x000A;    <span class="n">snprintf</span><span class="p">(</span><span class="n">devpath</span><span class="p">,</span> <span class="mi">16</span><span class="p">,</span> <span class="s">"/dev/gpio%d"</span><span class="p">,</span> <span class="n">port</span><span class="p">);</span>&#x000A;    <span class="kt">int</span> <span class="n">fd</span> <span class="o">=</span> <span class="n">open</span><span class="p">(</span><span class="n">devpath</span><span class="p">,</span> <span class="n">O_RDWR</span><span class="p">);</span>&#x000A;&#x000A;    <span class="n">ioctl</span><span class="p">(</span><span class="n">fd</span><span class="p">,</span> <span class="n">GPIOIOC_SET_DIRECTION</span><span class="p">,</span> <span class="n">GPIO_DIRECTION_OUT</span><span class="p">);</span>&#x000A;    <span class="n">write</span><span class="p">(</span><span class="n">fd</span><span class="p">,</span> <span class="n">str</span><span class="p">,</span> <span class="n">snprintf</span><span class="p">(</span><span class="n">str</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="s">"%d"</span><span class="p">,</span> <span class="n">value</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span><span class="p">);</span>&#x000A;&#x000A;    <span class="n">close</span><span class="p">(</span><span class="n">fd</span><span class="p">);</span>&#x000A;<span class="p">}</span>&#x000A;&#x000A;<span class="kt">void</span> <span class="nf">ledSignal</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span> <span class="p">{</span>&#x000A;    <span class="k">switch</span> <span class="p">(</span><span class="n">currentLED</span><span class="p">)</span> <span class="p">{</span>&#x000A;    <span class="k">case</span> <span class="n">RED_LED</span><span class="p">:</span> <span class="p">{</span>&#x000A;        <span class="n">gpio_write</span><span class="p">(</span><span class="n">GREEN_LED</span><span class="p">,</span><span class="mi">0</span><span class="p">);</span>&#x000A;        <span class="n">gpio_write</span><span class="p">(</span><span class="n">BLUE_LED</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>&#x000A;        <span class="n">gpio_write</span><span class="p">(</span><span class="n">RED_LED</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>&#x000A;    <span class="p">}</span>&#x000A;    <span class="k">break</span><span class="p">;</span>&#x000A;    <span class="k">case</span> <span class="n">GREEN_LED</span><span class="p">:</span> <span class="p">{</span>&#x000A;        <span class="n">gpio_write</span><span class="p">(</span><span class="n">BLUE_LED</span><span class="p">,</span><span class="mi">0</span><span class="p">);</span>&#x000A;        <span class="n">gpio_write</span><span class="p">(</span><span class="n">RED_LED</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>&#x000A;        <span class="n">gpio_write</span><span class="p">(</span><span class="n">GREEN_LED</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>&#x000A;    <span class="p">}</span>&#x000A;    <span class="k">break</span><span class="p">;</span>&#x000A;    <span class="k">case</span> <span class="n">BLUE_LED</span><span class="p">:</span> <span class="p">{</span>&#x000A;        <span class="n">gpio_write</span><span class="p">(</span><span class="n">RED_LED</span><span class="p">,</span><span class="mi">0</span><span class="p">);</span>&#x000A;        <span class="n">gpio_write</span><span class="p">(</span><span class="n">GREEN_LED</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>&#x000A;        <span class="n">gpio_write</span><span class="p">(</span><span class="n">BLUE_LED</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>&#x000A;    <span class="p">}</span>&#x000A;    <span class="k">break</span><span class="p">;</span>&#x000A;    <span class="nl">default:</span> <span class="p">{</span>&#x000A;        <span class="n">gpio_write</span><span class="p">(</span><span class="n">RED_LED</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>&#x000A;        <span class="n">gpio_write</span><span class="p">(</span><span class="n">BLUE_LED</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>&#x000A;        <span class="n">gpio_write</span><span class="p">(</span><span class="n">GREEN_LED</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>&#x000A;    <span class="p">}</span>&#x000A;    <span class="k">break</span><span class="p">;</span>&#x000A;    <span class="p">}</span>&#x000A;    <span class="k">return</span><span class="p">;</span>&#x000A;<span class="p">}</span>&#x000A;&#x000A;<span class="c1">// mqtt client on message callback&#x000A;</span><span class="kt">void</span> <span class="nf">onMessage</span><span class="p">(</span><span class="kt">void</span> <span class="o">*</span><span class="n">client</span><span class="p">,</span> <span class="n">mqtt_msg_t</span> <span class="o">*</span><span class="n">msg</span><span class="p">)</span> <span class="p">{</span>&#x000A;    <span class="n">printf</span><span class="p">(</span><span class="s">"Received message</span><span class="se">\n</span><span class="s">"</span><span class="p">);</span>&#x000A;    <span class="n">printf</span><span class="p">(</span><span class="s">"Topic: %s</span><span class="se">\n</span><span class="s">"</span><span class="p">,</span> <span class="n">msg</span><span class="o">-&gt;</span><span class="n">topic</span><span class="p">);</span>&#x000A;    <span class="n">printf</span><span class="p">(</span><span class="s">"Message: %s</span><span class="se">\n</span><span class="s">"</span><span class="p">,</span> <span class="n">msg</span><span class="o">-&gt;</span><span class="n">payload</span><span class="p">);</span>&#x000A;&#x000A;    <span class="c1">// Check if the message received is RED&#x000A;</span>    <span class="kt">int</span> <span class="n">result</span> <span class="o">=</span> <span class="n">strcmp</span><span class="p">(</span><span class="n">msg</span><span class="o">-&gt;</span><span class="n">payload</span><span class="p">,</span> <span class="n">RED</span><span class="p">);</span>&#x000A;    <span class="k">if</span> <span class="p">(</span><span class="n">result</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>&#x000A;        <span class="k">if</span> <span class="p">(</span><span class="n">currentLED</span> <span class="o">!=</span> <span class="n">RED_LED</span><span class="p">)</span> <span class="p">{</span>&#x000A;            <span class="n">currentLED</span> <span class="o">=</span> <span class="n">RED_LED</span><span class="p">;</span>&#x000A;            <span class="n">ledSignal</span><span class="p">();</span>&#x000A;        <span class="p">}</span>&#x000A;        <span class="n">printf</span><span class="p">(</span><span class="s">"Red LED</span><span class="se">\n</span><span class="s">"</span><span class="p">);</span>&#x000A;        <span class="k">return</span><span class="p">;</span>&#x000A;    <span class="p">}</span>&#x000A;&#x000A;    <span class="c1">// Check if the message received is GREEN&#x000A;</span>    <span class="n">result</span> <span class="o">=</span> <span class="n">strcmp</span><span class="p">(</span><span class="n">msg</span><span class="o">-&gt;</span><span class="n">payload</span><span class="p">,</span> <span class="n">GREEN</span><span class="p">);</span>&#x000A;    <span class="k">if</span> <span class="p">(</span><span class="n">result</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>&#x000A;        <span class="k">if</span> <span class="p">(</span><span class="n">currentLED</span> <span class="o">!=</span> <span class="n">GREEN_LED</span><span class="p">)</span> <span class="p">{</span>&#x000A;            <span class="n">currentLED</span> <span class="o">=</span> <span class="n">GREEN_LED</span><span class="p">;</span>&#x000A;            <span class="n">ledSignal</span><span class="p">();</span>&#x000A;        <span class="p">}</span>&#x000A;        <span class="n">printf</span><span class="p">(</span><span class="s">"Green LED</span><span class="se">\n</span><span class="s">"</span><span class="p">);</span>&#x000A;        <span class="k">return</span><span class="p">;</span>&#x000A;    <span class="p">}</span>&#x000A;&#x000A;    <span class="c1">// Check if the message received is BLUE&#x000A;</span>    <span class="n">result</span> <span class="o">=</span> <span class="n">strcmp</span><span class="p">(</span><span class="n">msg</span><span class="o">-&gt;</span><span class="n">payload</span><span class="p">,</span> <span class="n">BLUE</span><span class="p">);</span>&#x000A;    <span class="k">if</span> <span class="p">(</span><span class="n">result</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>&#x000A;        <span class="k">if</span> <span class="p">(</span><span class="n">currentLED</span> <span class="o">!=</span> <span class="n">BLUE_LED</span><span class="p">)</span> <span class="p">{</span>&#x000A;            <span class="n">currentLED</span> <span class="o">=</span> <span class="n">BLUE_LED</span><span class="p">;</span>&#x000A;            <span class="n">ledSignal</span><span class="p">();</span>&#x000A;        <span class="p">}</span>&#x000A;        <span class="n">printf</span><span class="p">(</span><span class="s">"Blue LED</span><span class="se">\n</span><span class="s">"</span><span class="p">);</span>&#x000A;        <span class="k">return</span><span class="p">;</span>&#x000A;    <span class="p">}</span>&#x000A;&#x000A;    <span class="n">currentLED</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>&#x000A;    <span class="n">ledSignal</span><span class="p">();</span>    <span class="c1">// Turn off all LEDs&#x000A;</span><span class="p">}</span>&#x000A;&#x000A;<span class="c1">// Utility function to configure mqtt client&#x000A;</span><span class="kt">void</span> <span class="nf">initializeConfigUtil</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span> <span class="p">{</span>&#x000A;    <span class="kt">uint8_t</span> <span class="n">macId</span><span class="p">[</span><span class="n">IFHWADDRLEN</span><span class="p">];</span>&#x000A;    <span class="n">clientConfig</span><span class="p">.</span><span class="n">protocol_version</span> <span class="o">=</span> <span class="n">MQTT_PROTOCOL_VERSION_31</span><span class="p">;</span>&#x000A;    <span class="kt">int</span> <span class="n">result</span> <span class="o">=</span> <span class="n">netlib_getmacaddr</span><span class="p">(</span><span class="s">"wl1"</span><span class="p">,</span> <span class="n">macId</span><span class="p">);</span>&#x000A;    <span class="k">if</span> <span class="p">(</span><span class="n">result</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>&#x000A;        <span class="n">printf</span><span class="p">(</span><span class="s">"Get MAC Address failed. Assigning \&#x000A;                Client ID as 123456789"</span><span class="p">);</span>&#x000A;        <span class="n">clientConfig</span><span class="p">.</span><span class="n">client_id</span> <span class="o">=</span>&#x000A;                <span class="n">DEFAULT_CLIENT_ID</span><span class="p">;</span> <span class="c1">// MAC id Artik 053&#x000A;</span>    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>&#x000A;    <span class="n">printf</span><span class="p">(</span><span class="s">"MAC: %02x:%02x:%02x:%02x:%02x:%02x</span><span class="se">\n</span><span class="s">"</span><span class="p">,</span>&#x000A;            <span class="p">((</span><span class="kt">uint8_t</span> <span class="o">*</span><span class="p">)</span> <span class="n">macId</span><span class="p">)[</span><span class="mi">0</span><span class="p">],</span>&#x000A;            <span class="p">((</span><span class="kt">uint8_t</span> <span class="o">*</span><span class="p">)</span> <span class="n">macId</span><span class="p">)[</span><span class="mi">1</span><span class="p">],</span> <span class="p">((</span><span class="kt">uint8_t</span> <span class="o">*</span><span class="p">)</span> <span class="n">macId</span><span class="p">)[</span><span class="mi">2</span><span class="p">],</span>&#x000A;            <span class="p">((</span><span class="kt">uint8_t</span> <span class="o">*</span><span class="p">)</span> <span class="n">macId</span><span class="p">)[</span><span class="mi">3</span><span class="p">],</span> <span class="p">((</span><span class="kt">uint8_t</span> <span class="o">*</span><span class="p">)</span> <span class="n">macId</span><span class="p">)[</span><span class="mi">4</span><span class="p">],</span>&#x000A;            <span class="p">((</span><span class="kt">uint8_t</span> <span class="o">*</span><span class="p">)</span> <span class="n">macId</span><span class="p">)[</span><span class="mi">5</span><span class="p">]);</span>&#x000A;    <span class="kt">char</span> <span class="n">buf</span><span class="p">[</span><span class="mi">12</span><span class="p">];</span>&#x000A;    <span class="n">sprintf</span><span class="p">(</span><span class="n">buf</span><span class="p">,</span> <span class="s">"%02x%02x%02x%02x%02x%02x"</span><span class="p">,</span>&#x000A;            <span class="p">((</span><span class="kt">uint8_t</span> <span class="o">*</span><span class="p">)</span> <span class="n">macId</span><span class="p">)[</span><span class="mi">0</span><span class="p">],</span>&#x000A;            <span class="p">((</span><span class="kt">uint8_t</span> <span class="o">*</span><span class="p">)</span> <span class="n">macId</span><span class="p">)[</span><span class="mi">1</span><span class="p">],</span> <span class="p">((</span><span class="kt">uint8_t</span> <span class="o">*</span><span class="p">)</span> <span class="n">macId</span><span class="p">)[</span><span class="mi">2</span><span class="p">],</span>&#x000A;            <span class="p">((</span><span class="kt">uint8_t</span> <span class="o">*</span><span class="p">)</span> <span class="n">macId</span><span class="p">)[</span><span class="mi">3</span><span class="p">],</span> <span class="p">((</span><span class="kt">uint8_t</span> <span class="o">*</span><span class="p">)</span> <span class="n">macId</span><span class="p">)[</span><span class="mi">4</span><span class="p">],</span>&#x000A;            <span class="p">((</span><span class="kt">uint8_t</span> <span class="o">*</span><span class="p">)</span> <span class="n">macId</span><span class="p">)[</span><span class="mi">5</span><span class="p">]);</span>&#x000A;    <span class="n">clientConfig</span><span class="p">.</span><span class="n">client_id</span> <span class="o">=</span> <span class="n">buf</span><span class="p">;</span> <span class="c1">// MAC id Artik 053&#x000A;</span>    <span class="n">printf</span><span class="p">(</span><span class="s">"Registering mqtt client with id = %s</span><span class="se">\n</span><span class="s">"</span><span class="p">,</span> <span class="n">buf</span><span class="p">);</span>&#x000A;    <span class="p">}</span>&#x000A;    <span class="n">clientConfig</span><span class="p">.</span><span class="n">on_connect</span> <span class="o">=</span> <span class="p">(</span><span class="kt">void</span><span class="o">*</span><span class="p">)</span> <span class="n">onConnect</span><span class="p">;</span>&#x000A;    <span class="n">clientConfig</span><span class="p">.</span><span class="n">on_disconnect</span> <span class="o">=</span> <span class="p">(</span><span class="kt">void</span><span class="o">*</span><span class="p">)</span> <span class="n">onDisconnect</span><span class="p">;</span>&#x000A;    <span class="n">clientConfig</span><span class="p">.</span><span class="n">on_message</span> <span class="o">=</span> <span class="p">(</span><span class="kt">void</span><span class="o">*</span><span class="p">)</span> <span class="n">onMessage</span><span class="p">;</span>&#x000A;<span class="p">}</span>&#x000A;&#x000A;<span class="kt">int</span> <span class="nf">main</span><span class="p">(</span><span class="kt">int</span> <span class="n">argc</span><span class="p">,</span> <span class="kt">char</span> <span class="o">*</span><span class="n">argv</span><span class="p">[])</span> <span class="p">{</span>&#x000A;&#x000A;    <span class="n">bool</span> <span class="n">wifiConnected</span> <span class="o">=</span> <span class="nb">false</span><span class="p">;</span>&#x000A;    <span class="n">gpio_write</span><span class="p">(</span><span class="n">RED_ON_BOARD_LED</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span> <span class="c1">// Turn on on board Red LED to indicate no WiFi connection is established&#x000A;</span>&#x000A;<span class="cp">#ifdef CONFIG_CTRL_IFACE_FIFO&#x000A;</span>    <span class="kt">int</span> <span class="n">ret</span><span class="p">;</span>&#x000A;&#x000A;    <span class="k">while</span><span class="p">(</span><span class="o">!</span><span class="n">wifiConnected</span><span class="p">)</span> <span class="p">{</span>&#x000A;        <span class="n">ret</span> <span class="o">=</span> <span class="n">mkfifo</span><span class="p">(</span><span class="n">CONFIG_WPA_CTRL_FIFO_DEV_REQ</span><span class="p">,</span>&#x000A;                <span class="n">CONFIG_WPA_CTRL_FIFO_MK_MODE</span><span class="p">);</span>&#x000A;        <span class="k">if</span> <span class="p">(</span><span class="n">ret</span> <span class="o">!=</span> <span class="mi">0</span> <span class="o">&amp;&amp;</span> <span class="n">ret</span> <span class="o">!=</span> <span class="o">-</span><span class="n">EEXIST</span><span class="p">)</span> <span class="p">{</span>&#x000A;            <span class="n">printf</span><span class="p">(</span><span class="s">"mkfifo error for %s: %s"</span><span class="p">,</span>&#x000A;                    <span class="n">CONFIG_WPA_CTRL_FIFO_DEV_REQ</span><span class="p">,</span>&#x000A;                    <span class="n">strerror</span><span class="p">(</span><span class="n">errno</span><span class="p">));</span>&#x000A;        <span class="p">}</span>&#x000A;        <span class="n">ret</span> <span class="o">=</span> <span class="n">mkfifo</span><span class="p">(</span><span class="n">CONFIG_WPA_CTRL_FIFO_DEV_CFM</span><span class="p">,</span>&#x000A;                <span class="n">CONFIG_WPA_CTRL_FIFO_MK_MODE</span><span class="p">);</span>&#x000A;        <span class="k">if</span> <span class="p">(</span><span class="n">ret</span> <span class="o">!=</span> <span class="mi">0</span> <span class="o">&amp;&amp;</span> <span class="n">ret</span> <span class="o">!=</span> <span class="o">-</span><span class="n">EEXIST</span><span class="p">)</span> <span class="p">{</span>&#x000A;            <span class="n">printf</span><span class="p">(</span><span class="s">"mkfifo error for %s: %s"</span><span class="p">,</span>&#x000A;                    <span class="n">CONFIG_WPA_CTRL_FIFO_DEV_CFM</span><span class="p">,</span>&#x000A;                    <span class="n">strerror</span><span class="p">(</span><span class="n">errno</span><span class="p">));</span>&#x000A;        <span class="p">}</span>&#x000A;&#x000A;        <span class="n">ret</span> <span class="o">=</span> <span class="n">mkfifo</span><span class="p">(</span><span class="n">CONFIG_WPA_MONITOR_FIFO_DEV</span><span class="p">,</span>&#x000A;                <span class="n">CONFIG_WPA_CTRL_FIFO_MK_MODE</span><span class="p">);</span>&#x000A;        <span class="k">if</span> <span class="p">(</span><span class="n">ret</span> <span class="o">!=</span> <span class="mi">0</span> <span class="o">&amp;&amp;</span> <span class="n">ret</span> <span class="o">!=</span> <span class="o">-</span><span class="n">EEXIST</span><span class="p">)</span> <span class="p">{</span>&#x000A;            <span class="n">printf</span><span class="p">(</span><span class="s">"mkfifo error for %s: %s"</span><span class="p">,</span>&#x000A;                    <span class="n">CONFIG_WPA_MONITOR_FIFO_DEV</span><span class="p">,</span>&#x000A;                    <span class="n">strerror</span><span class="p">(</span><span class="n">errno</span><span class="p">));</span>&#x000A;        <span class="p">}</span>&#x000A;    <span class="cp">#endif&#x000A;</span>&#x000A;        <span class="k">if</span> <span class="p">(</span><span class="n">start_wifi_interface</span><span class="p">()</span> <span class="o">==</span> <span class="n">SLSI_STATUS_ERROR</span><span class="p">)</span> <span class="p">{</span>&#x000A;            <span class="n">printf</span><span class="p">(</span><span class="s">"Connect Wi-Fi failed. Try Again.</span><span class="se">\n</span><span class="s">"</span><span class="p">);</span>&#x000A;        <span class="p">}</span>&#x000A;        <span class="k">else</span> <span class="p">{</span>&#x000A;            <span class="n">wifiConnected</span> <span class="o">=</span> <span class="nb">true</span><span class="p">;</span>&#x000A;            <span class="n">gpio_write</span><span class="p">(</span><span class="n">RED_ON_BOARD_LED</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span> <span class="c1">// Turn off Red LED to indicate WiFi connection is established&#x000A;</span>        <span class="p">}</span>&#x000A;    <span class="p">}</span>&#x000A;&#x000A;    <span class="n">printf</span><span class="p">(</span><span class="s">"Connect to Wi-Fi success</span><span class="se">\n</span><span class="s">"</span><span class="p">);</span>&#x000A;&#x000A;    <span class="n">bool</span> <span class="n">mqttConnected</span> <span class="o">=</span> <span class="nb">false</span><span class="p">;</span>&#x000A;    <span class="n">bool</span> <span class="n">ipObtained</span> <span class="o">=</span> <span class="nb">false</span><span class="p">;</span>&#x000A;    <span class="n">printf</span><span class="p">(</span><span class="s">"Get IP address</span><span class="se">\n</span><span class="s">"</span><span class="p">);</span>&#x000A;&#x000A;    <span class="k">struct</span> <span class="n">dhcpc_state</span> <span class="n">state</span><span class="p">;</span>&#x000A;    <span class="kt">void</span> <span class="o">*</span><span class="n">dhcp_handle</span><span class="p">;</span>&#x000A;&#x000A;    <span class="k">while</span><span class="p">(</span><span class="o">!</span><span class="n">ipObtained</span><span class="p">)</span> <span class="p">{</span>&#x000A;        <span class="n">dhcp_handle</span> <span class="o">=</span> <span class="n">dhcpc_open</span><span class="p">(</span><span class="n">NET_DEVNAME</span><span class="p">);</span>&#x000A;        <span class="n">ret</span> <span class="o">=</span> <span class="n">dhcpc_request</span><span class="p">(</span><span class="n">dhcp_handle</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">state</span><span class="p">);</span>&#x000A;        <span class="n">dhcpc_close</span><span class="p">(</span><span class="n">dhcp_handle</span><span class="p">);</span>&#x000A;&#x000A;        <span class="k">if</span> <span class="p">(</span><span class="n">ret</span> <span class="o">!=</span> <span class="n">OK</span><span class="p">)</span> <span class="p">{</span>&#x000A;            <span class="n">printf</span><span class="p">(</span><span class="s">"Failed to get IP address</span><span class="se">\n</span><span class="s">"</span><span class="p">);</span>&#x000A;            <span class="n">printf</span><span class="p">(</span><span class="s">"Try again</span><span class="se">\n</span><span class="s">"</span><span class="p">);</span>&#x000A;            <span class="n">sleep</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>&#x000A;        <span class="p">}</span>&#x000A;        <span class="k">else</span> <span class="p">{</span>&#x000A;            <span class="n">ipObtained</span> <span class="o">=</span> <span class="nb">true</span><span class="p">;</span>&#x000A;        <span class="p">}</span>&#x000A;    <span class="p">}</span>&#x000A;    <span class="n">netlib_set_ipv4addr</span><span class="p">(</span><span class="n">NET_DEVNAME</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">state</span><span class="p">.</span><span class="n">ipaddr</span><span class="p">);</span>&#x000A;    <span class="n">netlib_set_ipv4netmask</span><span class="p">(</span><span class="n">NET_DEVNAME</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">state</span><span class="p">.</span><span class="n">netmask</span><span class="p">);</span>&#x000A;    <span class="n">netlib_set_dripv4addr</span><span class="p">(</span><span class="n">NET_DEVNAME</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">state</span><span class="p">.</span><span class="n">default_router</span><span class="p">);</span>&#x000A;&#x000A;    <span class="n">printf</span><span class="p">(</span><span class="s">"IP address  %s</span><span class="se">\n</span><span class="s">"</span><span class="p">,</span> <span class="n">inet_ntoa</span><span class="p">(</span><span class="n">state</span><span class="p">.</span><span class="n">ipaddr</span><span class="p">));</span>&#x000A;&#x000A;    <span class="n">sleep</span><span class="p">(</span><span class="mi">5</span><span class="p">);</span>&#x000A;&#x000A;    <span class="c1">// Connect to the WiFi network for Internet connectivity&#x000A;</span>    <span class="n">printf</span><span class="p">(</span><span class="s">"mqtt client tutorial</span><span class="se">\n</span><span class="s">"</span><span class="p">);</span>&#x000A;&#x000A;    <span class="c1">// Initialize mqtt client&#x000A;</span>    <span class="n">initializeConfigUtil</span><span class="p">();</span>&#x000A;&#x000A;    <span class="n">pClientHandle</span> <span class="o">=</span> <span class="n">mqtt_init_client</span><span class="p">(</span><span class="o">&amp;</span><span class="n">clientConfig</span><span class="p">);</span>&#x000A;    <span class="k">if</span> <span class="p">(</span><span class="n">pClientHandle</span> <span class="o">==</span> <span class="nb">NULL</span><span class="p">)</span> <span class="p">{</span>&#x000A;        <span class="n">printf</span><span class="p">(</span><span class="s">"mqtt client handle initialization fail</span><span class="se">\n</span><span class="s">"</span><span class="p">);</span>&#x000A;        <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>&#x000A;    <span class="p">}</span>&#x000A;&#x000A;    <span class="k">while</span> <span class="p">(</span><span class="n">mqttConnected</span> <span class="o">==</span> <span class="nb">false</span> <span class="p">)</span> <span class="p">{</span>&#x000A;        <span class="n">sleep</span><span class="p">(</span><span class="mi">2</span><span class="p">);</span>&#x000A;        <span class="c1">// Connect mqtt client to server&#x000A;</span>        <span class="kt">int</span> <span class="n">result</span> <span class="o">=</span> <span class="n">mqtt_connect</span><span class="p">(</span><span class="n">pClientHandle</span><span class="p">,</span>&#x000A;                <span class="n">SERVER_ADDR</span><span class="p">,</span> <span class="mi">1883</span><span class="p">,</span> <span class="mi">60</span><span class="p">);</span>&#x000A;        <span class="k">if</span> <span class="p">(</span><span class="n">result</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>&#x000A;            <span class="n">printf</span><span class="p">(</span><span class="s">"mqtt client connect to server fail</span><span class="se">\n</span><span class="s">"</span><span class="p">);</span>&#x000A;            <span class="k">continue</span><span class="p">;</span>&#x000A;        <span class="p">}</span>&#x000A;        <span class="n">mqttConnected</span> <span class="o">=</span> <span class="nb">true</span><span class="p">;</span>&#x000A;    <span class="p">}</span>&#x000A;&#x000A;    <span class="n">bool</span> <span class="n">mqttSubscribe</span> <span class="o">=</span> <span class="nb">false</span><span class="p">;</span>&#x000A;&#x000A;    <span class="c1">// Subscribe to topic of interest&#x000A;</span>    <span class="k">while</span> <span class="p">(</span><span class="n">mqttSubscribe</span> <span class="o">==</span> <span class="nb">false</span> <span class="p">)</span> <span class="p">{</span>&#x000A;        <span class="n">sleep</span><span class="p">(</span><span class="mi">2</span><span class="p">);</span>&#x000A;        <span class="kt">int</span> <span class="n">result</span> <span class="o">=</span> <span class="n">mqtt_subscribe</span><span class="p">(</span><span class="n">pClientHandle</span><span class="p">,</span>&#x000A;                <span class="s">"color"</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span> <span class="c1">//topic - color, QOS - 0&#x000A;</span>        <span class="k">if</span> <span class="p">(</span><span class="n">result</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>&#x000A;            <span class="n">printf</span><span class="p">(</span><span class="s">"mqtt client subscribe to topic \&#x000A;                    failed</span><span class="se">\n</span><span class="s">"</span><span class="p">);</span>&#x000A;            <span class="k">continue</span><span class="p">;</span>&#x000A;        <span class="p">}</span>&#x000A;        <span class="n">mqttSubscribe</span> <span class="o">=</span> <span class="nb">true</span><span class="p">;</span>&#x000A;        <span class="n">printf</span><span class="p">(</span><span class="s">"mqtt client Subscribed to the topic successfully</span><span class="se">\n</span><span class="s">"</span><span class="p">);</span>&#x000A;    <span class="p">}</span>&#x000A;&#x000A;    <span class="k">while</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="p">{</span>&#x000A;    <span class="p">}</span>&#x000A;<span class="p">}</span></pre></td></tr></tbody></table>
            </div>
            
            </div>
            </div>
            
            
            To create the file: 
            <ol>
            <li>
            Right-click the project name you are working on.
            </li>
            <li>
            From the pop-up menu, select <strong>New &gt;&gt; Source file</strong>.
            </li>
            <li>
            Specify the name of the file as <code>main.c</code> and click Finish.
            </li>
            <li>
            Copy and paste in the <code>main.c</code> code we've provided.
            
            </li>
            <li>
            
            Enter the correct IP address of your MQTT broker at <code>SERVER_ADDR</code>. 
            
            </li>
            <li>
            
            
            
            If you are trying this project with your own external LEDs, change the GPIO mappings as needed.
            
            </li>
            <li>
            Save the file (Ctrl-S or use pulldown).
            
            </li>
            </ol>
            
            
            </li>
            <li>
            
            You'll also need to add a <code>wifi.h</code> header file with code we provide here. 
            
            
            
            <p style="margin-left: 0px;"><strong style="display: inline-block; margin-right: 5px;"><font color="blue"></font> </strong>
            
              <a class="btn btn-primary" role="button" data-toggle="collapse" href="#mqtt-sub-wifi" aria-expanded="false" aria-controls="mqtt-sub-wifi">
                wifi.h code
              </a>
            </p>
            
            <div class="collapse" id="mqtt-sub-wifi">
            <div class="boxed">
              <h3 id="wifih-code">wifi.h code</h3>
            
            <div class="highlight c"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1&#x000A;2&#x000A;3&#x000A;4&#x000A;5&#x000A;6&#x000A;7&#x000A;8&#x000A;9&#x000A;10&#x000A;11&#x000A;12&#x000A;13&#x000A;14&#x000A;15&#x000A;16&#x000A;17&#x000A;18&#x000A;19&#x000A;20&#x000A;21&#x000A;22&#x000A;23&#x000A;24&#x000A;25&#x000A;26&#x000A;27&#x000A;28&#x000A;29&#x000A;30&#x000A;31&#x000A;32&#x000A;33&#x000A;34&#x000A;35&#x000A;36&#x000A;37&#x000A;38&#x000A;39&#x000A;40&#x000A;41&#x000A;42&#x000A;43&#x000A;44&#x000A;45&#x000A;46&#x000A;47&#x000A;48&#x000A;49&#x000A;50&#x000A;51&#x000A;52&#x000A;53&#x000A;54&#x000A;55&#x000A;56&#x000A;57&#x000A;58&#x000A;59&#x000A;60&#x000A;61&#x000A;62&#x000A;63&#x000A;64&#x000A;65&#x000A;66&#x000A;67&#x000A;68&#x000A;69&#x000A;70&#x000A;71&#x000A;72&#x000A;73&#x000A;74&#x000A;75&#x000A;76&#x000A;77&#x000A;78&#x000A;79&#x000A;80&#x000A;81&#x000A;82&#x000A;83&#x000A;84&#x000A;85&#x000A;86&#x000A;87&#x000A;88&#x000A;89&#x000A;90&#x000A;91&#x000A;92&#x000A;93&#x000A;94&#x000A;95&#x000A;96</pre></td><td class="code"><pre><span class="cp">#include &lt;net/if.h&gt;&#x000A;#include &lt;apps/netutils/wifi/slsi_wifi_api.h&gt;&#x000A;</span>&#x000A;<span class="c1">// WIFi&#x000A;</span><span class="cp">#define STATE_DISCONNECTED          0&#x000A;#define STATE_CONNECTED             1&#x000A;</span>&#x000A;<span class="cp">#define SLSI_WIFI_SECURITY_OPEN     "open"&#x000A;#define SLSI_WIFI_SECURITY_WPA2_AES "wpa2_aes"&#x000A;</span>&#x000A;<span class="cp">#define SSID "MyAP"&#x000A;#define PSK  "abcd1234"&#x000A;</span>&#x000A;<span class="n">slsi_security_config_t</span> <span class="o">*</span><span class="n">getSecurityConfig</span><span class="p">(</span><span class="kt">char</span> <span class="o">*</span><span class="n">sec_type</span><span class="p">,</span>&#x000A;        <span class="kt">char</span> <span class="o">*</span><span class="n">psk</span><span class="p">,</span> <span class="n">WiFi_InterFace_ID_t</span> <span class="n">mode</span><span class="p">);</span>&#x000A;&#x000A;<span class="k">static</span> <span class="kt">int</span> <span class="n">g_connection_state</span> <span class="o">=</span> <span class="n">STATE_DISCONNECTED</span><span class="p">;</span>&#x000A;<span class="k">static</span> <span class="kt">uint8_t</span> <span class="n">g_join_result</span>  <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>&#x000A;<span class="k">static</span> <span class="n">sem_t</span> <span class="n">g_sem_join</span><span class="p">;</span>&#x000A;&#x000A;<span class="cm">/**&#x000A; * Handler for network link up connection event&#x000A; *&#x000A; *   Sets the global connection state variable and the&#x000A; *   result of the network join request.&#x000A; */</span>&#x000A;<span class="kt">void</span> <span class="nf">networkLinkUpHandler</span><span class="p">(</span><span class="n">slsi_reason_t</span><span class="o">*</span> <span class="n">reason</span><span class="p">)</span> <span class="p">{</span>&#x000A;    <span class="n">g_connection_state</span> <span class="o">=</span> <span class="n">STATE_CONNECTED</span><span class="p">;</span>&#x000A;&#x000A;    <span class="n">g_join_result</span> <span class="o">=</span> <span class="n">reason</span><span class="o">-&gt;</span><span class="n">reason_code</span><span class="p">;</span>&#x000A;    <span class="n">sem_post</span><span class="p">(</span><span class="o">&amp;</span><span class="n">g_sem_join</span><span class="p">);</span>&#x000A;<span class="p">}</span>&#x000A;&#x000A;<span class="cm">/**&#x000A; * Handler for network link down connection event&#x000A; *&#x000A; *   Sets the global connection variable when the access&#x000A; *   point is disconnected from the network.&#x000A; */</span>&#x000A;<span class="kt">void</span> <span class="nf">networkLinkDownHandler</span><span class="p">(</span><span class="n">slsi_reason_t</span><span class="o">*</span> <span class="n">reason</span><span class="p">)</span> <span class="p">{</span>&#x000A;    <span class="n">g_connection_state</span> <span class="o">=</span> <span class="n">STATE_DISCONNECTED</span><span class="p">;</span>&#x000A;&#x000A;    <span class="k">if</span> <span class="p">(</span><span class="n">reason</span><span class="p">)</span> <span class="p">{</span>&#x000A;        <span class="n">printf</span><span class="p">(</span><span class="s">"Disconnected from network %s "</span>&#x000A;               <span class="s">"reason_code: %d %s</span><span class="se">\n</span><span class="s">"</span><span class="p">,</span> <span class="n">reason</span><span class="o">-&gt;</span><span class="n">bssid</span><span class="p">,</span>&#x000A;                <span class="n">reason</span><span class="o">-&gt;</span><span class="n">reason_code</span><span class="p">,</span>&#x000A;                <span class="n">reason</span><span class="o">-&gt;</span><span class="n">locally_generated</span> <span class="o">?</span>&#x000A;                        <span class="s">"(locally_generated)"</span><span class="o">:</span> <span class="s">""</span><span class="p">);</span>&#x000A;    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>&#x000A;        <span class="n">printf</span><span class="p">(</span><span class="s">"Disconnected from network</span><span class="se">\n</span><span class="s">"</span><span class="p">);</span>&#x000A;    <span class="p">}</span>&#x000A;<span class="p">}</span>&#x000A;&#x000A;<span class="cm">/**&#x000A; * Starts the Wi-Fi interface and request connection to the&#x000A; * specified network&#x000A; *&#x000A; *   Return: Completed successfully or failed&#x000A; *&#x000A; *   Starts the Wi-Fi interface in Station mode and requests&#x000A; *   to join the specified network.&#x000A; */</span>&#x000A;<span class="kt">int8_t</span> <span class="nf">start_wifi_interface</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span> <span class="p">{</span>&#x000A;&#x000A;    <span class="k">if</span> <span class="p">(</span> <span class="n">WiFiRegisterLinkCallback</span><span class="p">(</span><span class="o">&amp;</span><span class="n">networkLinkUpHandler</span><span class="p">,</span>&#x000A;            <span class="o">&amp;</span><span class="n">networkLinkDownHandler</span><span class="p">)</span> <span class="p">)</span> <span class="p">{</span>&#x000A;        <span class="k">return</span> <span class="n">SLSI_STATUS_ERROR</span><span class="p">;</span>&#x000A;    <span class="p">}</span>&#x000A;&#x000A;    <span class="k">if</span> <span class="p">(</span> <span class="n">WiFiStart</span><span class="p">(</span><span class="n">SLSI_WIFI_STATION_IF</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">)</span> <span class="o">==</span>&#x000A;            <span class="n">SLSI_STATUS_ERROR</span> <span class="p">)</span> <span class="p">{</span>&#x000A;        <span class="k">return</span> <span class="n">SLSI_STATUS_ERROR</span><span class="p">;</span>&#x000A;    <span class="p">}</span>&#x000A;&#x000A;    <span class="n">sem_init</span><span class="p">(</span><span class="o">&amp;</span><span class="n">g_sem_join</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>&#x000A;&#x000A;    <span class="n">slsi_security_config_t</span> <span class="o">*</span><span class="n">security_config</span> <span class="o">=</span>&#x000A;            <span class="n">getSecurityConfig</span><span class="p">(</span><span class="n">SLSI_WIFI_SECURITY_WPA2_AES</span><span class="p">,</span>&#x000A;                <span class="n">PSK</span><span class="p">,</span> <span class="n">SLSI_WIFI_STATION_IF</span><span class="p">);</span>&#x000A;&#x000A;    <span class="k">if</span> <span class="p">(</span> <span class="n">WiFiNetworkJoin</span><span class="p">((</span><span class="kt">uint8_t</span><span class="o">*</span><span class="p">)</span><span class="n">SSID</span><span class="p">,</span> <span class="n">strlen</span><span class="p">(</span><span class="n">SSID</span><span class="p">),</span>&#x000A;            <span class="nb">NULL</span><span class="p">,</span> <span class="n">security_config</span><span class="p">)</span> <span class="o">==</span> <span class="n">SLSI_STATUS_ERROR</span> <span class="p">)</span> <span class="p">{</span>&#x000A;        <span class="k">return</span> <span class="n">SLSI_STATUS_ERROR</span><span class="p">;</span>&#x000A;    <span class="p">}</span>&#x000A;&#x000A;    <span class="n">sem_wait</span><span class="p">(</span><span class="o">&amp;</span><span class="n">g_sem_join</span><span class="p">);</span>&#x000A;&#x000A;    <span class="k">if</span><span class="p">(</span> <span class="n">g_join_result</span> <span class="p">)</span> <span class="p">{</span>&#x000A;       <span class="k">return</span> <span class="n">SLSI_STATUS_ERROR</span><span class="p">;</span>&#x000A;    <span class="p">}</span>&#x000A;&#x000A;    <span class="n">free</span><span class="p">(</span><span class="n">security_config</span><span class="p">);</span>&#x000A;    <span class="n">sem_destroy</span><span class="p">(</span><span class="o">&amp;</span><span class="n">g_sem_join</span><span class="p">);</span>&#x000A;&#x000A;    <span class="k">return</span> <span class="n">SLSI_STATUS_SUCCESS</span><span class="p">;</span>&#x000A;<span class="p">}</span></pre></td></tr></tbody></table>
            </div>
            
            
            </div>
            </div>
            
            
            To create the header file: 
            <ol>
            <li>
            Right-click the project name you are working on.
            </li>
            <li>
            From the pop-up menu, select <strong>New &gt;&gt; Header file</strong>.
            </li>
            <li>
            Specify the name of the file as <code>wifi.h</code> and click Finish.
            </li>
            <li>
            Delete the default file contents and paste in the <code>wifi.h</code> code.
            
            
            
            </li>
            <li>
            Change <code>SSID</code>, <code>PSK</code>, and if necessary the security type, to let ARTIK get to your Wi-Fi access point.
            </li>
            
            <li>
            Save the file.
            </li>
            </ol>
            
            
            <li>
            Edit <span class="code-font">main.c</span> to change the name of the <code>main</code> function to <code>hello_main</code> so that you end up with: <br>
            <pre>&#x000A;   int <code>hello_main</code>(int argc, char *argv[])&#x000A;   {&#x000A;   . . .</pre>
            
            </li>
            
            <li>
            Build the code as usual.
            </li>
            
            
            </ol>
            
            <p>You're all ready to go now.</p>
            
            <p class="info"><span class="code-font">hello_main.c</span> is the name is used in the hidden <span class="code-font">_main.c</span> file that adds your program to the <span class="code-font">TASH</span> menu. Modify that file to suit your application.</p>
            
            <h2 id="run-subscriber-code">Run Subscriber Code</h2>
            
            <p>Flash-load the code to your ARTIK 05X board as always. When it finishes, and any time you apply power from now on (even without a terminal connection), it will be a standalone MQTT subscriber.</p>
            
            <p>If all goes well:<br>
            – Red LED 703 on the ARTIK 05X  board will turn on while trying to connect to Wi-Fi.<br>
            – The LED will go out once the connection is established.<br>
            – There will be a delay (up to a minute) while DHCP acquires an IP address.<br>
            – You will see new subscriber messages on your MQTT broker – your code works!</p>
            
            <p>You can now proceed to send it a test message using either Node-RED or MQTT.fx.</p>
            
            <div class="expand" id="mqtt-network-trouble">
              <div class="boxed">
                <p class="info"><strong>Troubleshooting Tip.</strong> Not working? Remember that all parties must use the same network IP address as the <strong>broker</strong>.</p>
                <p>You must be connected to the same Wi-Fi access point name on<br>
            – your PC running showing the Node-RED page in a Web browser<br>
            – the ARTIK Linux board, as set up in  <code>wpa_supplicant.conf</code> or <code>connman</code></p>
            
                <p>The  <code>ipconfig wlan0</code> IP address from the ARTIK Linux board must match<br>
            – <code>SERVER_ADDR "xxx.xxx.xxx.xxx"</code> for each ARTIK 053 module<br>
            – the Node-RED page URL in your Web browser – <code>xxx.xxx.xxx.xxx:1880</code>  <br>
            – the Node-RED MQTT output node server address – <code>xxx.xxx.xxx.xxx:1883</code></p>
            
                <p>For a Windows MQTT broker, check with <code>ifconfig -all</code>  in a command window.</p>
            
              </div>
            </div>
            
            <h2 id="publish-to-subscriber">Publish to Subscriber</h2>
            
            <p>You're set up to send a <code>color</code> message to your ARTIK 05X board by way of your Mosquitto broker. Use Node-RED if you are using Mosquitto on an ARTIK 5/7/10 board, or install and use MQTT.fx if you are using Mosquitto on a development PC.</p>
            
            <h3 id="using-node-red-as-publisher">Using Node-RED as publisher</h3>
            
            <p>Use this approach with your ARTIK 5/7/10 board.</p>
            
            <ol>
              <li>
                <p>Start Node-RED (node connection development tool) and run it as a background process.<br>
            <code>node-red &amp;</code></p>
              </li>
              <li>
                <p>Follow the <a href="..\..\advanced-concepts\mqtt\color-mqtt.html#sending-mqtt-messages">MQTT Tutorial</a> to send a Topic of <code>color</code> with a payload of <code>RED</code>.</p>
              </li>
              <li>
                <p>Try again with a color of <code>BLUE</code>.</p>
              </li>
            </ol>
            
            <h3 id="using-mqttfx-as-publisher">Using MQTT.fx as publisher</h3>
            
            <p>Use this approach with your development PC.</p>
            
            <ol>
              <li>
                <p>Start MQTT.fx and bring up its configuration page by clicking on the "gear" symbol next to the grayed-out <strong>Connect</strong> button.</p>
              </li>
              <li>
                <p>Configure it as shown, replacing the IP address with the localhost address you determined previously.<br>
            <img alt="" class="lightbox" src="..\..\images\docs\getting-started-artik\mqttfx-cfg.jpg?1549048075"></p>
              </li>
              <li>
                <p>Set the topic to <code>color</code> and enter a message of <code>RED</code> or <code>BLUE</code>, then click <strong>Publish</strong>.<br>
            <img alt="" src="..\..\images\docs\getting-started-artik\mqttfx-blue.jpg?1549048075"></p>
              </li>
            </ol>
            
            <h3 id="adding-green-led">Adding GREEN LED</h3>
            
            <p>There are on-board RED and BLUE LED circuits, but you'll want to add a green one too.</p>
            
            <p>Follow the <a href="blink-an-led.html#using-external-led">Using External LED</a> instructions to build a GREEN LED circuit, and use the <a href="..\getting-started\board-ref.html#artik-053-header-map">header mapping</a> to connect it to XGPIO22 (the GREEN assignment in the code matches, using <code>gpio51</code> as shown in the mapping).</p>
            
            <p><img alt="" src="..\..\images\docs\getting-started-artik\a053-led-fritzing.jpg?1549048075"></p>
            
            <p>Now you can publish a value of GREEN to get that external circuit to illuminate the LED. The transistor gives you the current you need to drive LEDs brighter, or to drive relays, solenoids, motors, etc.</p>
            
            <h2 id="summary">Summary</h2>
            
            <p>You've built a stand-alone MQTT subscriber, keyed to your own private Wi-Fi access point, that you can use to turn LEDs on and off, or if equipped with a relay, to control lamps and appliances.</p>
            
            <p>In the next article we'll focus on the "publish" side of the ARTIK 05X MQTT equation.</p>
            
            <h2 id="extra-credit-remote-pwm-control">Extra Credit: Remote PWM Control</h2>
            
            <p>While we're on the topic of LEDs, let's talk about PWM pins – using them instead of GPIOs would give you the ability to vary the intensity of the LEDs. This exercise is optional for now, but will be referenced in the <a href="..\..\advanced-concepts\mqtt\color-mqtt-web.html">Web Window to MQTT</a> tutorial, so we encourage you to try it.</p>
            
            <h3 id="wiring-the-pwm-pins">Wiring the PWM pins</h3>
            
            <p>You can attach external RED, BLUE, and GREEN LED circuits to the PWM 0, 1, and 2 pins (respectively) to drive them.  We've just shown the RED circuit for clarity.</p>
            
            <p><img alt="" src="..\..\images\docs\getting-started-artik\a053-led-fritzing-pwm.jpg?1549048075"></p>
            
            <h3 id="modifying-the-artik-05x-code">Modifying the ARTIK 05X code</h3>
            <p>You want to be able to send a message that includes intensity information for each LED. We'll use this feature in an advanced MQTT article.</p>
            
            <p>In the <code>main.c</code> code, add the following.</p>
            
            <ol>
            
            <li>
            Bring in the PWM headers (adjusting for the path if needed).<br>
            <code>#include &lt;tinyara/pwm.h&gt;</code>
            </li>
            
            
            <li>
            Declare the variables for the PWM handles globally after the existing line:<br>
            <pre>int currentLED = 0;</pre>
            <code>&#x000A;int fd_red;<br>&#x000A;int fd_blue;<br>&#x000A;int fd_green;</code>
            </li>
            <li>
            Open the PWM channels one time only, at the end of <code>initializeConfigUtil</code>.
            
            <pre>&#x000A;clientConfig.on_message = (void*) onMessage;</pre>
            <code>&#x000A;fd_red = open("/dev/pwm0", O_RDWR);<br>&#x000A;fd_blue = open("/dev/pwm1", O_RDWR);<br>&#x000A;fd_green = open("/dev/pwm2", O_RDWR);</code>
            </li>
            <li>
            Set the PWM channels from the incoming message. Under <code>void onMessage...</code>  right before<br>
            <pre>&#x000A;currentLED = 0;&#x000A;ledSignal();    // Turn off all LEDs</pre><br>
            add this code:  
            
            
            <p style="margin-left: 0px;"><strong style="display: inline-block; margin-right: 5px;"><font color="blue"></font> </strong>
            
              <a class="btn btn-primary" role="button" data-toggle="collapse" href="#mqtt-sub-pwm" aria-expanded="false" aria-controls="mqtt-sub-pwm">
                in-line pwm code
              </a>
            </p>
            
            <div class="collapse" id="mqtt-sub-pwm">
            <div class="boxed">
              <div class="highlight c"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1&#x000A;2&#x000A;3&#x000A;4&#x000A;5&#x000A;6&#x000A;7&#x000A;8&#x000A;9&#x000A;10&#x000A;11&#x000A;12&#x000A;13&#x000A;14&#x000A;15&#x000A;16&#x000A;17&#x000A;18&#x000A;19&#x000A;20&#x000A;21&#x000A;22&#x000A;23</pre></td><td class="code"><pre><span class="c1">// use 6 hex digits rr-gg-bb to set PWM outputs for external LED intensity&#x000A;</span><span class="kt">long</span> <span class="kt">int</span> <span class="n">i</span><span class="o">=</span><span class="n">strtol</span><span class="p">(</span><span class="n">msg</span><span class="o">-&gt;</span><span class="n">payload</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">,</span> <span class="mi">16</span><span class="p">);</span> &#x000A;<span class="kt">int</span> <span class="n">b</span> <span class="o">=</span> <span class="n">i</span> <span class="o">&amp;</span> <span class="mh">0xFF</span><span class="p">;</span>&#x000A;<span class="kt">int</span> <span class="n">g</span> <span class="o">=</span> <span class="p">(</span><span class="n">i</span> <span class="o">&gt;&gt;</span> <span class="mi">8</span><span class="p">)</span> <span class="o">&amp;</span> <span class="mh">0xff</span><span class="p">;</span>&#x000A;<span class="kt">int</span> <span class="n">r</span> <span class="o">=</span> <span class="p">(</span><span class="n">i</span> <span class="o">&gt;&gt;</span> <span class="mi">16</span><span class="p">)</span> <span class="o">&amp;</span> <span class="mh">0xff</span><span class="p">;</span>&#x000A;&#x000A;<span class="k">struct</span> <span class="n">pwm_info_s</span> <span class="n">pwm_info</span><span class="p">;</span>&#x000A;&#x000A;<span class="n">pwm_info</span><span class="p">.</span><span class="n">frequency</span> <span class="o">=</span> <span class="mi">1000</span><span class="p">;</span>&#x000A;&#x000A;<span class="n">pwm_info</span><span class="p">.</span><span class="n">duty</span> <span class="o">=</span> <span class="n">r</span> <span class="o">*</span> <span class="mi">255</span><span class="p">;</span>&#x000A;<span class="n">ioctl</span><span class="p">(</span><span class="n">fd_red</span><span class="p">,</span> <span class="n">PWMIOC_SETCHARACTERISTICS</span><span class="p">,</span> <span class="p">(</span><span class="kt">unsigned</span> <span class="kt">long</span><span class="p">)((</span><span class="kt">uintptr_t</span><span class="p">)</span><span class="o">&amp;</span><span class="n">pwm_info</span><span class="p">));</span>&#x000A;<span class="n">ioctl</span><span class="p">(</span><span class="n">fd_red</span><span class="p">,</span> <span class="n">PWMIOC_START</span><span class="p">);</span>&#x000A;&#x000A;<span class="n">pwm_info</span><span class="p">.</span><span class="n">duty</span> <span class="o">=</span> <span class="n">b</span> <span class="o">*</span> <span class="mi">255</span><span class="p">;</span>&#x000A;<span class="n">ioctl</span><span class="p">(</span><span class="n">fd_blue</span><span class="p">,</span> <span class="n">PWMIOC_SETCHARACTERISTICS</span><span class="p">,</span> <span class="p">(</span><span class="kt">unsigned</span> <span class="kt">long</span><span class="p">)((</span><span class="kt">uintptr_t</span><span class="p">)</span><span class="o">&amp;</span><span class="n">pwm_info</span><span class="p">));</span>&#x000A;<span class="n">ioctl</span><span class="p">(</span><span class="n">fd_blue</span><span class="p">,</span> <span class="n">PWMIOC_START</span><span class="p">);</span>&#x000A;&#x000A;<span class="n">pwm_info</span><span class="p">.</span><span class="n">duty</span> <span class="o">=</span> <span class="n">g</span> <span class="o">*</span> <span class="mi">255</span><span class="p">;</span>&#x000A;<span class="n">ioctl</span><span class="p">(</span><span class="n">fd_green</span><span class="p">,</span> <span class="n">PWMIOC_SETCHARACTERISTICS</span><span class="p">,</span> <span class="p">(</span><span class="kt">unsigned</span> <span class="kt">long</span><span class="p">)((</span><span class="kt">uintptr_t</span><span class="p">)</span><span class="o">&amp;</span><span class="n">pwm_info</span><span class="p">));</span>&#x000A;<span class="n">ioctl</span><span class="p">(</span><span class="n">fd_green</span><span class="p">,</span> <span class="n">PWMIOC_START</span><span class="p">);</span>&#x000A;&#x000A;<span class="n">printf</span><span class="p">(</span><span class="s">"r-g-b %d-%d-%d</span><span class="se">\n</span><span class="s">"</span><span class="p">,</span> <span class="n">r</span><span class="p">,</span> <span class="n">g</span><span class="p">,</span> <span class="n">b</span><span class="p">);</span></pre></td></tr></tbody></table>
            </div>
            
            </div>
            </div>
            
            
            
            </li>
            </ol>
            
            <p>Whenever the message is not a recognized payload keyword, this routine will act on it.</p>
            
            <p><strong>Trying it out.</strong> When the ARTIK 05X module receives a message other than RED, BLUE, or GREEN, the new code will try to interpret it as a string of six hex digits corresponding to R-G-B, and use the values to modulate the PWM outputs.</p>
            
            <p>To test it with R=<code>FF</code>, G=<code>AA</code>, and B=<code>77</code>, do the following.</p>
            
            <ul>
              <li>MQTT.fx: Type in <code>FFAA77</code> and click <strong>Publish</strong>.</li>
              <li>Node-RED: Change your Inject node payload to <code>FFAA77</code>, click <strong>Deploy</strong>, and click the node to send.</li>
            </ul>
            
            <p>You should see your external LEDs illuminate at the intensities you've sent, and the GPIO-controlled ones will turn off.</p>
            <div class='page-updated-on'>
              <i class='fa fa-clock-o'></i>
              <strong>Last updated on:</strong>
              <time datetime='2018-08-14 18:09:59 +0000'>Aug 14 2018,  6:09 PM</time>
            </div>
            <div></div>
            <ul class='paging-links'>
              <li class='prev-page'><a href="sensor-tutorial.html">Prev: Sensors -- ARTIK IDE</a></li>
              <li class='next-page'><a href="mqtt-publisher.html">Next: MQTT Publisher</a></li>
            </ul>
          </div>
        </div>
      </div>
    </div>
    <footer class="sa-footer" data-swiftype-index="false">
      <section style="display: none;">
      </section>
      <section>
        <div class="sa-container">
          <div class="row">
            <div class="col-xs-12">
              <small>Copyright &copy; 1995-2019 SAMSUNG All Rights Reserved.</small>
              <div class="pull-right">
                <a style="margin-right: 10px;" href="javascript:zE.activate()">Contact</a>
                <a style="margin-right: 10px;" href="/agreement">Developer License Agreement</a>
                <a href="http://www.samsung.com">Samsung.com <i class="fa fa-chevron-right fa-1"></i></a>
              </div>
            </div>
          </div>
        </div>
      </section>
    </footer>
    <script id='toc' type='text/html'>
      <div>
        {{#title}}
        <h2 class='table-of-contents-title'>
          <a href='#{{href}}'>{{ text }}</a>
        </h2>
        {{/title}}
        <ul class='table-of-contents-list nav'>
          {{#items}}
          <li class='{{className}}'>
            <a href='#{{href}}'>{{text}}</a>
          </li>
          {{/items}}
        </ul>
      </div>
    </script>
    <script src="..\..\javascripts\manifest.js?1549048180"></script>
    <script src="..\..\javascripts\lib\scrollbar.js?1549048170"></script>
    <script type='text/javascript'>
      function getCookieDomain() {
        var temp = window.location.hostname.split('.').reverse();
      
        if (temp.length == 1) {
          domain = temp[0]; // localhost
        } else if (temp.length > 1) {
          domain = temp[1] + '.' + temp[0]; // staging + production
        }
      
        return domain;
      }
      
      $(function() {
        if (typeof Cookies.get('eol') === 'undefined') {
          Cookies.set('eol', 'true', { expires: 0.5, path: '/' });
      
          var p = document.createElement('p');
      
          p.innerHTML = "Please kindly note that due to the closure of ARTIK business, log-on required services on the ARTIK.io website will no longer be accessible beginning on February 1, 2019.\
           Most of the menu functionalities will be removed from the website, and we are going to provide only downloads, documentation and blog pages as below:<br>\
          <br>\
          <a href='https://developer.artik.io/downloads' target='_blank'>https://developer.artik.io/downloads</a><br>\
          <a href='https://developer.artik.io/documentation' target='_blank'>https://developer.artik.io/documentation</a><br>\
          <a href='https://www.artik.io/blog' target='_blank'>https://www.artik.io/blog</a><br>\
          <br>\
          The downloads, documentation and blog pages will be accessible until November 30, 2019.\
           ARTIK.io will be completely shut down on November 30, 2019. All of your personal data and account profile will be permanently and safely destroyed in accordance with the applicable privacy laws.\
          <br><br>\
          Thank you for your interest and support towards ARTIK business.";
      
          swal({
            html: true,
            title: "Dear ARTIK Customers,",
            content: p,
            icon: "warning",
            dangerMode: false,
          });
        }
      
        // cookies overlay
        var cookieName = 'cookiesOverlay';
      
        _onload_cookiesOverlay = function() {
          var acceptedPP = !!Cookies.get(cookieName);
      
          if (!acceptedPP) {
            var overlay = document.createElement("div");
            var policy = '<div class="frame"><p>We use cookies on our website as described in our\
             <a href="https://www.samsung.com/us/account/privacy-policy/">Privacy Policy</a>,\
             to enhance your browsing experience and we process personal information in the United States which, for users outside the United States, may have a lower standard of data privacy laws compared to your country of residence. Please click Accept to confirm your acceptance to our use of cookies. By continuing to use the website you are deemed to have consented to our use of cookies.</p>\
             <a class="button" onclick="cookiesOverlayAcceptPP()">Accept</a></div>';
      
            overlay.id = "cookies-alert";
            overlay.innerHTML = policy;
            document.getElementsByTagName("body")[0].appendChild(overlay);
          }
        }
      
        if (window.addEventListener) {window.addEventListener('load', _onload_cookiesOverlay, false);}
        else {window.attachEvent('onload', _onload_cookiesOverlay)}
      
        window.cookiesOverlayAcceptPP = function() {
          Cookies.set(cookieName, "true", { expires: 365, path: '/', domain: getCookieDomain() });
          document.getElementById("cookies-alert").style.display = "none";
        }
      });
    </script>
  </body>
</html>
